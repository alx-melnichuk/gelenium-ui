import { CdkConnectedOverlay } from '@angular/cdk/overlay';
import { isPlatformBrowser } from '@angular/common';
import { ChangeDetectionStrategy, Component, ContentChild, ContentChildren, ElementRef, EventEmitter, forwardRef, Inject, InjectionToken, Input, Optional, Output, PLATFORM_ID, ViewChild, ViewEncapsulation, } from '@angular/core';
import { FormControl, FormGroup, NG_VALIDATORS, NG_VALUE_ACCESSOR, } from '@angular/forms';
import { take } from 'rxjs/operators';
import { GLN_NODE_INTERNAL_VALIDATOR } from '../directives/gln-regex/gln-node-internal-validator.interface';
import { GlnBasisFrame } from '../_classes/gln-basis-frame.class';
import { GlnFrameSize, GlnFrameSizeUtil } from '../gln-frame/gln-frame-size.interface';
import { GLN_OPTION_PARENT } from '../gln-option/gln-option-parent.interface';
import { GlnOptionComponent } from '../gln-option/gln-option.component';
import { GlnOptionUtil } from '../gln-option/gln-option.util';
import { ArrayUtil } from '../_utils/array.util';
import { BooleanUtil } from '../_utils/boolean.util';
import { HtmlElemUtil } from '../_utils/html-elem.util';
import { NumberUtil } from '../_utils/number.util';
import { ScreenUtil } from '../_utils/screen.util';
import { GLN_SELECT_SCROLL_STRATEGY } from './gln-select.providers';
import { GLN_SELECT_TRIGGER } from './gln-select-trigger.directive';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "@angular/cdk/overlay";
import * as i3 from "@angular/forms";
import * as i4 from "../directives/gln-frame-exterior-input/gln-frame-exterior-input.directive";
import * as i5 from "../gln-frame/gln-frame.component";
import * as i6 from "../directives/gln-frame-ornament/gln-frame-ornament.directive";
import * as i7 from "../directives/gln-frame-size/gln-frame-size.directive";
import * as i8 from "../gln-hint-or-error/gln-hint-or-error.component";
let uniqueIdCounter = 0;
export const GLN_SELECT_CONFIG = new InjectionToken('GLN_SELECT_CONFIG');
const CSS_ATTR_FOR_FRAME_FOCUS = 'foc';
const CSS_ATTR_FOR_PANEL_OPENING_ANIMATION = 'is-open';
const CSS_ATTR_FOR_PANEL_CLOSING_ANIMATION = 'is-hide';
const CSS_PROP_BORDER_RADIUS = '--glnslpo-border-radius';
const CSS_PROP_MAX_HEIGHT = '--glnslpo-max-height';
const CSS_PROP_EL_MIN_WIDTH = '--glnsl-el-min-width';
const CSS_PROP_EL_MIN_HEIGHT = '--glnsl-el-min-height';
const CSS_PROP_TRANSLATE_Y = '--glnslpo-translate-y';
export class GlnSelectComponent extends GlnBasisFrame {
    constructor(hostRef, renderer, changeDetectorRef, 
    // eslint-disable-next-line @typescript-eslint/ban-types
    platformId, rootConfig, 
    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any
    scrollStrategyFactory, ngZone) {
        super(uniqueIdCounter++, 'glnsl', hostRef, renderer, changeDetectorRef, ngZone);
        this.platformId = platformId;
        this.rootConfig = rootConfig;
        this.scrollStrategyFactory = scrollStrategyFactory;
        this.panelClass = ''; // -
        this.visibleSize = 0;
        this.tabIndex = 0; // ~
        this.focused = new EventEmitter();
        this.blured = new EventEmitter();
        this.opened = new EventEmitter();
        this.closed = new EventEmitter();
        // @Output()
        // readonly writeValueInit: EventEmitter<() => void> = new EventEmitter(); // Is in GlnBasisControl.
        this.selected = new EventEmitter();
        this.backdropClassVal = null;
        this.checkmark = null; // Binding attribute "isCheckmark". // interface GlnOptionParent
        this.currConfig = null;
        // public disabled: boolean | null = null; // Binding attribute "isDisabled". // Is in GlnBasisControl.
        // public error: boolean | null = null; // Binding attribute "isError". // Is in GlnBasisControl.
        this.errors = null;
        this.formControl = new FormControl({ value: null, disabled: false }, []);
        this.formGroup = new FormGroup({ textData: this.formControl });
        this.frameSizeDefault = GlnFrameSizeUtil.getValue(GlnFrameSize.middle) || 0;
        this.hasPanelAnimation = false;
        this.isFocused = false;
        this.isFilled = false;
        this.isPanelOpen = false;
        // public isWriteValueInit: boolean | null = null;                         // Is in GlnBasisControl.
        // public labelShrink: boolean | null = null; // Binding attribute "isLabelShrink". // Is in GlnBasisControl.
        this.multiple = null; // Binding attribute "isMultiple". // interface GlnOptionParent
        // public noAnimation: boolean | null = null; // Binding attribute "isNoAnimation". // Is in GlnBasisControl.
        this.noIcon = null; // Binding attribute "isNoIcon",
        // public noLabel: boolean | null = null; // Binding attribute "isNoLabel". // Is in GlnBasisControl.
        this.noRipple = null; // Binding attribute "isNoRipple". // interface GlnOptionParent
        this.overlayPanelClass = '';
        this.positionList = [];
        // public readOnly: boolean | null = null; // Binding attribute "isReadOnly". // Is in GlnBasisControl.
        // public required: boolean | null = null; // Binding attribute "isRequired". // Is in GlnBasisControl.
        this.selectedOptions = [];
        /** The position and dimensions for the trigger's bounding box. */
        this.triggerRect = null;
        // public valueInit: boolean | null = null; // Binding attribute "isValueInit". // Is in GlnBasisControl.
        this.visibleSizeVal = null; // Binding attribute "visibleSize".
        this.isFocusAttrOnFrame = false;
        this.markedOption = null;
        this.maxWidth = 0;
        /** Saving the font size of the trigger element. */
        this.triggerFontSize = 0;
        /** Saving the frame size of the trigger element. Defines BorderRadius. */
        this.triggerFrameSize = 0;
        this.currConfig = this.rootConfig;
        this.scrollStrategy = this.scrollStrategyFactory();
        HtmlElemUtil.setClass(this.renderer, this.hostRef, 'gln-select', true);
        HtmlElemUtil.setClass(this.renderer, this.hostRef, 'gln-control', true);
    }
    get value() {
        return this.valueData;
    }
    set value(newValue) {
        if (this.multiple && !Array.isArray(newValue)) {
            throw Error('The value must be an array in multi-select mode.');
        }
        if (!this.multiple && Array.isArray(newValue)) {
            throw Error('The value must not be an array in single select mode.');
        }
        if (newValue !== this.valueData || (this.multiple && Array.isArray(newValue))) {
            // Get a list of menu items according to an array of values.
            const newOptions = GlnOptionUtil.getOptionsByValues(newValue, this.options);
            // Which elements of array "this.selectedOptions" are not included in array "newOptions".
            const removed = ArrayUtil.uninclude(this.selectedOptions, newOptions);
            // Which elements of array "newOptions" are not included in array "this.selectedOptions".
            const added = ArrayUtil.uninclude(newOptions, this.selectedOptions);
            this.selectedOptions = this.mergeOptions(this.selectedOptions, added, removed);
            this.updateValueDataAndIsFilledAndValidity(newValue);
            this.changeDetectorRef.markForCheck();
        }
    }
    get options() {
        return this.optionList?.toArray() || [];
    }
    // eslint-disable-next-line @typescript-eslint/no-empty-function
    set options(value) { }
    ngOnChanges(changes) {
        // In the GlnBasisControl.ngOnChanges(), the definition is made:
        // - this.disabled = BooleanUtil.init(this.isDisabled);
        // - this.error = BooleanUtil.init(this.isError);
        // - this.labelShrink = BooleanUtil.init(this.isLabelShrink);
        // - this.noAnimation = BooleanUtil.init(this.isNoAnimation);
        // - this.noLabel = BooleanUtil.init(this.isNoLabel);
        // - this.readOnly = BooleanUtil.init(this.isReadOnly);
        // - this.required = BooleanUtil.init(this.isRequired);
        // - this.valueInit = BooleanUtil.init(this.isValueInit);
        super.ngOnChanges(changes);
        if (changes['config']) {
            this.currConfig = { ...this.rootConfig, ...this.config };
            if (this.noAnimation == null) {
                this.noAnimation = this.currConfig?.isNoAnimation || null;
            }
        }
        if (changes['isCheckmark'] || (changes['config'] && this.isCheckmark == null)) {
            this.checkmark = BooleanUtil.init(this.isCheckmark) || this.currConfig?.isCheckmark || null;
        }
        if (changes['isMultiple'] || (changes['config'] && this.isMultiple == null)) {
            this.multiple = BooleanUtil.init(this.isMultiple) || this.currConfig?.isMultiple || null;
        }
        if (changes['isNoIcon'] || (changes['config'] && this.isNoIcon == null)) {
            this.noIcon = BooleanUtil.init(this.isNoIcon) || this.currConfig?.isNoIcon || null;
        }
        if (changes['isNoRipple'] || (changes['config'] && this.isNoRipple == null)) {
            this.noRipple = BooleanUtil.init(this.isNoRipple) || this.currConfig?.isNoRipple || null;
        }
        if (changes['panelClass'] || (changes['config'] && this.panelClass == null)) {
            this.panelClassList = this.panelClass || this.currConfig?.panelClass;
        }
        if (changes['position'] || (changes['config'] && this.position == null)) {
            this.positionList = this.getPositionList(this.position || this.currConfig?.position);
        }
        if (changes['visibleSize'] || (changes['config'] && this.visibleSize == null)) {
            this.visibleSizeVal = this.visibleSize || this.currConfig?.visibleSize || null;
        }
    }
    ngOnInit() {
        super.ngOnInit();
        if (this.backdropClassVal == null) {
            this.backdropClassVal = this.currConfig?.backdropClass || null;
        }
        if (this.checkmark == null) {
            this.checkmark = this.currConfig?.isCheckmark || null;
        }
        if (this.multiple == null) {
            this.multiple = this.currConfig?.isMultiple || null;
        }
        if (this.noAnimation == null) {
            this.noAnimation = this.currConfig?.isNoAnimation || null;
        }
        if (this.noIcon == null) {
            this.noIcon = this.currConfig?.isNoIcon || null;
        }
        if (this.noRipple == null) {
            this.noRipple = this.currConfig?.isNoRipple || null;
        }
        if (this.currConfig?.overlayPanelClass) {
            this.overlayPanelClass = this.currConfig.overlayPanelClass;
        }
        if (this.panelClassList == null) {
            this.panelClassList = this.currConfig?.panelClass;
        }
        if (this.positionList.length === 0) {
            this.positionList = this.getPositionList(this.currConfig?.position);
        }
        if (this.visibleSizeVal == null) {
            this.visibleSizeVal = this.currConfig?.visibleSize || null;
        }
    }
    ngAfterContentInit() {
        // Initialized when the value is received via "writeValue()" but the list of menu items is just now.
        if (this.selectedOptions.length === 0 && this.options.length > 0) {
            const newValue = this.valueData;
            this.valueData = undefined;
            this.value = newValue;
            // If the template is already rendered at the moment, then it is possible that these changes will not be displayed.
            // To solve this problem, we call a redraw via Promise.
            Promise.resolve().then(() => {
                this.changeDetectorRef.markForCheck();
            });
        }
        super.ngAfterContentInit();
    }
    ngAfterViewInit() {
        let maxWidth = Number(getComputedStyle(this.hostRef.nativeElement).getPropertyValue('max-width').replace('px', ''));
        this.maxWidth = !isNaN(maxWidth) ? maxWidth : 0;
        if (this.maxWidth === 0 && BooleanUtil.init(this.wdFull)) {
            maxWidth = Number(getComputedStyle(this.hostRef.nativeElement).getPropertyValue('width').replace('px', ''));
            this.maxWidth = !isNaN(maxWidth) ? maxWidth : 0;
        }
    }
    // ** interface ControlValueAccessor - start **
    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any
    writeValue(value) {
        this.value = value;
        super.writeValue(value);
    }
    setDisabledState(isDisabled) {
        if (this.disabled !== isDisabled) {
            isDisabled ? this.formGroup.disable() : this.formGroup.enable();
            super.setDisabledState(isDisabled);
        }
    }
    // ** interface ControlValueAccessor - finish **
    // ** interface Validator - start **
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    validate(control) {
        let result = null;
        if (this.isEmpty()) {
            if (this.required) {
                result = { ...(result || {}), ...{ required: true } };
            }
        }
        else if (this.multiple) {
            const actualLength = Array.isArray(this.valueData) ? this.valueData.length : 0;
            if (!!this.minLength && 0 < this.minLength && actualLength < this.minLength) {
                result = { ...(result || {}), ...{ minlength: { requiredLength: this.minLength, actualLength } } };
            }
            else if (!!this.maxLength && 0 < this.maxLength && actualLength > this.maxLength) {
                result = { ...(result || {}), ...{ maxlength: { requiredLength: this.maxLength, actualLength } } };
            }
        }
        return (this.errors = result);
    }
    // ** interface Validator - finish **
    // ** interface GlnOptionParent - start **
    optionSelection(optionItem) {
        Promise.resolve().then(() => {
            this.selectionOptionElement(optionItem);
            if (this.isPanelOpen && !this.isFocused) {
                this.isFocused = true;
                this.focus();
            }
            if (!this.multiple) {
                this.close();
            }
        });
    }
    // ** interface GlnOptionParent - finish **
    // ** Public methods **
    trackByOption(index, item) {
        return item.id;
    }
    /** Determine the value of the css variable "frame size". */
    frameSizeChange(event) {
        this.triggerFrameSize = event.frameSizeValue || 0;
        const minWidth = NumberUtil.roundTo100(this.triggerFrameSize * 1.1);
        HtmlElemUtil.setProperty(this.hostRef, CSS_PROP_EL_MIN_WIDTH, NumberUtil.str(minWidth)?.concat('px'));
        HtmlElemUtil.setProperty(this.hostRef, CSS_PROP_EL_MIN_HEIGHT, NumberUtil.str(this.triggerFrameSize)?.concat('px'));
    }
    getPanelClass(list) {
        return list ?? '';
    }
    isEmpty() {
        return Array.isArray(this.valueData) ? this.valueData.length === 0 : this.valueData == null;
    }
    focus() {
        if (!this.disabled && isPlatformBrowser(this.platformId)) {
            this.frameRef.nativeElement.focus();
        }
    }
    doFocus() {
        if (!this.disabled) {
            const isFocusedEmit = !this.isFocused;
            this.isFocused = true;
            if (isFocusedEmit) {
                this.focused.emit();
            }
        }
    }
    // The selection panel cease working in the following cases:
    // (Cases-B1) Panel is close and on the trigger, click the Tab key.
    // (Cases-B2) Panel is open and mouse click within the panel.
    // (Cases-B3) Panel is open and mouse click outside of panel and trigger.
    // (Cases-B4) Panel is open and mouse click outside of panel but on trigger.
    // (Cases-B5) Panel is open and click the Escape key.
    // (Cases-B6) Panel is open and click the Tab key.
    // (Cases-B7) Panel is open and click the Enter key.
    /** Calls the touch callback only when the panel is closed.
     * Otherwise, it will cause a false positive, "blur" on the panel when it is opened.
     */
    doBlur() {
        if (!this.disabled) {
            this.isFocused = false;
            if (!this.isPanelOpen && !this.hasPanelAnimation) {
                // (Cases-B1) Panel is close and on the trigger, click the Tab key.
                this.blured.emit();
            }
            else {
                // (Cases-B2) Panel is open and mouse click within the panel.
                // (Cases-B3) Panel is open and mouse click outside of panel and trigger.
                // (Cases-B4) Panel is open and mouse click outside of panel but on trigger.
                // For case Cases-B3,B4, let's add the "foc" attribute to force the display of focus.
                this.isFocusAttrOnFrame = true;
                HtmlElemUtil.setAttr(this.renderer, this.frameRef, CSS_ATTR_FOR_FRAME_FOCUS, '');
            }
        }
    }
    /** Occurs when a mouse click event occurs outside of the options list pane. */
    backdropClick() {
        if (!this.disabled) {
            // (Cases-B3) Panel is open and mouse click outside of panel and trigger.
            // (Cases-B4) Panel is open and mouse click outside of panel but on trigger.
            this.isFocused = true;
            this.focus();
            this.close();
        }
    }
    /** Occurs when the panel receives input focus. */
    doFocusOnPanel() {
        if (!this.disabled) {
            // (Cases-B2) Panel is open and mouse click within the panel.
            this.isFocused = true;
            this.focus();
        }
    }
    /** Open or close the overlay panel. */
    toggle() {
        if (!this.disabled) {
            if (this.isPanelOpen) {
                this.close();
            }
            else {
                if (!this.isFocused) {
                    this.focus();
                }
                this.open();
            }
        }
    }
    /** Open overlay panel. */
    open() {
        if (!this.disabled && !this.readOnly && !this.isPanelOpen && this.options.length > 0) {
            this.isPanelOpen = true;
            this.hasPanelAnimation = !this.noAnimation;
            this.markedOption = this.selectedOptions.length > 0 ? this.selectedOptions[this.selectedOptions.length - 1] : null;
            this.triggerRect = this.triggerRef.nativeElement.getBoundingClientRect();
            this.isFocusAttrOnFrame = false;
            this.triggerFontSize = Number((getComputedStyle(this.triggerRef.nativeElement).fontSize || '0').replace('px', ''));
            this.changeDetectorRef.markForCheck();
            this.opened.emit();
        }
    }
    /** Closes the overlay panel and focuses the main element. */
    close() {
        if (this.disabled || !this.isPanelOpen) {
            return;
        }
        if (this.isFocusAttrOnFrame) {
            HtmlElemUtil.setAttr(this.renderer, this.frameRef, CSS_ATTR_FOR_FRAME_FOCUS, null);
        }
        this.isPanelOpen = false;
        this.changeDetectorRef.markForCheck();
        this.onTouched();
        this.markedOption?.setMarked(false);
        this.markedOption = null;
        const overlayElement = this.connectedOverlay.overlayRef.overlayElement;
        const selectPanelRef = HtmlElemUtil.getElementRef(overlayElement.children[0]?.children[0]);
        const panelHeight = this.getHeight(selectPanelRef);
        if (panelHeight > 0) {
            const overlayRef = HtmlElemUtil.getElementRef(overlayElement);
            HtmlElemUtil.setProperty(overlayRef, CSS_PROP_TRANSLATE_Y, this.getTranslateY(this.triggerRect, panelHeight, ScreenUtil.getHeight()));
        }
        if (!this.noAnimation) {
            const selectPanelWrapRef = HtmlElemUtil.getElementRef(overlayElement.children[0]);
            // Add an attribute for animation and transformation.
            HtmlElemUtil.setAttr(this.renderer, selectPanelWrapRef, CSS_ATTR_FOR_PANEL_OPENING_ANIMATION, null);
            HtmlElemUtil.setAttr(this.renderer, selectPanelWrapRef, CSS_ATTR_FOR_PANEL_CLOSING_ANIMATION, '');
        }
        this.closed.emit();
    }
    /** Callback when the overlay panel is attached. */
    attach() {
        const overlayElement = this.connectedOverlay.overlayRef.overlayElement;
        // Adding a class so that custom styles can be applied.
        const overlayRef = HtmlElemUtil.getElementRef(overlayElement);
        HtmlElemUtil.setAttr(this.renderer, overlayRef, 'glnspo-select', '');
        const selectPanelRef = HtmlElemUtil.getElementRef(overlayElement.children[0]?.children[0]);
        const panelHeight = this.getHeight(selectPanelRef);
        if (!this.noAnimation && panelHeight > 0) {
            HtmlElemUtil.setProperty(overlayRef, CSS_PROP_TRANSLATE_Y, this.getTranslateY(this.triggerRect, panelHeight, ScreenUtil.getHeight()));
        }
        // Set the font size for the overlay.
        if (this.triggerFontSize > 0) {
            overlayElement.style.fontSize = `${this.triggerFontSize}px`;
        }
        if (this.maxWidth > 0) {
            overlayElement.style.maxWidth = `${this.maxWidth}px`;
        }
        if (this.triggerFrameSize > 0) {
            const borderRadius = NumberUtil.roundTo100(this.triggerFrameSize / 10);
            HtmlElemUtil.setProperty(overlayRef, CSS_PROP_BORDER_RADIUS, NumberUtil.str(borderRadius)?.concat('px'));
        }
        const visibleSize = this.visibleSizeVal ?? 0;
        const maxHeigthSelectPanel = visibleSize > 0 ? this.getOptionHeigth(this.options) * visibleSize : 0;
        if (maxHeigthSelectPanel > 0) {
            HtmlElemUtil.setProperty(overlayRef, CSS_PROP_MAX_HEIGHT, NumberUtil.str(maxHeigthSelectPanel)?.concat('px'));
        }
        // We cannot get the actual sizes and positions of elements if they are affected by a transformation.
        // Therefore, we first get all the data, and then add attributes for animation and transformation.
        if (this.markedOption !== null && selectPanelRef !== null && maxHeigthSelectPanel > 0) {
            const delta = NumberUtil.roundTo100(maxHeigthSelectPanel / 2) - NumberUtil.roundTo100(this.getHeight(this.markedOption.hostRef) / 2);
            const optionRect = this.markedOption.hostRef.nativeElement.getBoundingClientRect();
            const panelRect = selectPanelRef.nativeElement.getBoundingClientRect();
            selectPanelRef.nativeElement.scrollTo(0, optionRect.top - panelRect.top - delta);
        }
        // Important! These operations should be the last, they include animation and the dimensions of the panel are distorted.
        const selectPanelWrapRef = HtmlElemUtil.getElementRef(overlayElement?.children[0]);
        if (this.noAnimation) {
            HtmlElemUtil.setAttr(this.renderer, selectPanelWrapRef, 'noAnm', '');
            HtmlElemUtil.setClass(this.renderer, selectPanelWrapRef, 'gln-no-animation', true);
        }
        else {
            // Add an attribute for animation and transformation.
            HtmlElemUtil.setAttr(this.renderer, selectPanelWrapRef, CSS_ATTR_FOR_PANEL_OPENING_ANIMATION, '');
        }
    }
    /** Handles all keypress events for the component's panel. */
    frameKeydown(event) {
        if (!this.disabled) {
            if (!this.isPanelOpen) {
                // Open the selection panel by pressing the keys: 'up arrow', 'down arrow', 'space' and 'enter'.
                if (['ArrowDown', 'ArrowUp', ' ', 'Enter'].includes(event.key)) {
                    // Prevents the page from scrolling down when pressing space.
                    event.preventDefault();
                    this.open();
                }
            }
            else {
                if (['ArrowDown', 'ArrowUp', ' ', 'Tab'].includes(event.key)) {
                    // Prevents the page from scrolling down when pressing: 'up arrow', 'down arrow', 'space' and 'tab'.
                    event.preventDefault();
                }
                switch (event.key) {
                    // (Cases-B5) Panel is open and click the Escape key.
                    // (Cases-B6) Panel is open and click the Tab key.
                    case 'Escape':
                    case 'Tab':
                        this.close();
                        break;
                    case 'ArrowDown':
                    case 'ArrowUp':
                        // Moving the cursor marker.
                        this.markedOption = this.movingMarkedOption(event.key === 'ArrowDown', this.markedOption);
                        this.changeDetectorRef.markForCheck();
                        break;
                    // (Cases-B7) Panel is open and click the Enter key.
                    case 'Enter':
                        if (this.markedOption != null) {
                            // Selects the element of the current marker.
                            this.selectionOptionElement(this.markedOption);
                            // And if not multiple, then closing the panel.
                            if (!this.multiple) {
                                this.close();
                            }
                        }
                        break;
                }
            }
        }
    }
    /** Processing the option selected by the user. */
    selectionOptionElement(addOption) {
        const newOptions = addOption !== null ? [addOption] : [];
        if (!this.disabled && newOptions.length > 0) {
            const removed = [];
            if (this.multiple) {
                // Which elements of array "this.selectedOptions" are included in array "addOptions".
                removed.push(...ArrayUtil.include(this.selectedOptions, newOptions));
            }
            else {
                // Which elements of array "this.selectedOptions" are not included in array "addOptions".
                removed.push(...ArrayUtil.uninclude(this.selectedOptions, newOptions));
            }
            // Which elements of array "addOptions" are not included in array "this.selectedOptions".
            const added = ArrayUtil.uninclude(newOptions, this.selectedOptions);
            this.updateSelectedOptions(added, removed, true);
        }
    }
    addOption(option) {
        if (option && this.selectedOptions.indexOf(option) === -1) {
            this.updateSelectedOptions([option], [], true);
        }
    }
    deleteOption(option) {
        if (option && this.selectedOptions.indexOf(option) > -1) {
            this.updateSelectedOptions([], [option], true);
        }
    }
    // ** Private API **
    updateSelectedOptions(added, removed, isEmit) {
        this.selectedOptions = this.mergeOptions(this.selectedOptions, added, removed);
        const values = GlnOptionUtil.getValues(this.selectedOptions);
        const value = values.length > 0 ? values[0] : null;
        this.updateValueDataAndIsFilledAndValidity(this.multiple ? values : value);
        this.changeDetectorRef.markForCheck();
        if (isEmit) {
            this.selected.emit({ value: !this.multiple ? value : null, values: this.multiple ? values : [], change: { added, removed } });
        }
        // Update the position once the zone is stable so that the overlay will be fully rendered.
        this.ngZone.onStable.pipe(take(1)).subscribe(() => {
            this.connectedOverlay.overlayRef.updatePosition();
        });
        return values;
    }
    mergeOptions(selected, added, removed) {
        GlnOptionUtil.setSelected(removed, false);
        const currentOptions = ArrayUtil.delete(selected, removed);
        GlnOptionUtil.setSelected(added, true);
        const resultOptions = currentOptions.concat(added);
        return this.options.filter((option) => resultOptions.includes(option));
    }
    getHeight(value) {
        return value ? Number(getComputedStyle(value.nativeElement).getPropertyValue('height').replace('px', '')) : 0;
    }
    /** Define the "TranslateY" parameter to correctly open or close. */
    getTranslateY(triggerRect, panelHeight, screenHeight) {
        let result = null;
        if (panelHeight > 0 && !!triggerRect && triggerRect.top > 0 && triggerRect.height > 0 && screenHeight > 0) {
            const value = triggerRect.top + triggerRect.height + panelHeight;
            const delta = String(NumberUtil.roundTo100((panelHeight - 0.6 * panelHeight) / 2)).concat('px');
            result = (value < screenHeight ? '-' : '') + delta;
        }
        return result;
    }
    /** Update the data value, the sign of fullness and perform validation. */
    updateValueDataAndIsFilledAndValidity(newValueData) {
        this.valueData = newValueData;
        this.isFilled = !this.isEmpty() && this.selectedOptions.length > 0;
        // Calling the validation method for the new value.
        this.onChange(this.valueData);
    }
    /** Move the marked option to the next or previous one. */
    movingMarkedOption(isNext, markedOption) {
        let result = null;
        if (this.options.length > 0) {
            let indexOld = -1;
            if (markedOption != null) {
                indexOld = this.options.indexOf(markedOption);
                markedOption.setMarked(false);
            }
            const maxIndex = this.options.length - 1;
            const index = isNext ? (indexOld < maxIndex ? indexOld + 1 : 0) : indexOld > 0 ? indexOld - 1 : maxIndex;
            result = this.options[index];
            result.setMarked(true);
        }
        return result;
    }
    /** Get the height of the option. */
    getOptionHeigth(options) {
        const value = [];
        const count = [];
        let countByIndex = -1;
        let resultIndex = -1;
        for (let i = 0; i < options.length && countByIndex < 4; i++) {
            const height = this.getHeight(options[i].hostRef);
            let index = value.indexOf(height);
            if (index === -1) {
                value.push(height);
                count.push(1);
                index = value.length - 1;
            }
            else {
                count[index]++;
            }
            if (count[index] > countByIndex) {
                countByIndex = count[index];
                resultIndex = index;
            }
        }
        return resultIndex > -1 ? value[resultIndex] : 0;
    }
    getPosition(value) {
        return (value && ['start', 'center', 'end'].indexOf(value) > -1 ? value : 'start');
    }
    getPositionList(position) {
        const horizontalAlignment = this.getPosition(position || null);
        return [
            { originX: horizontalAlignment, originY: 'bottom', overlayX: horizontalAlignment, overlayY: 'top' },
            { originX: horizontalAlignment, originY: 'top', overlayX: horizontalAlignment, overlayY: 'bottom', offsetY: -5 },
        ];
    }
}
GlnSelectComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.1.2", ngImport: i0, type: GlnSelectComponent, deps: [{ token: i0.ElementRef }, { token: i0.Renderer2 }, { token: i0.ChangeDetectorRef }, { token: PLATFORM_ID }, { token: GLN_SELECT_CONFIG, optional: true }, { token: GLN_SELECT_SCROLL_STRATEGY, optional: true }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Component });
GlnSelectComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.1.2", type: GlnSelectComponent, selector: "gln-select", inputs: { config: "config", exterior: "exterior", frameSize: "frameSize", helperText: "helperText", isCheckmark: "isCheckmark", isMultiple: "isMultiple", isNoIcon: "isNoIcon", isNoRipple: "isNoRipple", label: "label", maxLength: "maxLength", minLength: "minLength", ornamLfAlign: "ornamLfAlign", ornamRgAlign: "ornamRgAlign", panelClass: "panelClass", position: "position", visibleSize: "visibleSize", tabIndex: "tabIndex", wdFull: "wdFull", value: "value" }, outputs: { focused: "focused", blured: "blured", opened: "opened", closed: "closed", selected: "selected" }, providers: [
        { provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => GlnSelectComponent), multi: true },
        { provide: NG_VALIDATORS, useExisting: forwardRef(() => GlnSelectComponent), multi: true },
        { provide: GLN_NODE_INTERNAL_VALIDATOR, useExisting: GlnSelectComponent },
        { provide: GLN_OPTION_PARENT, useExisting: GlnSelectComponent },
    ], queries: [{ propertyName: "customTrigger", first: true, predicate: GLN_SELECT_TRIGGER, descendants: true }, { propertyName: "optionList", predicate: GlnOptionComponent, descendants: true }], viewQueries: [{ propertyName: "connectedOverlay", first: true, predicate: CdkConnectedOverlay, descendants: true }, { propertyName: "frameRef", first: true, predicate: ["frameRef"], descendants: true, read: ElementRef, static: true }, { propertyName: "triggerRef", first: true, predicate: ["triggerRef"], descendants: true, static: true }], exportAs: ["glnSelect"], usesInheritance: true, usesOnChanges: true, ngImport: i0, template: "<ng-container [formGroup]=\"formGroup\">\n  <div glnsl-wrap\n    class=\"glnsl-wrap\"\n    [glnFrameExteriorInput]=\"exterior || currConfig?.exterior\"\n    #glnFrameExteriorInput=\"glnFrameExteriorInput\"\n    [glnFrameExteriorInputElementRef]=\"hostRef\"\n    (glnFrameExteriorInputChange)=\"glnFrameSize.updatePaddingVerAndHor()\"\n    cdkOverlayOrigin\n    #origin=\"cdkOverlayOrigin\"\n    #triggerRef\n    (click)=\"!disabled ? toggle() : null\">\n    <gln-frame #frameRef\n      [ngClass]=\"[(isPanelOpen ? 'is-open' : '')]\"\n      [config]=\"currConfig\"\n      [exterior]=\"glnFrameExteriorInput.exterior\"\n      [isDisabled]=\"disabled\"\n      [isError]=\"!!errors || error\"\n      [isFilled]=\"isFilled\"\n      [isLabelShrink]=\"labelShrink || currConfig?.isLabelShrink\"\n      [isNoAnimation]=\"noAnimation || currConfig?.isNoAnimation || isWriteValueInit\"\n      [isNoLabel]=\"noLabel || currConfig?.isNoLabel\"\n      [isRequired]=\"required\"\n      [label]=\"label\"\n      [glnFrameSize]=\"frameSize || currConfig?.frameSize\"\n      #glnFrameSize=\"glnFrameSize\"\n      [glnFrameSizeElementRef]=\"hostRef\"\n      [glnFrameSizeValue]=\"currConfig?.frameSizeValue || frameSizeDefault\"\n      [glnFrameSizeLabelPd]=\"currConfig?.labelPd\"\n      [glnFrameSizePrepare]=\"glnFrameExteriorInput\"\n      (glnFrameSizeChange)=\"frameSizeChange($event)\"\n      glnFrameOrnament\n      [glnFrameOrnamentLfAlign]=\"ornamLfAlign || currConfig?.ornamLfAlign\"\n      [glnFrameOrnamentRgAlign]=\"ornamRgAlign || currConfig?.ornamRgAlign\"\n      [glnFrameOrnamentPath]=\"'/div{0}'\"\n      [attr.opn]=\"isPanelOpen ? '' : null\"\n      [attr.tabindex]=\"!disabled ? tabIndex : null\"\n      (focus)=\"doFocus()\"\n      (blur)=\"doBlur()\"\n      (keydown)=\"frameKeydown($event)\">\n\n      <span glnfr-orn-lf\n        class=\"gln-ornam-lf\">\n        <ng-content select=\"[gln-orn-lf]\"></ng-content>\n      </span>\n\n      <span glnfr-orn-rg\n        class=\"gln-ornam-rg\">\n        <ng-content select=\"[gln-orn-rg]\"></ng-content>\n\n        <div *ngIf=\"!getBoolean(isNoIcon) && !currConfig?.isNoIcon\"\n          glnsl-rhomb\n          [attr.opn]=\"isPanelOpen ? '' : null\"\n          [attr.noAnm]=\"noAnimation ? '' : null\"\n          [ngClass]=\"['glnsl-rhomb', (isPanelOpen ? 'is-open' : '')]\"\n          focusable=\"false\"\n          aria-hidden=\"true\">\n        </div>\n      </span>\n\n      <div [ngClass]=\"[(readOnly ? 'gln-readonly' : '')]\"\n        glnfr-pd-ver\n        glnfr-pd-hor\n        glnfr-elem\n        [attr.id]=\"id + '-elem'\">\n\n        <ng-container [ngSwitch]=\"isFilled\">\n          <div *ngSwitchCase=\"false\">&ZeroWidthSpace;</div>\n\n          <ng-container *ngSwitchCase=\"true\"\n            [ngSwitch]=\"!!customTrigger\">\n\n            <ng-content *ngSwitchCase=\"true\"\n              select=\"gln-select-trigger\">\n            </ng-content>\n\n            <ng-container *ngSwitchCase=\"false\">\n              <ng-container\n                *ngFor=\"let option of selectedOptions; count as countVal; last as isLast; trackBy: trackByOption;\">\n                <span [innerHTML]=\"option.getTrustHtml()\"></span>\n                <span *ngIf=\"countVal > 1 && !isLast\">, </span>\n              </ng-container>\n            </ng-container>\n\n          </ng-container>\n        </ng-container>\n      </div>\n\n    </gln-frame>\n  </div>\n</ng-container>\n\n<gln-hint-or-error *ngIf=\"!!helperText\"\n  [text]=\"helperText\"\n  [isError]=\"!!errors || error\"\n  [isFocused]=\"isFocused\"\n  [isDisabled]=\"disabled\">\n</gln-hint-or-error>\n\n<ng-template cdkConnectedOverlay\n  [cdkConnectedOverlayBackdropClass]=\"backdropClassVal || 'cdk-overlay-transparent-backdrop'\"\n  cdkConnectedOverlayHasBackdrop\n  [cdkConnectedOverlayDisableClose]=\"true\"\n  cdkConnectedOverlayLockPosition\n  [cdkConnectedOverlayMinWidth]=\"triggerRect?.width!\"\n  [cdkConnectedOverlayOpen]=\"isPanelOpen || hasPanelAnimation\"\n  [cdkConnectedOverlayOrigin]=\"origin\"\n  [cdkConnectedOverlayPanelClass]=\"overlayPanelClass\"\n  [cdkConnectedOverlayPositions]=\"positionList\"\n  [cdkConnectedOverlayScrollStrategy]=\"scrollStrategy\"\n  (backdropClick)=\"backdropClick()\"\n  (attach)=\"attach()\"\n  (detach)=\"isPanelOpen ? close() : null\">\n\n  <div glnslp-wrap\n    class=\"gln-select-panel-wrap\"\n    [ngClass]=\"[(noAnimation ? 'gln-no-animation' : '')]\"\n    [attr.noAnm]=\"noAnimation ? '' : null\"\n    (animationend)=\"hasPanelAnimation = isPanelOpen\"\n    (animationcancel)=\"hasPanelAnimation = isPanelOpen\">\n    <div glnsl-panel\n      class=\"gln-select-panel\"\n      [ngClass]=\"getPanelClass(panelClassList)\"\n      role=\"listbox\"\n      [attr.id]=\"id + '-panel'\"\n      [attr.aria-multiselectable]=\"multiple\"\n      (focus)=\"doFocusOnPanel()\">\n      <ng-content select=\":not(gln-select-trigger)\"></ng-content>\n    </div>\n  </div>\n\n</ng-template>", styles: ["gln-select{--glnsl--default-h: var(--glncl-default-h, var(--gln-default-h));--glnsl--default-s: var(--glncl-default-s, var(--gln-default-s));display:inline-flex;flex-direction:column;min-width:var(--glnsl-min-width, var(--glnsl-el-min-width, 50px))}gln-select[wdFull]{width:100%}gln-select[wdFull] gln-frame>div>[glnfr-elem]{width:100%}gln-select gln-frame{--glnsl--default46: hsl(var(--glnsl--default-h), var(--glnsl--default-s), 46%);--glnsl--primary46: hsl(var(--glnsl--primary-h), var(--glnsl--primary-s), 46%);--glnsl--danger51: hsl(var(--glnsl--danger-h), var(--glnsl--danger-s), 51%);--glnsl--default74: hsl(var(--glnsl--default-h), var(--glnsl--default-s), 74%)}gln-select gln-frame:focus-visible{outline:none}gln-select gln-frame:not([opn]):not([dis]){cursor:pointer}gln-select gln-frame:not([dis])[hfc]{--glnslr-hover-focus-color: var(--glnsl--primary46)}gln-select gln-frame:not([dis]):not([err]):not(:hover):not(:focus-within):not([foc]){--glnsl-rhomb-cl: var(--glnsl-rhomb-def, var(--glnsl--default46))}gln-select gln-frame:not([dis]):not([err]):hover:not(:focus-within):not([foc]){--glnsl-rhomb-cl: var(--glnsl-rhomb-hov, var(--glnslr-hover-focus-color, var(--glnsl--default46)))}gln-select gln-frame:not([dis]):not([err]):focus-within,gln-select gln-frame:not([dis]):not([err])[foc]{--glnsl-rhomb-cl: var(--glnsl-rhomb-foc, var(--glnsl--primary46))}gln-select gln-frame:not([dis])[err]{--glnsl-rhomb-cl: var(--glnsl-rhomb-err, var(--glnsl--danger51))}gln-select gln-frame[dis]{--glnsl-rhomb-cl: var(--glnsl-rhomb-dis, var(--glnsl--default74))}gln-select gln-frame>div>[glnfr-orn-rg]>[glnsl-rhomb]{align-items:center;color:var(--glnsl-rhomb-cl);display:flex;height:1em;-webkit-user-select:none;user-select:none}gln-select gln-frame>div>[glnfr-orn-rg]>[glnsl-rhomb]:after{border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;content:\" \";height:0;margin:0 .375em;width:0}gln-select gln-frame>div>[glnfr-orn-rg]>[glnsl-rhomb]:not([noAnm]):after{transition:transform .3s linear 0ms}gln-select gln-frame>div>[glnfr-orn-rg]>[glnsl-rhomb][opn]:after{transform:rotate(180deg)}gln-select gln-frame:not([ext-s])>div>[glnfr-orn-rg]>[glnsl-rhomb]{padding-right:.375em}gln-select gln-frame>div>[glnfr-elem]{background:none;border:0;box-sizing:border-box;color:currentColor;display:block;font:inherit;margin:0;min-height:var(--glnsl-el-min-height, unset);-webkit-tap-highlight-color:transparent;min-width:0;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;user-select:none;white-space:nowrap}gln-select>[glnsl-wrap]{position:relative}gln-select gln-hint-or-error{padding-left:var(--glnsl-he-pd-lf, var(--glnfrs-pd-lf));padding-right:var(--glnsl-he-pd-rg, var(--glnfrs-pd-rg))}.gln-select-panel-wrap{background-color:var(--glnslpw-def-bg-cl, var(--gln-default-bg-cl));color:var(--glnslpw-def-cl, hsl(var(--gln-default-h), var(--gln-default-s), 17%));flex-basis:100%;font-size:inherit;max-width:inherit}.gln-select-panel-wrap:not([noAnm]){opacity:0}.gln-select-panel-wrap:not([noAnm])[is-open]:not([is-hide]){animation:kf-open-panel .2s cubic-bezier(.2,0,.2,1) 0ms;opacity:1}.gln-select-panel-wrap:not([noAnm]):not([is-open])[is-hide]{animation:kf-close-panel .2s linear 0ms;opacity:0}@keyframes kf-open-panel{0%{opacity:0;transform:translateY(var(--glnslpo-translate-y, 0px)) scale(.6)}to{opacity:1;transform:none}}@keyframes kf-close-panel{0%{opacity:1;transform:none}to{opacity:0;transform:translateY(var(--glnslpo-translate-y, 0px)) scale(.6)}}.gln-select-panel{border-radius:var(--glnslpo-border-radius, unset);box-sizing:border-box;max-height:var(--glnslpo-max-height, 100%);min-height:16px;min-width:16px;overflow:auto;outline:0;-webkit-overflow-scrolling:touch;box-shadow:var(--glnslpo-elevation, rgba(0, 0, 0, .2) 0px 5px 5px -3px, rgba(0, 0, 0, .14) 0px 8px 10px 1px, rgba(0, 0, 0, .12) 0px 3px 14px 2px)}\n"], dependencies: [{ kind: "directive", type: i1.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i1.NgSwitch, selector: "[ngSwitch]", inputs: ["ngSwitch"] }, { kind: "directive", type: i1.NgSwitchCase, selector: "[ngSwitchCase]", inputs: ["ngSwitchCase"] }, { kind: "directive", type: i2.CdkConnectedOverlay, selector: "[cdk-connected-overlay], [connected-overlay], [cdkConnectedOverlay]", inputs: ["cdkConnectedOverlayOrigin", "cdkConnectedOverlayPositions", "cdkConnectedOverlayPositionStrategy", "cdkConnectedOverlayOffsetX", "cdkConnectedOverlayOffsetY", "cdkConnectedOverlayWidth", "cdkConnectedOverlayHeight", "cdkConnectedOverlayMinWidth", "cdkConnectedOverlayMinHeight", "cdkConnectedOverlayBackdropClass", "cdkConnectedOverlayPanelClass", "cdkConnectedOverlayViewportMargin", "cdkConnectedOverlayScrollStrategy", "cdkConnectedOverlayOpen", "cdkConnectedOverlayDisableClose", "cdkConnectedOverlayTransformOriginOn", "cdkConnectedOverlayHasBackdrop", "cdkConnectedOverlayLockPosition", "cdkConnectedOverlayFlexibleDimensions", "cdkConnectedOverlayGrowAfterOpen", "cdkConnectedOverlayPush"], outputs: ["backdropClick", "positionChange", "attach", "detach", "overlayKeydown", "overlayOutsideClick"], exportAs: ["cdkConnectedOverlay"] }, { kind: "directive", type: i2.CdkOverlayOrigin, selector: "[cdk-overlay-origin], [overlay-origin], [cdkOverlayOrigin]", exportAs: ["cdkOverlayOrigin"] }, { kind: "directive", type: i3.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i3.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "directive", type: i4.GlnFrameExteriorInputDirective, selector: "[glnFrameExteriorInput]", inputs: ["glnFrameExteriorInput", "glnFrameExteriorInputElementRef"], outputs: ["glnFrameExteriorInputChange"], exportAs: ["glnFrameExteriorInput"] }, { kind: "component", type: i5.GlnFrameComponent, selector: "gln-frame", inputs: ["config", "exterior", "isDisabled", "isError", "isFilled", "isLabelShrink", "isNoAnimation", "isNoLabel", "isRequired", "label"], exportAs: ["glnFrame"] }, { kind: "directive", type: i6.GlnFrameOrnamentDirective, selector: "[glnFrameOrnament]", inputs: ["glnFrameOrnamentLfAlign", "glnFrameOrnamentRgAlign", "glnFrameOrnamentElementRef", "glnFrameOrnamentPath", "glnFrameOrnamentAfterContent"], exportAs: ["glnFrameOrnament"] }, { kind: "directive", type: i7.GlnFrameSizeDirective, selector: "[glnFrameSize]", inputs: ["glnFrameSize", "glnFrameSizeValue", "glnFrameSizeLabelPd", "glnFrameSizeElementRef", "glnFrameSizePrepare", "glnFrameSizeModify"], outputs: ["glnFrameSizeChange"], exportAs: ["glnFrameSize"] }, { kind: "component", type: i8.GlnHintOrErrorComponent, selector: "gln-hint-or-error", inputs: ["text", "isError", "isFocused", "isDisabled"], exportAs: ["glnHintOrError"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.1.2", ngImport: i0, type: GlnSelectComponent, decorators: [{
            type: Component,
            args: [{ selector: 'gln-select', exportAs: 'glnSelect', encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, providers: [
                        { provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => GlnSelectComponent), multi: true },
                        { provide: NG_VALIDATORS, useExisting: forwardRef(() => GlnSelectComponent), multi: true },
                        { provide: GLN_NODE_INTERNAL_VALIDATOR, useExisting: GlnSelectComponent },
                        { provide: GLN_OPTION_PARENT, useExisting: GlnSelectComponent },
                    ], template: "<ng-container [formGroup]=\"formGroup\">\n  <div glnsl-wrap\n    class=\"glnsl-wrap\"\n    [glnFrameExteriorInput]=\"exterior || currConfig?.exterior\"\n    #glnFrameExteriorInput=\"glnFrameExteriorInput\"\n    [glnFrameExteriorInputElementRef]=\"hostRef\"\n    (glnFrameExteriorInputChange)=\"glnFrameSize.updatePaddingVerAndHor()\"\n    cdkOverlayOrigin\n    #origin=\"cdkOverlayOrigin\"\n    #triggerRef\n    (click)=\"!disabled ? toggle() : null\">\n    <gln-frame #frameRef\n      [ngClass]=\"[(isPanelOpen ? 'is-open' : '')]\"\n      [config]=\"currConfig\"\n      [exterior]=\"glnFrameExteriorInput.exterior\"\n      [isDisabled]=\"disabled\"\n      [isError]=\"!!errors || error\"\n      [isFilled]=\"isFilled\"\n      [isLabelShrink]=\"labelShrink || currConfig?.isLabelShrink\"\n      [isNoAnimation]=\"noAnimation || currConfig?.isNoAnimation || isWriteValueInit\"\n      [isNoLabel]=\"noLabel || currConfig?.isNoLabel\"\n      [isRequired]=\"required\"\n      [label]=\"label\"\n      [glnFrameSize]=\"frameSize || currConfig?.frameSize\"\n      #glnFrameSize=\"glnFrameSize\"\n      [glnFrameSizeElementRef]=\"hostRef\"\n      [glnFrameSizeValue]=\"currConfig?.frameSizeValue || frameSizeDefault\"\n      [glnFrameSizeLabelPd]=\"currConfig?.labelPd\"\n      [glnFrameSizePrepare]=\"glnFrameExteriorInput\"\n      (glnFrameSizeChange)=\"frameSizeChange($event)\"\n      glnFrameOrnament\n      [glnFrameOrnamentLfAlign]=\"ornamLfAlign || currConfig?.ornamLfAlign\"\n      [glnFrameOrnamentRgAlign]=\"ornamRgAlign || currConfig?.ornamRgAlign\"\n      [glnFrameOrnamentPath]=\"'/div{0}'\"\n      [attr.opn]=\"isPanelOpen ? '' : null\"\n      [attr.tabindex]=\"!disabled ? tabIndex : null\"\n      (focus)=\"doFocus()\"\n      (blur)=\"doBlur()\"\n      (keydown)=\"frameKeydown($event)\">\n\n      <span glnfr-orn-lf\n        class=\"gln-ornam-lf\">\n        <ng-content select=\"[gln-orn-lf]\"></ng-content>\n      </span>\n\n      <span glnfr-orn-rg\n        class=\"gln-ornam-rg\">\n        <ng-content select=\"[gln-orn-rg]\"></ng-content>\n\n        <div *ngIf=\"!getBoolean(isNoIcon) && !currConfig?.isNoIcon\"\n          glnsl-rhomb\n          [attr.opn]=\"isPanelOpen ? '' : null\"\n          [attr.noAnm]=\"noAnimation ? '' : null\"\n          [ngClass]=\"['glnsl-rhomb', (isPanelOpen ? 'is-open' : '')]\"\n          focusable=\"false\"\n          aria-hidden=\"true\">\n        </div>\n      </span>\n\n      <div [ngClass]=\"[(readOnly ? 'gln-readonly' : '')]\"\n        glnfr-pd-ver\n        glnfr-pd-hor\n        glnfr-elem\n        [attr.id]=\"id + '-elem'\">\n\n        <ng-container [ngSwitch]=\"isFilled\">\n          <div *ngSwitchCase=\"false\">&ZeroWidthSpace;</div>\n\n          <ng-container *ngSwitchCase=\"true\"\n            [ngSwitch]=\"!!customTrigger\">\n\n            <ng-content *ngSwitchCase=\"true\"\n              select=\"gln-select-trigger\">\n            </ng-content>\n\n            <ng-container *ngSwitchCase=\"false\">\n              <ng-container\n                *ngFor=\"let option of selectedOptions; count as countVal; last as isLast; trackBy: trackByOption;\">\n                <span [innerHTML]=\"option.getTrustHtml()\"></span>\n                <span *ngIf=\"countVal > 1 && !isLast\">, </span>\n              </ng-container>\n            </ng-container>\n\n          </ng-container>\n        </ng-container>\n      </div>\n\n    </gln-frame>\n  </div>\n</ng-container>\n\n<gln-hint-or-error *ngIf=\"!!helperText\"\n  [text]=\"helperText\"\n  [isError]=\"!!errors || error\"\n  [isFocused]=\"isFocused\"\n  [isDisabled]=\"disabled\">\n</gln-hint-or-error>\n\n<ng-template cdkConnectedOverlay\n  [cdkConnectedOverlayBackdropClass]=\"backdropClassVal || 'cdk-overlay-transparent-backdrop'\"\n  cdkConnectedOverlayHasBackdrop\n  [cdkConnectedOverlayDisableClose]=\"true\"\n  cdkConnectedOverlayLockPosition\n  [cdkConnectedOverlayMinWidth]=\"triggerRect?.width!\"\n  [cdkConnectedOverlayOpen]=\"isPanelOpen || hasPanelAnimation\"\n  [cdkConnectedOverlayOrigin]=\"origin\"\n  [cdkConnectedOverlayPanelClass]=\"overlayPanelClass\"\n  [cdkConnectedOverlayPositions]=\"positionList\"\n  [cdkConnectedOverlayScrollStrategy]=\"scrollStrategy\"\n  (backdropClick)=\"backdropClick()\"\n  (attach)=\"attach()\"\n  (detach)=\"isPanelOpen ? close() : null\">\n\n  <div glnslp-wrap\n    class=\"gln-select-panel-wrap\"\n    [ngClass]=\"[(noAnimation ? 'gln-no-animation' : '')]\"\n    [attr.noAnm]=\"noAnimation ? '' : null\"\n    (animationend)=\"hasPanelAnimation = isPanelOpen\"\n    (animationcancel)=\"hasPanelAnimation = isPanelOpen\">\n    <div glnsl-panel\n      class=\"gln-select-panel\"\n      [ngClass]=\"getPanelClass(panelClassList)\"\n      role=\"listbox\"\n      [attr.id]=\"id + '-panel'\"\n      [attr.aria-multiselectable]=\"multiple\"\n      (focus)=\"doFocusOnPanel()\">\n      <ng-content select=\":not(gln-select-trigger)\"></ng-content>\n    </div>\n  </div>\n\n</ng-template>", styles: ["gln-select{--glnsl--default-h: var(--glncl-default-h, var(--gln-default-h));--glnsl--default-s: var(--glncl-default-s, var(--gln-default-s));display:inline-flex;flex-direction:column;min-width:var(--glnsl-min-width, var(--glnsl-el-min-width, 50px))}gln-select[wdFull]{width:100%}gln-select[wdFull] gln-frame>div>[glnfr-elem]{width:100%}gln-select gln-frame{--glnsl--default46: hsl(var(--glnsl--default-h), var(--glnsl--default-s), 46%);--glnsl--primary46: hsl(var(--glnsl--primary-h), var(--glnsl--primary-s), 46%);--glnsl--danger51: hsl(var(--glnsl--danger-h), var(--glnsl--danger-s), 51%);--glnsl--default74: hsl(var(--glnsl--default-h), var(--glnsl--default-s), 74%)}gln-select gln-frame:focus-visible{outline:none}gln-select gln-frame:not([opn]):not([dis]){cursor:pointer}gln-select gln-frame:not([dis])[hfc]{--glnslr-hover-focus-color: var(--glnsl--primary46)}gln-select gln-frame:not([dis]):not([err]):not(:hover):not(:focus-within):not([foc]){--glnsl-rhomb-cl: var(--glnsl-rhomb-def, var(--glnsl--default46))}gln-select gln-frame:not([dis]):not([err]):hover:not(:focus-within):not([foc]){--glnsl-rhomb-cl: var(--glnsl-rhomb-hov, var(--glnslr-hover-focus-color, var(--glnsl--default46)))}gln-select gln-frame:not([dis]):not([err]):focus-within,gln-select gln-frame:not([dis]):not([err])[foc]{--glnsl-rhomb-cl: var(--glnsl-rhomb-foc, var(--glnsl--primary46))}gln-select gln-frame:not([dis])[err]{--glnsl-rhomb-cl: var(--glnsl-rhomb-err, var(--glnsl--danger51))}gln-select gln-frame[dis]{--glnsl-rhomb-cl: var(--glnsl-rhomb-dis, var(--glnsl--default74))}gln-select gln-frame>div>[glnfr-orn-rg]>[glnsl-rhomb]{align-items:center;color:var(--glnsl-rhomb-cl);display:flex;height:1em;-webkit-user-select:none;user-select:none}gln-select gln-frame>div>[glnfr-orn-rg]>[glnsl-rhomb]:after{border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;content:\" \";height:0;margin:0 .375em;width:0}gln-select gln-frame>div>[glnfr-orn-rg]>[glnsl-rhomb]:not([noAnm]):after{transition:transform .3s linear 0ms}gln-select gln-frame>div>[glnfr-orn-rg]>[glnsl-rhomb][opn]:after{transform:rotate(180deg)}gln-select gln-frame:not([ext-s])>div>[glnfr-orn-rg]>[glnsl-rhomb]{padding-right:.375em}gln-select gln-frame>div>[glnfr-elem]{background:none;border:0;box-sizing:border-box;color:currentColor;display:block;font:inherit;margin:0;min-height:var(--glnsl-el-min-height, unset);-webkit-tap-highlight-color:transparent;min-width:0;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;user-select:none;white-space:nowrap}gln-select>[glnsl-wrap]{position:relative}gln-select gln-hint-or-error{padding-left:var(--glnsl-he-pd-lf, var(--glnfrs-pd-lf));padding-right:var(--glnsl-he-pd-rg, var(--glnfrs-pd-rg))}.gln-select-panel-wrap{background-color:var(--glnslpw-def-bg-cl, var(--gln-default-bg-cl));color:var(--glnslpw-def-cl, hsl(var(--gln-default-h), var(--gln-default-s), 17%));flex-basis:100%;font-size:inherit;max-width:inherit}.gln-select-panel-wrap:not([noAnm]){opacity:0}.gln-select-panel-wrap:not([noAnm])[is-open]:not([is-hide]){animation:kf-open-panel .2s cubic-bezier(.2,0,.2,1) 0ms;opacity:1}.gln-select-panel-wrap:not([noAnm]):not([is-open])[is-hide]{animation:kf-close-panel .2s linear 0ms;opacity:0}@keyframes kf-open-panel{0%{opacity:0;transform:translateY(var(--glnslpo-translate-y, 0px)) scale(.6)}to{opacity:1;transform:none}}@keyframes kf-close-panel{0%{opacity:1;transform:none}to{opacity:0;transform:translateY(var(--glnslpo-translate-y, 0px)) scale(.6)}}.gln-select-panel{border-radius:var(--glnslpo-border-radius, unset);box-sizing:border-box;max-height:var(--glnslpo-max-height, 100%);min-height:16px;min-width:16px;overflow:auto;outline:0;-webkit-overflow-scrolling:touch;box-shadow:var(--glnslpo-elevation, rgba(0, 0, 0, .2) 0px 5px 5px -3px, rgba(0, 0, 0, .14) 0px 8px 10px 1px, rgba(0, 0, 0, .12) 0px 3px 14px 2px)}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.Renderer2 }, { type: i0.ChangeDetectorRef }, { type: Object, decorators: [{
                    type: Inject,
                    args: [PLATFORM_ID]
                }] }, { type: undefined, decorators: [{
                    type: Optional
                }, {
                    type: Inject,
                    args: [GLN_SELECT_CONFIG]
                }] }, { type: undefined, decorators: [{
                    type: Optional
                }, {
                    type: Inject,
                    args: [GLN_SELECT_SCROLL_STRATEGY]
                }] }, { type: i0.NgZone }]; }, propDecorators: { config: [{
                type: Input
            }], exterior: [{
                type: Input
            }], frameSize: [{
                type: Input
            }], helperText: [{
                type: Input
            }], isCheckmark: [{
                type: Input
            }], isMultiple: [{
                type: Input
            }], isNoIcon: [{
                type: Input
            }], isNoRipple: [{
                type: Input
            }], label: [{
                type: Input
            }], maxLength: [{
                type: Input
            }], minLength: [{
                type: Input
            }], ornamLfAlign: [{
                type: Input
            }], ornamRgAlign: [{
                type: Input
            }], panelClass: [{
                type: Input
            }], position: [{
                type: Input
            }], visibleSize: [{
                type: Input
            }], tabIndex: [{
                type: Input
            }], wdFull: [{
                type: Input
            }], value: [{
                type: Input
            }], focused: [{
                type: Output
            }], blured: [{
                type: Output
            }], opened: [{
                type: Output
            }], closed: [{
                type: Output
            }], selected: [{
                type: Output
            }], connectedOverlay: [{
                type: ViewChild,
                args: [CdkConnectedOverlay]
            }], customTrigger: [{
                type: ContentChild,
                args: [GLN_SELECT_TRIGGER]
            }], frameRef: [{
                type: ViewChild,
                args: ['frameRef', { read: ElementRef, static: true }]
            }], triggerRef: [{
                type: ViewChild,
                args: ['triggerRef', { static: true }]
            }], optionList: [{
                type: ContentChildren,
                args: [GlnOptionComponent, { descendants: true }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2xuLXNlbGVjdC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9nZWxlbml1bS11aS9zcmMvbGliL2dsbi1zZWxlY3QvZ2xuLXNlbGVjdC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9nZWxlbml1bS11aS9zcmMvbGliL2dsbi1zZWxlY3QvZ2xuLXNlbGVjdC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsbUJBQW1CLEVBQThELE1BQU0sc0JBQXNCLENBQUM7QUFDdkgsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDcEQsT0FBTyxFQUdMLHVCQUF1QixFQUV2QixTQUFTLEVBQ1QsWUFBWSxFQUNaLGVBQWUsRUFDZixVQUFVLEVBQ1YsWUFBWSxFQUNaLFVBQVUsRUFDVixNQUFNLEVBQ04sY0FBYyxFQUNkLEtBQUssRUFJTCxRQUFRLEVBQ1IsTUFBTSxFQUNOLFdBQVcsRUFJWCxTQUFTLEVBQ1QsaUJBQWlCLEdBQ2xCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFHTCxXQUFXLEVBQ1gsU0FBUyxFQUNULGFBQWEsRUFDYixpQkFBaUIsR0FHbEIsTUFBTSxnQkFBZ0IsQ0FBQztBQUN4QixPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFHdEMsT0FBTyxFQUFFLDJCQUEyQixFQUFFLE1BQU0sK0RBQStELENBQUM7QUFDNUcsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1DQUFtQyxDQUFDO0FBQ2xFLE9BQU8sRUFBRSxZQUFZLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSx1Q0FBdUMsQ0FBQztBQUN2RixPQUFPLEVBQW1CLGlCQUFpQixFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFDL0YsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFDeEUsT0FB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QUFZLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO2dCQUlsQyxVQUFVO3NCQURoQixlQUFlO3VCQUFDLGtCQUFrQixFQUFFLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENka0Nvbm5lY3RlZE92ZXJsYXksIENvbm5lY3RlZFBvc2l0aW9uLCBIb3Jpem9udGFsQ29ubmVjdGlvblBvcywgU2Nyb2xsU3RyYXRlZ3kgfSBmcm9tICdAYW5ndWxhci9jZGsvb3ZlcmxheSc7XG5pbXBvcnQgeyBpc1BsYXRmb3JtQnJvd3NlciB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQge1xuICBBZnRlckNvbnRlbnRJbml0LFxuICBBZnRlclZpZXdJbml0LFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENvbXBvbmVudCxcbiAgQ29udGVudENoaWxkLFxuICBDb250ZW50Q2hpbGRyZW4sXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgZm9yd2FyZFJlZixcbiAgSW5qZWN0LFxuICBJbmplY3Rpb25Ub2tlbixcbiAgSW5wdXQsXG4gIE5nWm9uZSxcbiAgT25DaGFuZ2VzLFxuICBPbkluaXQsXG4gIE9wdGlvbmFsLFxuICBPdXRwdXQsXG4gIFBMQVRGT1JNX0lELFxuICBRdWVyeUxpc3QsXG4gIFJlbmRlcmVyMixcbiAgU2ltcGxlQ2hhbmdlcyxcbiAgVmlld0NoaWxkLFxuICBWaWV3RW5jYXBzdWxhdGlvbixcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1xuICBBYnN0cmFjdENvbnRyb2wsXG4gIENvbnRyb2xWYWx1ZUFjY2Vzc29yLFxuICBGb3JtQ29udHJvbCxcbiAgRm9ybUdyb3VwLFxuICBOR19WQUxJREFUT1JTLFxuICBOR19WQUxVRV9BQ0NFU1NPUixcbiAgVmFsaWRhdGlvbkVycm9ycyxcbiAgVmFsaWRhdG9yLFxufSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyB0YWtlIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5pbXBvcnQgeyBHbG5GcmFtZVNpemVQYWRkaW5nVmVySG9yUmVzIH0gZnJvbSAnLi4vZGlyZWN0aXZlcy9nbG4tZnJhbWUtc2l6ZS9nbG4tZnJhbWUtc2l6ZS1wcmVwYXJlLmludGVyZmFjZSc7XG5pbXBvcnQgeyBHTE5fTk9ERV9JTlRFUk5BTF9WQUxJREFUT1IgfSBmcm9tICcuLi9kaXJlY3RpdmVzL2dsbi1yZWdleC9nbG4tbm9kZS1pbnRlcm5hbC12YWxpZGF0b3IuaW50ZXJmYWNlJztcbmltcG9ydCB7IEdsbkJhc2lzRnJhbWUgfSBmcm9tICcuLi9fY2xhc3Nlcy9nbG4tYmFzaXMtZnJhbWUuY2xhc3MnO1xuaW1wb3J0IHsgR2xuRnJhbWVTaXplLCBHbG5GcmFtZVNpemVVdGlsIH0gZnJvbSAnLi4vZ2xuLWZyYW1lL2dsbi1mcmFtZS1zaXplLmludGVyZmFjZSc7XG5pbXBvcnQgeyBHbG5PcHRpb25QYXJlbnQsIEdMTl9PUFRJT05fUEFSRU5UIH0gZnJvbSAnLi4vZ2xuLW9wdGlvbi9nbG4tb3B0aW9uLXBhcmVudC5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgR2xuT3B0aW9uQ29tcG9uZW50IH0gZnJvbSAnLi4vZ2xuLW9wdGlvbi9nbG4tb3B0aW9uLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBHbG5PcHRpb25VdGlsIH0gZnJvbSAnLi4vZ2xuLW9wdGlvbi9nbG4tb3B0aW9uLnV0aWwnO1xuaW1wb3J0IHsgQXJyYXlVdGlsIH0gZnJvbSAnLi4vX3V0aWxzL2FycmF5LnV0aWwnO1xuaW1wb3J0IHsgQm9vbGVhblV0aWwgfSBmcm9tICcuLi9fdXRpbHMvYm9vbGVhbi51dGlsJztcbmltcG9ydCB7IEh0bWxFbGVtVXRpbCB9IGZyb20gJy4uL191dGlscy9odG1sLWVsZW0udXRpbCc7XG5pbXBvcnQgeyBOdW1iZXJVdGlsIH0gZnJvbSAnLi4vX3V0aWxzL251bWJlci51dGlsJztcbmltcG9ydCB7IFNjcmVlblV0aWwgfSBmcm9tICcuLi9fdXRpbHMvc2NyZWVuLnV0aWwnO1xuXG5pbXBvcnQgeyBHbG5TZWxlY3RDb25maWcgfSBmcm9tICcuL2dsbi1zZWxlY3QtY29uZmlnLmludGVyZmFjZSc7XG5pbXBvcnQgeyBHTE5fU0VMRUNUX1NDUk9MTF9TVFJBVEVHWSB9IGZyb20gJy4vZ2xuLXNlbGVjdC5wcm92aWRlcnMnO1xuaW1wb3J0IHsgR2xuU2VsZWN0aW9uQ2hhbmdlIH0gZnJvbSAnLi9nbG4tc2VsZWN0aW9uLWNoYW5nZS5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgR2xuU2VsZWN0VHJpZ2dlckRpcmVjdGl2ZSwgR0xOX1NFTEVDVF9UUklHR0VSIH0gZnJvbSAnLi9nbG4tc2VsZWN0LXRyaWdnZXIuZGlyZWN0aXZlJztcblxubGV0IHVuaXF1ZUlkQ291bnRlciA9IDA7XG5cbmV4cG9ydCBjb25zdCBHTE5fU0VMRUNUX0NPTkZJRyA9IG5ldyBJbmplY3Rpb25Ub2tlbjxHbG5TZWxlY3RDb25maWc+KCdHTE5fU0VMRUNUX0NPTkZJRycpO1xuXG5jb25zdCBDU1NfQVRUUl9GT1JfRlJBTUVfRk9DVVMgPSAnZm9jJztcbmNvbnN0IENTU19BVFRSX0ZPUl9QQU5FTF9PUEVOSU5HX0FOSU1BVElPTiA9ICdpcy1vcGVuJztcbmNvbnN0IENTU19BVFRSX0ZPUl9QQU5FTF9DTE9TSU5HX0FOSU1BVElPTiA9ICdpcy1oaWRlJztcbmNvbnN0IENTU19QUk9QX0JPUkRFUl9SQURJVVMgPSAnLS1nbG5zbHBvLWJvcmRlci1yYWRpdXMnO1xuY29uc3QgQ1NTX1BST1BfTUFYX0hFSUdIVCA9ICctLWdsbnNscG8tbWF4LWhlaWdodCc7XG5jb25zdCBDU1NfUFJPUF9FTF9NSU5fV0lEVEggPSAnLS1nbG5zbC1lbC1taW4td2lkdGgnO1xuY29uc3QgQ1NTX1BST1BfRUxfTUlOX0hFSUdIVCA9ICctLWdsbnNsLWVsLW1pbi1oZWlnaHQnO1xuY29uc3QgQ1NTX1BST1BfVFJBTlNMQVRFX1kgPSAnLS1nbG5zbHBvLXRyYW5zbGF0ZS15JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnZ2xuLXNlbGVjdCcsXG4gIGV4cG9ydEFzOiAnZ2xuU2VsZWN0JyxcbiAgdGVtcGxhdGVVcmw6ICcuL2dsbi1zZWxlY3QuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9nbG4tc2VsZWN0LmNvbXBvbmVudC5zY3NzJ10sXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBwcm92aWRlcnM6IFtcbiAgICB7IHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLCB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBHbG5TZWxlY3RDb21wb25lbnQpLCBtdWx0aTogdHJ1ZSB9LFxuICAgIHsgcHJvdmlkZTogTkdfVkFMSURBVE9SUywgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gR2xuU2VsZWN0Q29tcG9uZW50KSwgbXVsdGk6IHRydWUgfSxcbiAgICB7IHByb3ZpZGU6IEdMTl9OT0RFX0lOVEVSTkFMX1ZBTElEQVRPUiwgdXNlRXhpc3Rpbmc6IEdsblNlbGVjdENvbXBvbmVudCB9LFxuICAgIHsgcHJvdmlkZTogR0xOX09QVElPTl9QQVJFTlQsIHVzZUV4aXN0aW5nOiBHbG5TZWxlY3RDb21wb25lbnQgfSxcbiAgXSxcbn0pXG5leHBvcnQgY2xhc3MgR2xuU2VsZWN0Q29tcG9uZW50XG4gIGV4dGVuZHMgR2xuQmFzaXNGcmFtZVxuICBpbXBsZW1lbnRzIE9uQ2hhbmdlcywgT25Jbml0LCBBZnRlckNvbnRlbnRJbml0LCBBZnRlclZpZXdJbml0LCBDb250cm9sVmFsdWVBY2Nlc3NvciwgVmFsaWRhdG9yLCBHbG5PcHRpb25QYXJlbnRcbntcbiAgLy8gQElucHV0KClcbiAgLy8gcHVibGljIGlkID0gYGdsbnNsLSR7dW5pcXVlSWRDb3VudGVyKyt9YDsgLy8gSXMgaW4gR2xuQmFzaXNDb250cm9sLlxuICBASW5wdXQoKVxuICBwdWJsaWMgY29uZmlnOiBHbG5TZWxlY3RDb25maWcgfCBudWxsIHwgdW5kZWZpbmVkOyAvLyAtXG4gIEBJbnB1dCgpXG4gIHB1YmxpYyBleHRlcmlvcjogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDsgLy8gR2xuRnJhbWVFeHRlcmlvclR5cGVcbiAgQElucHV0KClcbiAgcHVibGljIGZyYW1lU2l6ZTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDsgLy8gR2xuRnJhbWVTaXplVHlwZSAvLyAtXG4gIEBJbnB1dCgpXG4gIHB1YmxpYyBoZWxwZXJUZXh0OiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuICBASW5wdXQoKVxuICBwdWJsaWMgaXNDaGVja21hcms6IHN0cmluZyB8IGJvb2xlYW4gfCBudWxsIHwgdW5kZWZpbmVkO1xuICAvLyBASW5wdXQoKVxuICAvLyBwdWJsaWMgaXNEaXNhYmxlZDogc3RyaW5nIHwgYm9vbGVhbiB8IG51bGwgfCB1bmRlZmluZWQ7IC8vIElzIGluIEdsbkJhc2lzQ29udHJvbC5cbiAgLy8gQElucHV0KClcbiAgLy8gcHVibGljIGlzRXJyb3I6IHN0cmluZyB8IGJvb2xlYW4gfCBudWxsIHwgdW5kZWZpbmVkOyAvLyBJcyBpbiBHbG5CYXNpc0NvbnRyb2wuXG4gIC8vIEBJbnB1dCgpXG4gIC8vIHB1YmxpYyBpc0xhYmVsU2hyaW5rOiBzdHJpbmcgfCBib29sZWFuIHwgbnVsbCB8IHVuZGVmaW5lZDsgLy8gSXMgaW4gR2xuQmFzaXNDb250cm9sLlxuICBASW5wdXQoKVxuICBwdWJsaWMgaXNNdWx0aXBsZTogc3RyaW5nIHwgYm9vbGVhbiB8IG51bGwgfCB1bmRlZmluZWQ7XG4gIC8vIEBJbnB1dCgpXG4gIC8vIHB1YmxpYyBpc05vQW5pbWF0aW9uOiBzdHJpbmcgfCBib29sZWFuIHwgbnVsbCB8IHVuZGVmaW5lZDsgLy8gSXMgaW4gR2xuQmFzaXNDb250cm9sLlxuICBASW5wdXQoKVxuICBwdWJsaWMgaXNOb0ljb246IHN0cmluZyB8IGJvb2xlYW4gfCBudWxsIHwgdW5kZWZpbmVkO1xuICAvLyBASW5wdXQoKVxuICAvLyBwdWJsaWMgaXNOb0xhYmVsOiBzdHJpbmcgfCBib29sZWFuIHwgbnVsbCB8IHVuZGVmaW5lZDsgLy8gSXMgaW4gR2xuQmFzaXNDb250cm9sLlxuICBASW5wdXQoKVxuICBwdWJsaWMgaXNOb1JpcHBsZTogc3RyaW5nIHwgYm9vbGVhbiB8IG51bGwgfCB1bmRlZmluZWQ7IC8vIC1cbiAgLy8gQElucHV0KClcbiAgLy8gcHVibGljIGlzUmVhZE9ubHk6IHN0cmluZyB8IGJvb2xlYW4gfCBudWxsIHwgdW5kZWZpbmVkOyAvLyBJcyBpbiBHbG5CYXNpc0NvbnRyb2wuXG4gIC8vIEBJbnB1dCgpXG4gIC8vIHB1YmxpYyBpc1JlcXVpcmVkOiBzdHJpbmcgfCBib29sZWFuIHwgbnVsbCB8IHVuZGVmaW5lZDsgLy8gSXMgaW4gR2xuQmFzaXNDb250cm9sLlxuICAvLyBASW5wdXQoKVxuICAvLyBwdWJsaWMgaXNWYWx1ZUluaXQ6IHN0cmluZyB8IGJvb2xlYW4gfCBudWxsIHwgdW5kZWZpbmVkOyAvLyBJcyBpbiBHbG5CYXNpc0NvbnRyb2wuIC8vflxuICBASW5wdXQoKVxuICBwdWJsaWMgbGFiZWw6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XG4gIEBJbnB1dCgpXG4gIHB1YmxpYyBtYXhMZW5ndGg6IG51bWJlciB8IG51bGwgfCB1bmRlZmluZWQ7XG4gIEBJbnB1dCgpXG4gIHB1YmxpYyBtaW5MZW5ndGg6IG51bWJlciB8IG51bGwgfCB1bmRlZmluZWQ7XG4gIEBJbnB1dCgpXG4gIHB1YmxpYyBvcm5hbUxmQWxpZ246IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7IC8vIE9ybmFtQWxpZ24gLy8gK1xuICBASW5wdXQoKVxuICBwdWJsaWMgb3JuYW1SZ0FsaWduOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkOyAvLyBPcm5hbUFsaWduIC8vICtcbiAgQElucHV0KClcbiAgLyoqIENsYXNzZXMgdG8gYmUgcGFzc2VkIHRvIHRoZSBzZWxlY3QgcGFuZWwuIFN1cHBvcnRzIHRoZSBzYW1lIHN5bnRheCBhcyBgbmdDbGFzc2AuICovXG4gIHB1YmxpYyBwYW5lbENsYXNzOiBzdHJpbmcgfCBzdHJpbmdbXSB8IFNldDxzdHJpbmc+IHwgeyBba2V5OiBzdHJpbmddOiB1bmtub3duIH0gPSAnJzsgLy8gLVxuICBASW5wdXQoKVxuICBwdWJsaWMgcG9zaXRpb246IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7IC8vIEhvcml6b250YWwgcG9zaXRpb24gPSAnc3RhcnQnIHwgJ2NlbnRlcicgfCAnZW5kJztcbiAgQElucHV0KClcbiAgcHVibGljIHZpc2libGVTaXplID0gMDtcbiAgQElucHV0KClcbiAgcHVibGljIHRhYkluZGV4ID0gMDsgLy8gflxuICBASW5wdXQoKVxuICBwdWJsaWMgd2RGdWxsOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG4gIEBJbnB1dCgpXG4gIGdldCB2YWx1ZSgpOiB1bmtub3duIHwgdW5rbm93bltdIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWVEYXRhO1xuICB9XG4gIHNldCB2YWx1ZShuZXdWYWx1ZTogdW5rbm93biB8IHVua25vd25bXSB8IG51bGwpIHtcbiAgICBpZiAodGhpcy5tdWx0aXBsZSAmJiAhQXJyYXkuaXNBcnJheShuZXdWYWx1ZSkpIHtcbiAgICAgIHRocm93IEVycm9yKCdUaGUgdmFsdWUgbXVzdCBiZSBhbiBhcnJheSBpbiBtdWx0aS1zZWxlY3QgbW9kZS4nKTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLm11bHRpcGxlICYmIEFycmF5LmlzQXJyYXkobmV3VmFsdWUpKSB7XG4gICAgICB0aHJvdyBFcnJvcignVGhlIHZhbHVlIG11c3Qgbm90IGJlIGFuIGFycmF5IGluIHNpbmdsZSBzZWxlY3QgbW9kZS4nKTtcbiAgICB9XG4gICAgaWYgKG5ld1ZhbHVlICE9PSB0aGlzLnZhbHVlRGF0YSB8fCAodGhpcy5tdWx0aXBsZSAmJiBBcnJheS5pc0FycmF5KG5ld1ZhbHVlKSkpIHtcbiAgICAgIC8vIEdldCBhIGxpc3Qgb2YgbWVudSBpdGVtcyBhY2NvcmRpbmcgdG8gYW4gYXJyYXkgb2YgdmFsdWVzLlxuICAgICAgY29uc3QgbmV3T3B0aW9ucyA9IEdsbk9wdGlvblV0aWwuZ2V0T3B0aW9uc0J5VmFsdWVzKG5ld1ZhbHVlLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgLy8gV2hpY2ggZWxlbWVudHMgb2YgYXJyYXkgXCJ0aGlzLnNlbGVjdGVkT3B0aW9uc1wiIGFyZSBub3QgaW5jbHVkZWQgaW4gYXJyYXkgXCJuZXdPcHRpb25zXCIuXG4gICAgICBjb25zdCByZW1vdmVkID0gQXJyYXlVdGlsLnVuaW5jbHVkZTxHbG5PcHRpb25Db21wb25lbnQ+KHRoaXMuc2VsZWN0ZWRPcHRpb25zLCBuZXdPcHRpb25zKTtcbiAgICAgIC8vIFdoaWNoIGVsZW1lbnRzIG9mIGFycmF5IFwibmV3T3B0aW9uc1wiIGFyZSBub3QgaW5jbHVkZWQgaW4gYXJyYXkgXCJ0aGlzLnNlbGVjdGVkT3B0aW9uc1wiLlxuICAgICAgY29uc3QgYWRkZWQgPSBBcnJheVV0aWwudW5pbmNsdWRlPEdsbk9wdGlvbkNvbXBvbmVudD4obmV3T3B0aW9ucywgdGhpcy5zZWxlY3RlZE9wdGlvbnMpO1xuXG4gICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyA9IHRoaXMubWVyZ2VPcHRpb25zKHRoaXMuc2VsZWN0ZWRPcHRpb25zLCBhZGRlZCwgcmVtb3ZlZCk7XG4gICAgICB0aGlzLnVwZGF0ZVZhbHVlRGF0YUFuZElzRmlsbGVkQW5kVmFsaWRpdHkobmV3VmFsdWUpO1xuICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gIH1cbiAgcHJpdmF0ZSB2YWx1ZURhdGE6IHVua25vd24gfCB1bmtub3duW10gfCBudWxsO1xuXG4gIEBPdXRwdXQoKVxuICByZWFkb25seSBmb2N1c2VkOiBFdmVudEVtaXR0ZXI8dm9pZD4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBPdXRwdXQoKVxuICByZWFkb25seSBibHVyZWQ6IEV2ZW50RW1pdHRlcjx2b2lkPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpXG4gIHJlYWRvbmx5IG9wZW5lZDogRXZlbnRFbWl0dGVyPHZvaWQ+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KClcbiAgcmVhZG9ubHkgY2xvc2VkOiBFdmVudEVtaXR0ZXI8dm9pZD4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIC8vIEBPdXRwdXQoKVxuICAvLyByZWFkb25seSB3cml0ZVZhbHVlSW5pdDogRXZlbnRFbWl0dGVyPCgpID0+IHZvaWQ+ID0gbmV3IEV2ZW50RW1pdHRlcigpOyAvLyBJcyBpbiBHbG5CYXNpc0NvbnRyb2wuXG4gIEBPdXRwdXQoKVxuICByZWFkb25seSBzZWxlY3RlZDogRXZlbnRFbWl0dGVyPHsgdmFsdWU6IHVua25vd24gfCBudWxsOyB2YWx1ZXM6IHVua25vd25bXTsgY2hhbmdlOiBHbG5TZWxlY3Rpb25DaGFuZ2U8R2xuT3B0aW9uQ29tcG9uZW50PiB9PiA9XG4gICAgbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIC8qKiBPdmVybGF5IHBhbmVsIHdpdGggaXRzIG93biBwYXJhbWV0ZXJzLiAqL1xuICBAVmlld0NoaWxkKENka0Nvbm5lY3RlZE92ZXJsYXkpXG4gIHByb3RlY3RlZCBjb25uZWN0ZWRPdmVybGF5ITogQ2RrQ29ubmVjdGVkT3ZlcmxheTtcbiAgQENvbnRlbnRDaGlsZChHTE5fU0VMRUNUX1RSSUdHRVIpXG4gIHB1YmxpYyBjdXN0b21UcmlnZ2VyOiBHbG5TZWxlY3RUcmlnZ2VyRGlyZWN0aXZlIHwgdW5kZWZpbmVkO1xuICBAVmlld0NoaWxkKCdmcmFtZVJlZicsIHsgcmVhZDogRWxlbWVudFJlZiwgc3RhdGljOiB0cnVlIH0pXG4gIHB1YmxpYyBmcmFtZVJlZiE6IEVsZW1lbnRSZWY8SFRNTEVsZW1lbnQ+O1xuICAvKiogQSB0cmlnZ2VyIHRoYXQgb3BlbnMgYSBkcm9wZG93biBsaXN0IG9mIG9wdGlvbnMuICovXG4gIEBWaWV3Q2hpbGQoJ3RyaWdnZXJSZWYnLCB7IHN0YXRpYzogdHJ1ZSB9KVxuICBwdWJsaWMgdHJpZ2dlclJlZiE6IEVsZW1lbnRSZWY8SFRNTEVsZW1lbnQ+O1xuICAvKiogTGlzdCBvZiBwb3NzaWJsZSBvcHRpb25zLiAqL1xuICBAQ29udGVudENoaWxkcmVuKEdsbk9wdGlvbkNvbXBvbmVudCwgeyBkZXNjZW5kYW50czogdHJ1ZSB9KVxuICBwdWJsaWMgb3B0aW9uTGlzdCE6IFF1ZXJ5TGlzdDxHbG5PcHRpb25Db21wb25lbnQ+O1xuXG4gIHB1YmxpYyBnZXQgb3B0aW9ucygpOiBHbG5PcHRpb25Db21wb25lbnRbXSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9uTGlzdD8udG9BcnJheSgpIHx8IFtdO1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cbiAgcHVibGljIHNldCBvcHRpb25zKHZhbHVlOiBHbG5PcHRpb25Db21wb25lbnRbXSkge31cblxuICBwdWJsaWMgYmFja2Ryb3BDbGFzc1ZhbDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBjaGVja21hcms6IGJvb2xlYW4gfCBudWxsID0gbnVsbDsgLy8gQmluZGluZyBhdHRyaWJ1dGUgXCJpc0NoZWNrbWFya1wiLiAvLyBpbnRlcmZhY2UgR2xuT3B0aW9uUGFyZW50XG4gIHB1YmxpYyBjdXJyQ29uZmlnOiBHbG5TZWxlY3RDb25maWcgfCBudWxsID0gbnVsbDtcbiAgLy8gcHVibGljIGRpc2FibGVkOiBib29sZWFuIHwgbnVsbCA9IG51bGw7IC8vIEJpbmRpbmcgYXR0cmlidXRlIFwiaXNEaXNhYmxlZFwiLiAvLyBJcyBpbiBHbG5CYXNpc0NvbnRyb2wuXG4gIC8vIHB1YmxpYyBlcnJvcjogYm9vbGVhbiB8IG51bGwgPSBudWxsOyAvLyBCaW5kaW5nIGF0dHJpYnV0ZSBcImlzRXJyb3JcIi4gLy8gSXMgaW4gR2xuQmFzaXNDb250cm9sLlxuICBwdWJsaWMgZXJyb3JzOiBWYWxpZGF0aW9uRXJyb3JzIHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBmb3JtQ29udHJvbDogRm9ybUNvbnRyb2wgPSBuZXcgRm9ybUNvbnRyb2woeyB2YWx1ZTogbnVsbCwgZGlzYWJsZWQ6IGZhbHNlIH0sIFtdKTtcbiAgcHVibGljIGZvcm1Hcm91cDogRm9ybUdyb3VwID0gbmV3IEZvcm1Hcm91cCh7IHRleHREYXRhOiB0aGlzLmZvcm1Db250cm9sIH0pO1xuICBwdWJsaWMgZnJhbWVTaXplRGVmYXVsdCA9IEdsbkZyYW1lU2l6ZVV0aWwuZ2V0VmFsdWUoR2xuRnJhbWVTaXplLm1pZGRsZSkgfHwgMDtcbiAgcHVibGljIGhhc1BhbmVsQW5pbWF0aW9uID0gZmFsc2U7XG4gIHB1YmxpYyBpc0ZvY3VzZWQgPSBmYWxzZTtcbiAgcHVibGljIGlzRmlsbGVkID0gZmFsc2U7XG4gIHB1YmxpYyBpc1BhbmVsT3BlbiA9IGZhbHNlO1xuICAvLyBwdWJsaWMgaXNXcml0ZVZhbHVlSW5pdDogYm9vbGVhbiB8IG51bGwgPSBudWxsOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJcyBpbiBHbG5CYXNpc0NvbnRyb2wuXG4gIC8vIHB1YmxpYyBsYWJlbFNocmluazogYm9vbGVhbiB8IG51bGwgPSBudWxsOyAvLyBCaW5kaW5nIGF0dHJpYnV0ZSBcImlzTGFiZWxTaHJpbmtcIi4gLy8gSXMgaW4gR2xuQmFzaXNDb250cm9sLlxuICBwdWJsaWMgbXVsdGlwbGU6IGJvb2xlYW4gfCBudWxsID0gbnVsbDsgLy8gQmluZGluZyBhdHRyaWJ1dGUgXCJpc011bHRpcGxlXCIuIC8vIGludGVyZmFjZSBHbG5PcHRpb25QYXJlbnRcbiAgLy8gcHVibGljIG5vQW5pbWF0aW9uOiBib29sZWFuIHwgbnVsbCA9IG51bGw7IC8vIEJpbmRpbmcgYXR0cmlidXRlIFwiaXNOb0FuaW1hdGlvblwiLiAvLyBJcyBpbiBHbG5CYXNpc0NvbnRyb2wuXG4gIHB1YmxpYyBub0ljb246IGJvb2xlYW4gfCBudWxsID0gbnVsbDsgLy8gQmluZGluZyBhdHRyaWJ1dGUgXCJpc05vSWNvblwiLFxuICAvLyBwdWJsaWMgbm9MYWJlbDogYm9vbGVhbiB8IG51bGwgPSBudWxsOyAvLyBCaW5kaW5nIGF0dHJpYnV0ZSBcImlzTm9MYWJlbFwiLiAvLyBJcyBpbiBHbG5CYXNpc0NvbnRyb2wuXG4gIHB1YmxpYyBub1JpcHBsZTogYm9vbGVhbiB8IG51bGwgPSBudWxsOyAvLyBCaW5kaW5nIGF0dHJpYnV0ZSBcImlzTm9SaXBwbGVcIi4gLy8gaW50ZXJmYWNlIEdsbk9wdGlvblBhcmVudFxuICBwdWJsaWMgb3ZlcmxheVBhbmVsQ2xhc3M6IHN0cmluZyB8IHN0cmluZ1tdID0gJyc7XG4gIHB1YmxpYyBwYW5lbENsYXNzTGlzdDogc3RyaW5nIHwgc3RyaW5nW10gfCBTZXQ8c3RyaW5nPiB8IHsgW2tleTogc3RyaW5nXTogYW55IH0gfCB1bmRlZmluZWQ7IC8vIEJpbmRpbmcgYXR0cmlidXRlIFwicGFuZWxDbGFzc1wiXG4gIHB1YmxpYyBwb3NpdGlvbkxpc3Q6IENvbm5lY3RlZFBvc2l0aW9uW10gPSBbXTtcbiAgLy8gcHVibGljIHJlYWRPbmx5OiBib29sZWFuIHwgbnVsbCA9IG51bGw7IC8vIEJpbmRpbmcgYXR0cmlidXRlIFwiaXNSZWFkT25seVwiLiAvLyBJcyBpbiBHbG5CYXNpc0NvbnRyb2wuXG4gIC8vIHB1YmxpYyByZXF1aXJlZDogYm9vbGVhbiB8IG51bGwgPSBudWxsOyAvLyBCaW5kaW5nIGF0dHJpYnV0ZSBcImlzUmVxdWlyZWRcIi4gLy8gSXMgaW4gR2xuQmFzaXNDb250cm9sLlxuICBwdWJsaWMgc2VsZWN0ZWRPcHRpb25zOiBHbG5PcHRpb25Db21wb25lbnRbXSA9IFtdO1xuICAvKiogU3RyYXRlZ3kgZm9yIGhhbmRsaW5nIHNjcm9sbGluZyB3aGVuIHRoZSBzZWxlY3Rpb24gcGFuZWwgaXMgb3Blbi4gKi9cbiAgcHVibGljIHNjcm9sbFN0cmF0ZWd5OiBTY3JvbGxTdHJhdGVneTtcbiAgLyoqIFRoZSBwb3NpdGlvbiBhbmQgZGltZW5zaW9ucyBmb3IgdGhlIHRyaWdnZXIncyBib3VuZGluZyBib3guICovXG4gIHB1YmxpYyB0cmlnZ2VyUmVjdDogRE9NUmVjdCB8IG51bGwgPSBudWxsO1xuICAvLyBwdWJsaWMgdmFsdWVJbml0OiBib29sZWFuIHwgbnVsbCA9IG51bGw7IC8vIEJpbmRpbmcgYXR0cmlidXRlIFwiaXNWYWx1ZUluaXRcIi4gLy8gSXMgaW4gR2xuQmFzaXNDb250cm9sLlxuICBwdWJsaWMgdmlzaWJsZVNpemVWYWw6IG51bWJlciB8IG51bGwgPSBudWxsOyAvLyBCaW5kaW5nIGF0dHJpYnV0ZSBcInZpc2libGVTaXplXCIuXG5cbiAgcHJpdmF0ZSBpc0ZvY3VzQXR0ck9uRnJhbWUgPSBmYWxzZTtcbiAgcHJpdmF0ZSBtYXJrZWRPcHRpb246IEdsbk9wdGlvbkNvbXBvbmVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG1heFdpZHRoID0gMDtcbiAgLyoqIFNhdmluZyB0aGUgZm9udCBzaXplIG9mIHRoZSB0cmlnZ2VyIGVsZW1lbnQuICovXG4gIHByaXZhdGUgdHJpZ2dlckZvbnRTaXplID0gMDtcbiAgLyoqIFNhdmluZyB0aGUgZnJhbWUgc2l6ZSBvZiB0aGUgdHJpZ2dlciBlbGVtZW50LiBEZWZpbmVzIEJvcmRlclJhZGl1cy4gKi9cbiAgcHJpdmF0ZSB0cmlnZ2VyRnJhbWVTaXplID0gMDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBob3N0UmVmOiBFbGVtZW50UmVmPEhUTUxFbGVtZW50PixcbiAgICByZW5kZXJlcjogUmVuZGVyZXIyLFxuICAgIGNoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xuICAgIEBJbmplY3QoUExBVEZPUk1fSUQpIHByaXZhdGUgcGxhdGZvcm1JZDogT2JqZWN0LFxuICAgIEBPcHRpb25hbCgpIEBJbmplY3QoR0xOX1NFTEVDVF9DT05GSUcpIHByaXZhdGUgcm9vdENvbmZpZzogR2xuU2VsZWN0Q29uZmlnIHwgbnVsbCxcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1vZHVsZS1ib3VuZGFyeS10eXBlcywgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIEBPcHRpb25hbCgpIEBJbmplY3QoR0xOX1NFTEVDVF9TQ1JPTExfU1RSQVRFR1kpIHByaXZhdGUgc2Nyb2xsU3RyYXRlZ3lGYWN0b3J5OiBhbnksXG4gICAgbmdab25lOiBOZ1pvbmVcbiAgKSB7XG4gICAgc3VwZXIodW5pcXVlSWRDb3VudGVyKyssICdnbG5zbCcsIGhvc3RSZWYsIHJlbmRlcmVyLCBjaGFuZ2VEZXRlY3RvclJlZiwgbmdab25lKTtcbiAgICB0aGlzLmN1cnJDb25maWcgPSB0aGlzLnJvb3RDb25maWc7XG4gICAgdGhpcy5zY3JvbGxTdHJhdGVneSA9IHRoaXMuc2Nyb2xsU3RyYXRlZ3lGYWN0b3J5KCk7XG4gICAgSHRtbEVsZW1VdGlsLnNldENsYXNzKHRoaXMucmVuZGVyZXIsIHRoaXMuaG9zdFJlZiwgJ2dsbi1zZWxlY3QnLCB0cnVlKTtcbiAgICBIdG1sRWxlbVV0aWwuc2V0Q2xhc3ModGhpcy5yZW5kZXJlciwgdGhpcy5ob3N0UmVmLCAnZ2xuLWNvbnRyb2wnLCB0cnVlKTtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgLy8gSW4gdGhlIEdsbkJhc2lzQ29udHJvbC5uZ09uQ2hhbmdlcygpLCB0aGUgZGVmaW5pdGlvbiBpcyBtYWRlOlxuICAgIC8vIC0gdGhpcy5kaXNhYmxlZCA9IEJvb2xlYW5VdGlsLmluaXQodGhpcy5pc0Rpc2FibGVkKTtcbiAgICAvLyAtIHRoaXMuZXJyb3IgPSBCb29sZWFuVXRpbC5pbml0KHRoaXMuaXNFcnJvcik7XG4gICAgLy8gLSB0aGlzLmxhYmVsU2hyaW5rID0gQm9vbGVhblV0aWwuaW5pdCh0aGlzLmlzTGFiZWxTaHJpbmspO1xuICAgIC8vIC0gdGhpcy5ub0FuaW1hdGlvbiA9IEJvb2xlYW5VdGlsLmluaXQodGhpcy5pc05vQW5pbWF0aW9uKTtcbiAgICAvLyAtIHRoaXMubm9MYWJlbCA9IEJvb2xlYW5VdGlsLmluaXQodGhpcy5pc05vTGFiZWwpO1xuICAgIC8vIC0gdGhpcy5yZWFkT25seSA9IEJvb2xlYW5VdGlsLmluaXQodGhpcy5pc1JlYWRPbmx5KTtcbiAgICAvLyAtIHRoaXMucmVxdWlyZWQgPSBCb29sZWFuVXRpbC5pbml0KHRoaXMuaXNSZXF1aXJlZCk7XG4gICAgLy8gLSB0aGlzLnZhbHVlSW5pdCA9IEJvb2xlYW5VdGlsLmluaXQodGhpcy5pc1ZhbHVlSW5pdCk7XG4gICAgc3VwZXIubmdPbkNoYW5nZXMoY2hhbmdlcyk7XG4gICAgaWYgKGNoYW5nZXNbJ2NvbmZpZyddKSB7XG4gICAgICB0aGlzLmN1cnJDb25maWcgPSB7IC4uLnRoaXMucm9vdENvbmZpZywgLi4udGhpcy5jb25maWcgfTtcbiAgICAgIGlmICh0aGlzLm5vQW5pbWF0aW9uID09IG51bGwpIHtcbiAgICAgICAgdGhpcy5ub0FuaW1hdGlvbiA9IHRoaXMuY3VyckNvbmZpZz8uaXNOb0FuaW1hdGlvbiB8fCBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoY2hhbmdlc1snaXNDaGVja21hcmsnXSB8fCAoY2hhbmdlc1snY29uZmlnJ10gJiYgdGhpcy5pc0NoZWNrbWFyayA9PSBudWxsKSkge1xuICAgICAgdGhpcy5jaGVja21hcmsgPSBCb29sZWFuVXRpbC5pbml0KHRoaXMuaXNDaGVja21hcmspIHx8IHRoaXMuY3VyckNvbmZpZz8uaXNDaGVja21hcmsgfHwgbnVsbDtcbiAgICB9XG4gICAgaWYgKGNoYW5nZXNbJ2lzTXVsdGlwbGUnXSB8fCAoY2hhbmdlc1snY29uZmlnJ10gJiYgdGhpcy5pc011bHRpcGxlID09IG51bGwpKSB7XG4gICAgICB0aGlzLm11bHRpcGxlID0gQm9vbGVhblV0aWwuaW5pdCh0aGlzLmlzTXVsdGlwbGUpIHx8IHRoaXMuY3VyckNvbmZpZz8uaXNNdWx0aXBsZSB8fCBudWxsO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlc1snaXNOb0ljb24nXSB8fCAoY2hhbmdlc1snY29uZmlnJ10gJiYgdGhpcy5pc05vSWNvbiA9PSBudWxsKSkge1xuICAgICAgdGhpcy5ub0ljb24gPSBCb29sZWFuVXRpbC5pbml0KHRoaXMuaXNOb0ljb24pIHx8IHRoaXMuY3VyckNvbmZpZz8uaXNOb0ljb24gfHwgbnVsbDtcbiAgICB9XG4gICAgaWYgKGNoYW5nZXNbJ2lzTm9SaXBwbGUnXSB8fCAoY2hhbmdlc1snY29uZmlnJ10gJiYgdGhpcy5pc05vUmlwcGxlID09IG51bGwpKSB7XG4gICAgICB0aGlzLm5vUmlwcGxlID0gQm9vbGVhblV0aWwuaW5pdCh0aGlzLmlzTm9SaXBwbGUpIHx8IHRoaXMuY3VyckNvbmZpZz8uaXNOb1JpcHBsZSB8fCBudWxsO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlc1sncGFuZWxDbGFzcyddIHx8IChjaGFuZ2VzWydjb25maWcnXSAmJiB0aGlzLnBhbmVsQ2xhc3MgPT0gbnVsbCkpIHtcbiAgICAgIHRoaXMucGFuZWxDbGFzc0xpc3QgPSB0aGlzLnBhbmVsQ2xhc3MgfHwgdGhpcy5jdXJyQ29uZmlnPy5wYW5lbENsYXNzO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlc1sncG9zaXRpb24nXSB8fCAoY2hhbmdlc1snY29uZmlnJ10gJiYgdGhpcy5wb3NpdGlvbiA9PSBudWxsKSkge1xuICAgICAgdGhpcy5wb3NpdGlvbkxpc3QgPSB0aGlzLmdldFBvc2l0aW9uTGlzdCh0aGlzLnBvc2l0aW9uIHx8IHRoaXMuY3VyckNvbmZpZz8ucG9zaXRpb24pO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlc1sndmlzaWJsZVNpemUnXSB8fCAoY2hhbmdlc1snY29uZmlnJ10gJiYgdGhpcy52aXNpYmxlU2l6ZSA9PSBudWxsKSkge1xuICAgICAgdGhpcy52aXNpYmxlU2l6ZVZhbCA9IHRoaXMudmlzaWJsZVNpemUgfHwgdGhpcy5jdXJyQ29uZmlnPy52aXNpYmxlU2l6ZSB8fCBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICBzdXBlci5uZ09uSW5pdCgpO1xuICAgIGlmICh0aGlzLmJhY2tkcm9wQ2xhc3NWYWwgPT0gbnVsbCkge1xuICAgICAgdGhpcy5iYWNrZHJvcENsYXNzVmFsID0gdGhpcy5jdXJyQ29uZmlnPy5iYWNrZHJvcENsYXNzIHx8IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLmNoZWNrbWFyayA9PSBudWxsKSB7XG4gICAgICB0aGlzLmNoZWNrbWFyayA9IHRoaXMuY3VyckNvbmZpZz8uaXNDaGVja21hcmsgfHwgbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMubXVsdGlwbGUgPT0gbnVsbCkge1xuICAgICAgdGhpcy5tdWx0aXBsZSA9IHRoaXMuY3VyckNvbmZpZz8uaXNNdWx0aXBsZSB8fCBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5ub0FuaW1hdGlvbiA9PSBudWxsKSB7XG4gICAgICB0aGlzLm5vQW5pbWF0aW9uID0gdGhpcy5jdXJyQ29uZmlnPy5pc05vQW5pbWF0aW9uIHx8IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLm5vSWNvbiA9PSBudWxsKSB7XG4gICAgICB0aGlzLm5vSWNvbiA9IHRoaXMuY3VyckNvbmZpZz8uaXNOb0ljb24gfHwgbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMubm9SaXBwbGUgPT0gbnVsbCkge1xuICAgICAgdGhpcy5ub1JpcHBsZSA9IHRoaXMuY3VyckNvbmZpZz8uaXNOb1JpcHBsZSB8fCBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5jdXJyQ29uZmlnPy5vdmVybGF5UGFuZWxDbGFzcykge1xuICAgICAgdGhpcy5vdmVybGF5UGFuZWxDbGFzcyA9IHRoaXMuY3VyckNvbmZpZy5vdmVybGF5UGFuZWxDbGFzcztcbiAgICB9XG4gICAgaWYgKHRoaXMucGFuZWxDbGFzc0xpc3QgPT0gbnVsbCkge1xuICAgICAgdGhpcy5wYW5lbENsYXNzTGlzdCA9IHRoaXMuY3VyckNvbmZpZz8ucGFuZWxDbGFzcztcbiAgICB9XG4gICAgaWYgKHRoaXMucG9zaXRpb25MaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5wb3NpdGlvbkxpc3QgPSB0aGlzLmdldFBvc2l0aW9uTGlzdCh0aGlzLmN1cnJDb25maWc/LnBvc2l0aW9uKTtcbiAgICB9XG4gICAgaWYgKHRoaXMudmlzaWJsZVNpemVWYWwgPT0gbnVsbCkge1xuICAgICAgdGhpcy52aXNpYmxlU2l6ZVZhbCA9IHRoaXMuY3VyckNvbmZpZz8udmlzaWJsZVNpemUgfHwgbnVsbDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgbmdBZnRlckNvbnRlbnRJbml0KCk6IHZvaWQge1xuICAgIC8vIEluaXRpYWxpemVkIHdoZW4gdGhlIHZhbHVlIGlzIHJlY2VpdmVkIHZpYSBcIndyaXRlVmFsdWUoKVwiIGJ1dCB0aGUgbGlzdCBvZiBtZW51IGl0ZW1zIGlzIGp1c3Qgbm93LlxuICAgIGlmICh0aGlzLnNlbGVjdGVkT3B0aW9ucy5sZW5ndGggPT09IDAgJiYgdGhpcy5vcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdGhpcy52YWx1ZURhdGE7XG4gICAgICB0aGlzLnZhbHVlRGF0YSA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMudmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgIC8vIElmIHRoZSB0ZW1wbGF0ZSBpcyBhbHJlYWR5IHJlbmRlcmVkIGF0IHRoZSBtb21lbnQsIHRoZW4gaXQgaXMgcG9zc2libGUgdGhhdCB0aGVzZSBjaGFuZ2VzIHdpbGwgbm90IGJlIGRpc3BsYXllZC5cbiAgICAgIC8vIFRvIHNvbHZlIHRoaXMgcHJvYmxlbSwgd2UgY2FsbCBhIHJlZHJhdyB2aWEgUHJvbWlzZS5cbiAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHN1cGVyLm5nQWZ0ZXJDb250ZW50SW5pdCgpO1xuICB9XG5cbiAgcHVibGljIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcbiAgICBsZXQgbWF4V2lkdGggPSBOdW1iZXIoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmhvc3RSZWYubmF0aXZlRWxlbWVudCkuZ2V0UHJvcGVydHlWYWx1ZSgnbWF4LXdpZHRoJykucmVwbGFjZSgncHgnLCAnJykpO1xuICAgIHRoaXMubWF4V2lkdGggPSAhaXNOYU4obWF4V2lkdGgpID8gbWF4V2lkdGggOiAwO1xuICAgIGlmICh0aGlzLm1heFdpZHRoID09PSAwICYmIEJvb2xlYW5VdGlsLmluaXQodGhpcy53ZEZ1bGwpKSB7XG4gICAgICBtYXhXaWR0aCA9IE51bWJlcihnZXRDb21wdXRlZFN0eWxlKHRoaXMuaG9zdFJlZi5uYXRpdmVFbGVtZW50KS5nZXRQcm9wZXJ0eVZhbHVlKCd3aWR0aCcpLnJlcGxhY2UoJ3B4JywgJycpKTtcbiAgICAgIHRoaXMubWF4V2lkdGggPSAhaXNOYU4obWF4V2lkdGgpID8gbWF4V2lkdGggOiAwO1xuICAgIH1cbiAgfVxuXG4gIC8vICoqIGludGVyZmFjZSBDb250cm9sVmFsdWVBY2Nlc3NvciAtIHN0YXJ0ICoqXG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tb2R1bGUtYm91bmRhcnktdHlwZXMsIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgcHVibGljIG92ZXJyaWRlIHdyaXRlVmFsdWUodmFsdWU6IGFueSk6IHZvaWQge1xuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICBzdXBlci53cml0ZVZhbHVlKHZhbHVlKTtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBzZXREaXNhYmxlZFN0YXRlKGlzRGlzYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5kaXNhYmxlZCAhPT0gaXNEaXNhYmxlZCkge1xuICAgICAgaXNEaXNhYmxlZCA/IHRoaXMuZm9ybUdyb3VwLmRpc2FibGUoKSA6IHRoaXMuZm9ybUdyb3VwLmVuYWJsZSgpO1xuICAgICAgc3VwZXIuc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkKTtcbiAgICB9XG4gIH1cblxuICAvLyAqKiBpbnRlcmZhY2UgQ29udHJvbFZhbHVlQWNjZXNzb3IgLSBmaW5pc2ggKipcblxuICAvLyAqKiBpbnRlcmZhY2UgVmFsaWRhdG9yIC0gc3RhcnQgKipcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gIHB1YmxpYyB2YWxpZGF0ZShjb250cm9sOiBBYnN0cmFjdENvbnRyb2wpOiBWYWxpZGF0aW9uRXJyb3JzIHwgbnVsbCB7XG4gICAgbGV0IHJlc3VsdDogVmFsaWRhdGlvbkVycm9ycyB8IG51bGwgPSBudWxsO1xuICAgIGlmICh0aGlzLmlzRW1wdHkoKSkge1xuICAgICAgaWYgKHRoaXMucmVxdWlyZWQpIHtcbiAgICAgICAgcmVzdWx0ID0geyAuLi4ocmVzdWx0IHx8IHt9KSwgLi4ueyByZXF1aXJlZDogdHJ1ZSB9IH07XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLm11bHRpcGxlKSB7XG4gICAgICBjb25zdCBhY3R1YWxMZW5ndGggPSBBcnJheS5pc0FycmF5KHRoaXMudmFsdWVEYXRhKSA/IHRoaXMudmFsdWVEYXRhLmxlbmd0aCA6IDA7XG4gICAgICBpZiAoISF0aGlzLm1pbkxlbmd0aCAmJiAwIDwgdGhpcy5taW5MZW5ndGggJiYgYWN0dWFsTGVuZ3RoIDwgdGhpcy5taW5MZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0ID0geyAuLi4ocmVzdWx0IHx8IHt9KSwgLi4ueyBtaW5sZW5ndGg6IHsgcmVxdWlyZWRMZW5ndGg6IHRoaXMubWluTGVuZ3RoLCBhY3R1YWxMZW5ndGggfSB9IH07XG4gICAgICB9IGVsc2UgaWYgKCEhdGhpcy5tYXhMZW5ndGggJiYgMCA8IHRoaXMubWF4TGVuZ3RoICYmIGFjdHVhbExlbmd0aCA+IHRoaXMubWF4TGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdCA9IHsgLi4uKHJlc3VsdCB8fCB7fSksIC4uLnsgbWF4bGVuZ3RoOiB7IHJlcXVpcmVkTGVuZ3RoOiB0aGlzLm1heExlbmd0aCwgYWN0dWFsTGVuZ3RoIH0gfSB9O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gKHRoaXMuZXJyb3JzID0gcmVzdWx0KTtcbiAgfVxuXG4gIC8vICoqIGludGVyZmFjZSBWYWxpZGF0b3IgLSBmaW5pc2ggKipcblxuICAvLyAqKiBpbnRlcmZhY2UgR2xuT3B0aW9uUGFyZW50IC0gc3RhcnQgKipcblxuICBwdWJsaWMgb3B0aW9uU2VsZWN0aW9uKG9wdGlvbkl0ZW06IEdsbk9wdGlvbkNvbXBvbmVudCk6IHZvaWQge1xuICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5zZWxlY3Rpb25PcHRpb25FbGVtZW50KG9wdGlvbkl0ZW0pO1xuICAgICAgaWYgKHRoaXMuaXNQYW5lbE9wZW4gJiYgIXRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgIHRoaXMuaXNGb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8vICoqIGludGVyZmFjZSBHbG5PcHRpb25QYXJlbnQgLSBmaW5pc2ggKipcblxuICAvLyAqKiBQdWJsaWMgbWV0aG9kcyAqKlxuXG4gIHB1YmxpYyB0cmFja0J5T3B0aW9uKGluZGV4OiBudW1iZXIsIGl0ZW06IEdsbk9wdGlvbkNvbXBvbmVudCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGl0ZW0uaWQ7XG4gIH1cbiAgLyoqIERldGVybWluZSB0aGUgdmFsdWUgb2YgdGhlIGNzcyB2YXJpYWJsZSBcImZyYW1lIHNpemVcIi4gKi9cbiAgcHVibGljIGZyYW1lU2l6ZUNoYW5nZShldmVudDogR2xuRnJhbWVTaXplUGFkZGluZ1ZlckhvclJlcyk6IHZvaWQge1xuICAgIHRoaXMudHJpZ2dlckZyYW1lU2l6ZSA9IGV2ZW50LmZyYW1lU2l6ZVZhbHVlIHx8IDA7XG4gICAgY29uc3QgbWluV2lkdGggPSBOdW1iZXJVdGlsLnJvdW5kVG8xMDAodGhpcy50cmlnZ2VyRnJhbWVTaXplICogMS4xKTtcbiAgICBIdG1sRWxlbVV0aWwuc2V0UHJvcGVydHkodGhpcy5ob3N0UmVmLCBDU1NfUFJPUF9FTF9NSU5fV0lEVEgsIE51bWJlclV0aWwuc3RyKG1pbldpZHRoKT8uY29uY2F0KCdweCcpKTtcbiAgICBIdG1sRWxlbVV0aWwuc2V0UHJvcGVydHkodGhpcy5ob3N0UmVmLCBDU1NfUFJPUF9FTF9NSU5fSEVJR0hULCBOdW1iZXJVdGlsLnN0cih0aGlzLnRyaWdnZXJGcmFtZVNpemUpPy5jb25jYXQoJ3B4JykpO1xuICB9XG5cbiAgcHVibGljIGdldFBhbmVsQ2xhc3MoXG4gICAgbGlzdDogc3RyaW5nIHwgc3RyaW5nW10gfCBTZXQ8c3RyaW5nPiB8IHsgW2tleTogc3RyaW5nXTogYW55IH0gfCB1bmRlZmluZWRcbiAgKTogc3RyaW5nIHwgc3RyaW5nW10gfCBTZXQ8c3RyaW5nPiB8IHsgW2tleTogc3RyaW5nXTogYW55IH0ge1xuICAgIHJldHVybiBsaXN0ID8/ICcnO1xuICB9XG5cbiAgcHVibGljIGlzRW1wdHkoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodGhpcy52YWx1ZURhdGEpID8gdGhpcy52YWx1ZURhdGEubGVuZ3RoID09PSAwIDogdGhpcy52YWx1ZURhdGEgPT0gbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBmb2N1cygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuZGlzYWJsZWQgJiYgaXNQbGF0Zm9ybUJyb3dzZXIodGhpcy5wbGF0Zm9ybUlkKSkge1xuICAgICAgdGhpcy5mcmFtZVJlZi5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRvRm9jdXMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XG4gICAgICBjb25zdCBpc0ZvY3VzZWRFbWl0ID0gIXRoaXMuaXNGb2N1c2VkO1xuICAgICAgdGhpcy5pc0ZvY3VzZWQgPSB0cnVlO1xuICAgICAgaWYgKGlzRm9jdXNlZEVtaXQpIHtcbiAgICAgICAgdGhpcy5mb2N1c2VkLmVtaXQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gVGhlIHNlbGVjdGlvbiBwYW5lbCBjZWFzZSB3b3JraW5nIGluIHRoZSBmb2xsb3dpbmcgY2FzZXM6XG4gIC8vIChDYXNlcy1CMSkgUGFuZWwgaXMgY2xvc2UgYW5kIG9uIHRoZSB0cmlnZ2VyLCBjbGljayB0aGUgVGFiIGtleS5cbiAgLy8gKENhc2VzLUIyKSBQYW5lbCBpcyBvcGVuIGFuZCBtb3VzZSBjbGljayB3aXRoaW4gdGhlIHBhbmVsLlxuICAvLyAoQ2FzZXMtQjMpIFBhbmVsIGlzIG9wZW4gYW5kIG1vdXNlIGNsaWNrIG91dHNpZGUgb2YgcGFuZWwgYW5kIHRyaWdnZXIuXG4gIC8vIChDYXNlcy1CNCkgUGFuZWwgaXMgb3BlbiBhbmQgbW91c2UgY2xpY2sgb3V0c2lkZSBvZiBwYW5lbCBidXQgb24gdHJpZ2dlci5cbiAgLy8gKENhc2VzLUI1KSBQYW5lbCBpcyBvcGVuIGFuZCBjbGljayB0aGUgRXNjYXBlIGtleS5cbiAgLy8gKENhc2VzLUI2KSBQYW5lbCBpcyBvcGVuIGFuZCBjbGljayB0aGUgVGFiIGtleS5cbiAgLy8gKENhc2VzLUI3KSBQYW5lbCBpcyBvcGVuIGFuZCBjbGljayB0aGUgRW50ZXIga2V5LlxuXG4gIC8qKiBDYWxscyB0aGUgdG91Y2ggY2FsbGJhY2sgb25seSB3aGVuIHRoZSBwYW5lbCBpcyBjbG9zZWQuXG4gICAqIE90aGVyd2lzZSwgaXQgd2lsbCBjYXVzZSBhIGZhbHNlIHBvc2l0aXZlLCBcImJsdXJcIiBvbiB0aGUgcGFuZWwgd2hlbiBpdCBpcyBvcGVuZWQuXG4gICAqL1xuICBwdWJsaWMgZG9CbHVyKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgIGlmICghdGhpcy5pc1BhbmVsT3BlbiAmJiAhdGhpcy5oYXNQYW5lbEFuaW1hdGlvbikge1xuICAgICAgICAvLyAoQ2FzZXMtQjEpIFBhbmVsIGlzIGNsb3NlIGFuZCBvbiB0aGUgdHJpZ2dlciwgY2xpY2sgdGhlIFRhYiBrZXkuXG4gICAgICAgIHRoaXMuYmx1cmVkLmVtaXQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIChDYXNlcy1CMikgUGFuZWwgaXMgb3BlbiBhbmQgbW91c2UgY2xpY2sgd2l0aGluIHRoZSBwYW5lbC5cbiAgICAgICAgLy8gKENhc2VzLUIzKSBQYW5lbCBpcyBvcGVuIGFuZCBtb3VzZSBjbGljayBvdXRzaWRlIG9mIHBhbmVsIGFuZCB0cmlnZ2VyLlxuICAgICAgICAvLyAoQ2FzZXMtQjQpIFBhbmVsIGlzIG9wZW4gYW5kIG1vdXNlIGNsaWNrIG91dHNpZGUgb2YgcGFuZWwgYnV0IG9uIHRyaWdnZXIuXG4gICAgICAgIC8vIEZvciBjYXNlIENhc2VzLUIzLEI0LCBsZXQncyBhZGQgdGhlIFwiZm9jXCIgYXR0cmlidXRlIHRvIGZvcmNlIHRoZSBkaXNwbGF5IG9mIGZvY3VzLlxuICAgICAgICB0aGlzLmlzRm9jdXNBdHRyT25GcmFtZSA9IHRydWU7XG4gICAgICAgIEh0bWxFbGVtVXRpbC5zZXRBdHRyKHRoaXMucmVuZGVyZXIsIHRoaXMuZnJhbWVSZWYsIENTU19BVFRSX0ZPUl9GUkFNRV9GT0NVUywgJycpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKiogT2NjdXJzIHdoZW4gYSBtb3VzZSBjbGljayBldmVudCBvY2N1cnMgb3V0c2lkZSBvZiB0aGUgb3B0aW9ucyBsaXN0IHBhbmUuICovXG4gIHB1YmxpYyBiYWNrZHJvcENsaWNrKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgLy8gKENhc2VzLUIzKSBQYW5lbCBpcyBvcGVuIGFuZCBtb3VzZSBjbGljayBvdXRzaWRlIG9mIHBhbmVsIGFuZCB0cmlnZ2VyLlxuICAgICAgLy8gKENhc2VzLUI0KSBQYW5lbCBpcyBvcGVuIGFuZCBtb3VzZSBjbGljayBvdXRzaWRlIG9mIHBhbmVsIGJ1dCBvbiB0cmlnZ2VyLlxuICAgICAgdGhpcy5pc0ZvY3VzZWQgPSB0cnVlO1xuICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuICAvKiogT2NjdXJzIHdoZW4gdGhlIHBhbmVsIHJlY2VpdmVzIGlucHV0IGZvY3VzLiAqL1xuICBwdWJsaWMgZG9Gb2N1c09uUGFuZWwoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XG4gICAgICAvLyAoQ2FzZXMtQjIpIFBhbmVsIGlzIG9wZW4gYW5kIG1vdXNlIGNsaWNrIHdpdGhpbiB0aGUgcGFuZWwuXG4gICAgICB0aGlzLmlzRm9jdXNlZCA9IHRydWU7XG4gICAgICB0aGlzLmZvY3VzKCk7XG4gICAgfVxuICB9XG4gIC8qKiBPcGVuIG9yIGNsb3NlIHRoZSBvdmVybGF5IHBhbmVsLiAqL1xuICBwdWJsaWMgdG9nZ2xlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgaWYgKHRoaXMuaXNQYW5lbE9wZW4pIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzRm9jdXNlZCkge1xuICAgICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqIE9wZW4gb3ZlcmxheSBwYW5lbC4gKi9cbiAgcHVibGljIG9wZW4oKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmRpc2FibGVkICYmICF0aGlzLnJlYWRPbmx5ICYmICF0aGlzLmlzUGFuZWxPcGVuICYmIHRoaXMub3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLmlzUGFuZWxPcGVuID0gdHJ1ZTtcbiAgICAgIHRoaXMuaGFzUGFuZWxBbmltYXRpb24gPSAhdGhpcy5ub0FuaW1hdGlvbjtcbiAgICAgIHRoaXMubWFya2VkT3B0aW9uID0gdGhpcy5zZWxlY3RlZE9wdGlvbnMubGVuZ3RoID4gMCA/IHRoaXMuc2VsZWN0ZWRPcHRpb25zW3RoaXMuc2VsZWN0ZWRPcHRpb25zLmxlbmd0aCAtIDFdIDogbnVsbDtcbiAgICAgIHRoaXMudHJpZ2dlclJlY3QgPSB0aGlzLnRyaWdnZXJSZWYubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHRoaXMuaXNGb2N1c0F0dHJPbkZyYW1lID0gZmFsc2U7XG4gICAgICB0aGlzLnRyaWdnZXJGb250U2l6ZSA9IE51bWJlcigoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnRyaWdnZXJSZWYubmF0aXZlRWxlbWVudCkuZm9udFNpemUgfHwgJzAnKS5yZXBsYWNlKCdweCcsICcnKSk7XG4gICAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgICAgdGhpcy5vcGVuZWQuZW1pdCgpO1xuICAgIH1cbiAgfVxuICAvKiogQ2xvc2VzIHRoZSBvdmVybGF5IHBhbmVsIGFuZCBmb2N1c2VzIHRoZSBtYWluIGVsZW1lbnQuICovXG4gIHB1YmxpYyBjbG9zZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCAhdGhpcy5pc1BhbmVsT3Blbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5pc0ZvY3VzQXR0ck9uRnJhbWUpIHtcbiAgICAgIEh0bWxFbGVtVXRpbC5zZXRBdHRyKHRoaXMucmVuZGVyZXIsIHRoaXMuZnJhbWVSZWYsIENTU19BVFRSX0ZPUl9GUkFNRV9GT0NVUywgbnVsbCk7XG4gICAgfVxuICAgIHRoaXMuaXNQYW5lbE9wZW4gPSBmYWxzZTtcbiAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgIHRoaXMub25Ub3VjaGVkKCk7XG4gICAgdGhpcy5tYXJrZWRPcHRpb24/LnNldE1hcmtlZChmYWxzZSk7XG4gICAgdGhpcy5tYXJrZWRPcHRpb24gPSBudWxsO1xuXG4gICAgY29uc3Qgb3ZlcmxheUVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gdGhpcy5jb25uZWN0ZWRPdmVybGF5Lm92ZXJsYXlSZWYub3ZlcmxheUVsZW1lbnQ7XG4gICAgY29uc3Qgc2VsZWN0UGFuZWxSZWYgPSBIdG1sRWxlbVV0aWwuZ2V0RWxlbWVudFJlZihvdmVybGF5RWxlbWVudC5jaGlsZHJlblswXT8uY2hpbGRyZW5bMF0gYXMgSFRNTEVsZW1lbnQpO1xuICAgIGNvbnN0IHBhbmVsSGVpZ2h0ID0gdGhpcy5nZXRIZWlnaHQoc2VsZWN0UGFuZWxSZWYpO1xuICAgIGlmIChwYW5lbEhlaWdodCA+IDApIHtcbiAgICAgIGNvbnN0IG92ZXJsYXlSZWYgPSBIdG1sRWxlbVV0aWwuZ2V0RWxlbWVudFJlZihvdmVybGF5RWxlbWVudCk7XG4gICAgICBIdG1sRWxlbVV0aWwuc2V0UHJvcGVydHkob3ZlcmxheVJlZiwgQ1NTX1BST1BfVFJBTlNMQVRFX1ksIHRoaXMuZ2V0VHJhbnNsYXRlWSh0aGlzLnRyaWdnZXJSZWN0LCBwYW5lbEhlaWdodCwgU2NyZWVuVXRpbC5nZXRIZWlnaHQoKSkpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMubm9BbmltYXRpb24pIHtcbiAgICAgIGNvbnN0IHNlbGVjdFBhbmVsV3JhcFJlZiA9IEh0bWxFbGVtVXRpbC5nZXRFbGVtZW50UmVmKG92ZXJsYXlFbGVtZW50LmNoaWxkcmVuWzBdIGFzIEhUTUxFbGVtZW50KTtcbiAgICAgIC8vIEFkZCBhbiBhdHRyaWJ1dGUgZm9yIGFuaW1hdGlvbiBhbmQgdHJhbnNmb3JtYXRpb24uXG4gICAgICBIdG1sRWxlbVV0aWwuc2V0QXR0cih0aGlzLnJlbmRlcmVyLCBzZWxlY3RQYW5lbFdyYXBSZWYsIENTU19BVFRSX0ZPUl9QQU5FTF9PUEVOSU5HX0FOSU1BVElPTiwgbnVsbCk7XG4gICAgICBIdG1sRWxlbVV0aWwuc2V0QXR0cih0aGlzLnJlbmRlcmVyLCBzZWxlY3RQYW5lbFdyYXBSZWYsIENTU19BVFRSX0ZPUl9QQU5FTF9DTE9TSU5HX0FOSU1BVElPTiwgJycpO1xuICAgIH1cbiAgICB0aGlzLmNsb3NlZC5lbWl0KCk7XG4gIH1cbiAgLyoqIENhbGxiYWNrIHdoZW4gdGhlIG92ZXJsYXkgcGFuZWwgaXMgYXR0YWNoZWQuICovXG4gIHB1YmxpYyBhdHRhY2goKTogdm9pZCB7XG4gICAgY29uc3Qgb3ZlcmxheUVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gdGhpcy5jb25uZWN0ZWRPdmVybGF5Lm92ZXJsYXlSZWYub3ZlcmxheUVsZW1lbnQ7XG4gICAgLy8gQWRkaW5nIGEgY2xhc3Mgc28gdGhhdCBjdXN0b20gc3R5bGVzIGNhbiBiZSBhcHBsaWVkLlxuICAgIGNvbnN0IG92ZXJsYXlSZWYgPSBIdG1sRWxlbVV0aWwuZ2V0RWxlbWVudFJlZihvdmVybGF5RWxlbWVudCk7XG4gICAgSHRtbEVsZW1VdGlsLnNldEF0dHIodGhpcy5yZW5kZXJlciwgb3ZlcmxheVJlZiwgJ2dsbnNwby1zZWxlY3QnLCAnJyk7XG4gICAgY29uc3Qgc2VsZWN0UGFuZWxSZWYgPSBIdG1sRWxlbVV0aWwuZ2V0RWxlbWVudFJlZihvdmVybGF5RWxlbWVudC5jaGlsZHJlblswXT8uY2hpbGRyZW5bMF0gYXMgSFRNTEVsZW1lbnQpO1xuICAgIGNvbnN0IHBhbmVsSGVpZ2h0ID0gdGhpcy5nZXRIZWlnaHQoc2VsZWN0UGFuZWxSZWYpO1xuICAgIGlmICghdGhpcy5ub0FuaW1hdGlvbiAmJiBwYW5lbEhlaWdodCA+IDApIHtcbiAgICAgIEh0bWxFbGVtVXRpbC5zZXRQcm9wZXJ0eShvdmVybGF5UmVmLCBDU1NfUFJPUF9UUkFOU0xBVEVfWSwgdGhpcy5nZXRUcmFuc2xhdGVZKHRoaXMudHJpZ2dlclJlY3QsIHBhbmVsSGVpZ2h0LCBTY3JlZW5VdGlsLmdldEhlaWdodCgpKSk7XG4gICAgfVxuICAgIC8vIFNldCB0aGUgZm9udCBzaXplIGZvciB0aGUgb3ZlcmxheS5cbiAgICBpZiAodGhpcy50cmlnZ2VyRm9udFNpemUgPiAwKSB7XG4gICAgICBvdmVybGF5RWxlbWVudC5zdHlsZS5mb250U2l6ZSA9IGAke3RoaXMudHJpZ2dlckZvbnRTaXplfXB4YDtcbiAgICB9XG4gICAgaWYgKHRoaXMubWF4V2lkdGggPiAwKSB7XG4gICAgICBvdmVybGF5RWxlbWVudC5zdHlsZS5tYXhXaWR0aCA9IGAke3RoaXMubWF4V2lkdGh9cHhgO1xuICAgIH1cbiAgICBpZiAodGhpcy50cmlnZ2VyRnJhbWVTaXplID4gMCkge1xuICAgICAgY29uc3QgYm9yZGVyUmFkaXVzID0gTnVtYmVyVXRpbC5yb3VuZFRvMTAwKHRoaXMudHJpZ2dlckZyYW1lU2l6ZSAvIDEwKTtcbiAgICAgIEh0bWxFbGVtVXRpbC5zZXRQcm9wZXJ0eShvdmVybGF5UmVmLCBDU1NfUFJPUF9CT1JERVJfUkFESVVTLCBOdW1iZXJVdGlsLnN0cihib3JkZXJSYWRpdXMpPy5jb25jYXQoJ3B4JykpO1xuICAgIH1cbiAgICBjb25zdCB2aXNpYmxlU2l6ZSA9IHRoaXMudmlzaWJsZVNpemVWYWwgPz8gMDtcbiAgICBjb25zdCBtYXhIZWlndGhTZWxlY3RQYW5lbCA9IHZpc2libGVTaXplID4gMCA/IHRoaXMuZ2V0T3B0aW9uSGVpZ3RoKHRoaXMub3B0aW9ucykgKiB2aXNpYmxlU2l6ZSA6IDA7XG4gICAgaWYgKG1heEhlaWd0aFNlbGVjdFBhbmVsID4gMCkge1xuICAgICAgSHRtbEVsZW1VdGlsLnNldFByb3BlcnR5KG92ZXJsYXlSZWYsIENTU19QUk9QX01BWF9IRUlHSFQsIE51bWJlclV0aWwuc3RyKG1heEhlaWd0aFNlbGVjdFBhbmVsKT8uY29uY2F0KCdweCcpKTtcbiAgICB9XG4gICAgLy8gV2UgY2Fubm90IGdldCB0aGUgYWN0dWFsIHNpemVzIGFuZCBwb3NpdGlvbnMgb2YgZWxlbWVudHMgaWYgdGhleSBhcmUgYWZmZWN0ZWQgYnkgYSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAvLyBUaGVyZWZvcmUsIHdlIGZpcnN0IGdldCBhbGwgdGhlIGRhdGEsIGFuZCB0aGVuIGFkZCBhdHRyaWJ1dGVzIGZvciBhbmltYXRpb24gYW5kIHRyYW5zZm9ybWF0aW9uLlxuICAgIGlmICh0aGlzLm1hcmtlZE9wdGlvbiAhPT0gbnVsbCAmJiBzZWxlY3RQYW5lbFJlZiAhPT0gbnVsbCAmJiBtYXhIZWlndGhTZWxlY3RQYW5lbCA+IDApIHtcbiAgICAgIGNvbnN0IGRlbHRhID0gTnVtYmVyVXRpbC5yb3VuZFRvMTAwKG1heEhlaWd0aFNlbGVjdFBhbmVsIC8gMikgLSBOdW1iZXJVdGlsLnJvdW5kVG8xMDAodGhpcy5nZXRIZWlnaHQodGhpcy5tYXJrZWRPcHRpb24uaG9zdFJlZikgLyAyKTtcbiAgICAgIGNvbnN0IG9wdGlvblJlY3QgPSB0aGlzLm1hcmtlZE9wdGlvbi5ob3N0UmVmLm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCBwYW5lbFJlY3QgPSBzZWxlY3RQYW5lbFJlZi5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgc2VsZWN0UGFuZWxSZWYubmF0aXZlRWxlbWVudC5zY3JvbGxUbygwLCBvcHRpb25SZWN0LnRvcCAtIHBhbmVsUmVjdC50b3AgLSBkZWx0YSk7XG4gICAgfVxuICAgIC8vIEltcG9ydGFudCEgVGhlc2Ugb3BlcmF0aW9ucyBzaG91bGQgYmUgdGhlIGxhc3QsIHRoZXkgaW5jbHVkZSBhbmltYXRpb24gYW5kIHRoZSBkaW1lbnNpb25zIG9mIHRoZSBwYW5lbCBhcmUgZGlzdG9ydGVkLlxuICAgIGNvbnN0IHNlbGVjdFBhbmVsV3JhcFJlZiA9IEh0bWxFbGVtVXRpbC5nZXRFbGVtZW50UmVmKG92ZXJsYXlFbGVtZW50Py5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudCk7XG4gICAgaWYgKHRoaXMubm9BbmltYXRpb24pIHtcbiAgICAgIEh0bWxFbGVtVXRpbC5zZXRBdHRyKHRoaXMucmVuZGVyZXIsIHNlbGVjdFBhbmVsV3JhcFJlZiwgJ25vQW5tJywgJycpO1xuICAgICAgSHRtbEVsZW1VdGlsLnNldENsYXNzKHRoaXMucmVuZGVyZXIsIHNlbGVjdFBhbmVsV3JhcFJlZiwgJ2dsbi1uby1hbmltYXRpb24nLCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQWRkIGFuIGF0dHJpYnV0ZSBmb3IgYW5pbWF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgIEh0bWxFbGVtVXRpbC5zZXRBdHRyKHRoaXMucmVuZGVyZXIsIHNlbGVjdFBhbmVsV3JhcFJlZiwgQ1NTX0FUVFJfRk9SX1BBTkVMX09QRU5JTkdfQU5JTUFUSU9OLCAnJyk7XG4gICAgfVxuICB9XG4gIC8qKiBIYW5kbGVzIGFsbCBrZXlwcmVzcyBldmVudHMgZm9yIHRoZSBjb21wb25lbnQncyBwYW5lbC4gKi9cbiAgcHVibGljIGZyYW1lS2V5ZG93bihldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgaWYgKCF0aGlzLmlzUGFuZWxPcGVuKSB7XG4gICAgICAgIC8vIE9wZW4gdGhlIHNlbGVjdGlvbiBwYW5lbCBieSBwcmVzc2luZyB0aGUga2V5czogJ3VwIGFycm93JywgJ2Rvd24gYXJyb3cnLCAnc3BhY2UnIGFuZCAnZW50ZXInLlxuICAgICAgICBpZiAoWydBcnJvd0Rvd24nLCAnQXJyb3dVcCcsICcgJywgJ0VudGVyJ10uaW5jbHVkZXMoZXZlbnQua2V5KSkge1xuICAgICAgICAgIC8vIFByZXZlbnRzIHRoZSBwYWdlIGZyb20gc2Nyb2xsaW5nIGRvd24gd2hlbiBwcmVzc2luZyBzcGFjZS5cbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoWydBcnJvd0Rvd24nLCAnQXJyb3dVcCcsICcgJywgJ1RhYiddLmluY2x1ZGVzKGV2ZW50LmtleSkpIHtcbiAgICAgICAgICAvLyBQcmV2ZW50cyB0aGUgcGFnZSBmcm9tIHNjcm9sbGluZyBkb3duIHdoZW4gcHJlc3Npbmc6ICd1cCBhcnJvdycsICdkb3duIGFycm93JywgJ3NwYWNlJyBhbmQgJ3RhYicuXG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKGV2ZW50LmtleSkge1xuICAgICAgICAgIC8vIChDYXNlcy1CNSkgUGFuZWwgaXMgb3BlbiBhbmQgY2xpY2sgdGhlIEVzY2FwZSBrZXkuXG4gICAgICAgICAgLy8gKENhc2VzLUI2KSBQYW5lbCBpcyBvcGVuIGFuZCBjbGljayB0aGUgVGFiIGtleS5cbiAgICAgICAgICBjYXNlICdFc2NhcGUnOlxuICAgICAgICAgIGNhc2UgJ1RhYic6XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdBcnJvd0Rvd24nOlxuICAgICAgICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgICAgICAgICAgLy8gTW92aW5nIHRoZSBjdXJzb3IgbWFya2VyLlxuICAgICAgICAgICAgdGhpcy5tYXJrZWRPcHRpb24gPSB0aGlzLm1vdmluZ01hcmtlZE9wdGlvbihldmVudC5rZXkgPT09ICdBcnJvd0Rvd24nLCB0aGlzLm1hcmtlZE9wdGlvbik7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgLy8gKENhc2VzLUI3KSBQYW5lbCBpcyBvcGVuIGFuZCBjbGljayB0aGUgRW50ZXIga2V5LlxuICAgICAgICAgIGNhc2UgJ0VudGVyJzpcbiAgICAgICAgICAgIGlmICh0aGlzLm1hcmtlZE9wdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIC8vIFNlbGVjdHMgdGhlIGVsZW1lbnQgb2YgdGhlIGN1cnJlbnQgbWFya2VyLlxuICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk9wdGlvbkVsZW1lbnQodGhpcy5tYXJrZWRPcHRpb24pO1xuICAgICAgICAgICAgICAvLyBBbmQgaWYgbm90IG11bHRpcGxlLCB0aGVuIGNsb3NpbmcgdGhlIHBhbmVsLlxuICAgICAgICAgICAgICBpZiAoIXRoaXMubXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKiBQcm9jZXNzaW5nIHRoZSBvcHRpb24gc2VsZWN0ZWQgYnkgdGhlIHVzZXIuICovXG4gIHB1YmxpYyBzZWxlY3Rpb25PcHRpb25FbGVtZW50KGFkZE9wdGlvbjogR2xuT3B0aW9uQ29tcG9uZW50IHwgbnVsbCk6IHZvaWQge1xuICAgIGNvbnN0IG5ld09wdGlvbnMgPSBhZGRPcHRpb24gIT09IG51bGwgPyBbYWRkT3B0aW9uXSA6IFtdO1xuICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJiBuZXdPcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHJlbW92ZWQ6IEdsbk9wdGlvbkNvbXBvbmVudFtdID0gW107XG4gICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xuICAgICAgICAvLyBXaGljaCBlbGVtZW50cyBvZiBhcnJheSBcInRoaXMuc2VsZWN0ZWRPcHRpb25zXCIgYXJlIGluY2x1ZGVkIGluIGFycmF5IFwiYWRkT3B0aW9uc1wiLlxuICAgICAgICByZW1vdmVkLnB1c2goLi4uQXJyYXlVdGlsLmluY2x1ZGU8R2xuT3B0aW9uQ29tcG9uZW50Pih0aGlzLnNlbGVjdGVkT3B0aW9ucywgbmV3T3B0aW9ucykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gV2hpY2ggZWxlbWVudHMgb2YgYXJyYXkgXCJ0aGlzLnNlbGVjdGVkT3B0aW9uc1wiIGFyZSBub3QgaW5jbHVkZWQgaW4gYXJyYXkgXCJhZGRPcHRpb25zXCIuXG4gICAgICAgIHJlbW92ZWQucHVzaCguLi5BcnJheVV0aWwudW5pbmNsdWRlPEdsbk9wdGlvbkNvbXBvbmVudD4odGhpcy5zZWxlY3RlZE9wdGlvbnMsIG5ld09wdGlvbnMpKTtcbiAgICAgIH1cbiAgICAgIC8vIFdoaWNoIGVsZW1lbnRzIG9mIGFycmF5IFwiYWRkT3B0aW9uc1wiIGFyZSBub3QgaW5jbHVkZWQgaW4gYXJyYXkgXCJ0aGlzLnNlbGVjdGVkT3B0aW9uc1wiLlxuICAgICAgY29uc3QgYWRkZWQgPSBBcnJheVV0aWwudW5pbmNsdWRlPEdsbk9wdGlvbkNvbXBvbmVudD4obmV3T3B0aW9ucywgdGhpcy5zZWxlY3RlZE9wdGlvbnMpO1xuICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZE9wdGlvbnMoYWRkZWQsIHJlbW92ZWQsIHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhZGRPcHRpb24ob3B0aW9uOiBHbG5PcHRpb25Db21wb25lbnQgfCBudWxsKTogdm9pZCB7XG4gICAgaWYgKG9wdGlvbiAmJiB0aGlzLnNlbGVjdGVkT3B0aW9ucy5pbmRleE9mKG9wdGlvbikgPT09IC0xKSB7XG4gICAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkT3B0aW9ucyhbb3B0aW9uXSwgW10sIHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkZWxldGVPcHRpb24ob3B0aW9uOiBHbG5PcHRpb25Db21wb25lbnQgfCBudWxsKTogdm9pZCB7XG4gICAgaWYgKG9wdGlvbiAmJiB0aGlzLnNlbGVjdGVkT3B0aW9ucy5pbmRleE9mKG9wdGlvbikgPiAtMSkge1xuICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZE9wdGlvbnMoW10sIFtvcHRpb25dLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICAvLyAqKiBQcml2YXRlIEFQSSAqKlxuXG4gIHByaXZhdGUgdXBkYXRlU2VsZWN0ZWRPcHRpb25zKGFkZGVkOiBHbG5PcHRpb25Db21wb25lbnRbXSwgcmVtb3ZlZDogR2xuT3B0aW9uQ29tcG9uZW50W10sIGlzRW1pdDogYm9vbGVhbik6IHVua25vd25bXSB7XG4gICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMgPSB0aGlzLm1lcmdlT3B0aW9ucyh0aGlzLnNlbGVjdGVkT3B0aW9ucywgYWRkZWQsIHJlbW92ZWQpO1xuXG4gICAgY29uc3QgdmFsdWVzID0gR2xuT3B0aW9uVXRpbC5nZXRWYWx1ZXModGhpcy5zZWxlY3RlZE9wdGlvbnMpO1xuICAgIGNvbnN0IHZhbHVlID0gdmFsdWVzLmxlbmd0aCA+IDAgPyB2YWx1ZXNbMF0gOiBudWxsO1xuICAgIHRoaXMudXBkYXRlVmFsdWVEYXRhQW5kSXNGaWxsZWRBbmRWYWxpZGl0eSh0aGlzLm11bHRpcGxlID8gdmFsdWVzIDogdmFsdWUpO1xuICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgaWYgKGlzRW1pdCkge1xuICAgICAgdGhpcy5zZWxlY3RlZC5lbWl0KHsgdmFsdWU6ICF0aGlzLm11bHRpcGxlID8gdmFsdWUgOiBudWxsLCB2YWx1ZXM6IHRoaXMubXVsdGlwbGUgPyB2YWx1ZXMgOiBbXSwgY2hhbmdlOiB7IGFkZGVkLCByZW1vdmVkIH0gfSk7XG4gICAgfVxuICAgIC8vIFVwZGF0ZSB0aGUgcG9zaXRpb24gb25jZSB0aGUgem9uZSBpcyBzdGFibGUgc28gdGhhdCB0aGUgb3ZlcmxheSB3aWxsIGJlIGZ1bGx5IHJlbmRlcmVkLlxuICAgIHRoaXMubmdab25lLm9uU3RhYmxlLnBpcGUodGFrZSgxKSkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIHRoaXMuY29ubmVjdGVkT3ZlcmxheS5vdmVybGF5UmVmLnVwZGF0ZVBvc2l0aW9uKCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxuXG4gIHByaXZhdGUgbWVyZ2VPcHRpb25zKHNlbGVjdGVkOiBHbG5PcHRpb25Db21wb25lbnRbXSwgYWRkZWQ6IEdsbk9wdGlvbkNvbXBvbmVudFtdLCByZW1vdmVkOiBHbG5PcHRpb25Db21wb25lbnRbXSk6IEdsbk9wdGlvbkNvbXBvbmVudFtdIHtcbiAgICBHbG5PcHRpb25VdGlsLnNldFNlbGVjdGVkKHJlbW92ZWQsIGZhbHNlKTtcbiAgICBjb25zdCBjdXJyZW50T3B0aW9ucyA9IEFycmF5VXRpbC5kZWxldGU8R2xuT3B0aW9uQ29tcG9uZW50PihzZWxlY3RlZCwgcmVtb3ZlZCk7XG4gICAgR2xuT3B0aW9uVXRpbC5zZXRTZWxlY3RlZChhZGRlZCwgdHJ1ZSk7XG4gICAgY29uc3QgcmVzdWx0T3B0aW9ucyA9IGN1cnJlbnRPcHRpb25zLmNvbmNhdChhZGRlZCk7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5maWx0ZXIoKG9wdGlvbikgPT4gcmVzdWx0T3B0aW9ucy5pbmNsdWRlcyhvcHRpb24pKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0SGVpZ2h0KHZhbHVlOiBFbGVtZW50UmVmPEhUTUxFbGVtZW50PiB8IG51bGwpOiBudW1iZXIge1xuICAgIHJldHVybiB2YWx1ZSA/IE51bWJlcihnZXRDb21wdXRlZFN0eWxlKHZhbHVlLm5hdGl2ZUVsZW1lbnQpLmdldFByb3BlcnR5VmFsdWUoJ2hlaWdodCcpLnJlcGxhY2UoJ3B4JywgJycpKSA6IDA7XG4gIH1cbiAgLyoqIERlZmluZSB0aGUgXCJUcmFuc2xhdGVZXCIgcGFyYW1ldGVyIHRvIGNvcnJlY3RseSBvcGVuIG9yIGNsb3NlLiAqL1xuICBwcml2YXRlIGdldFRyYW5zbGF0ZVkodHJpZ2dlclJlY3Q6IERPTVJlY3QgfCBudWxsLCBwYW5lbEhlaWdodDogbnVtYmVyLCBzY3JlZW5IZWlnaHQ6IG51bWJlcik6IHN0cmluZyB8IG51bGwge1xuICAgIGxldCByZXN1bHQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgIGlmIChwYW5lbEhlaWdodCA+IDAgJiYgISF0cmlnZ2VyUmVjdCAmJiB0cmlnZ2VyUmVjdC50b3AgPiAwICYmIHRyaWdnZXJSZWN0LmhlaWdodCA+IDAgJiYgc2NyZWVuSGVpZ2h0ID4gMCkge1xuICAgICAgY29uc3QgdmFsdWUgPSB0cmlnZ2VyUmVjdC50b3AgKyB0cmlnZ2VyUmVjdC5oZWlnaHQgKyBwYW5lbEhlaWdodDtcbiAgICAgIGNvbnN0IGRlbHRhID0gU3RyaW5nKE51bWJlclV0aWwucm91bmRUbzEwMCgocGFuZWxIZWlnaHQgLSAwLjYgKiBwYW5lbEhlaWdodCkgLyAyKSkuY29uY2F0KCdweCcpO1xuICAgICAgcmVzdWx0ID0gKHZhbHVlIDwgc2NyZWVuSGVpZ2h0ID8gJy0nIDogJycpICsgZGVsdGE7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqIFVwZGF0ZSB0aGUgZGF0YSB2YWx1ZSwgdGhlIHNpZ24gb2YgZnVsbG5lc3MgYW5kIHBlcmZvcm0gdmFsaWRhdGlvbi4gKi9cbiAgcHJpdmF0ZSB1cGRhdGVWYWx1ZURhdGFBbmRJc0ZpbGxlZEFuZFZhbGlkaXR5KG5ld1ZhbHVlRGF0YTogdW5rbm93biB8IHVua25vd25bXSB8IG51bGwpOiB2b2lkIHtcbiAgICB0aGlzLnZhbHVlRGF0YSA9IG5ld1ZhbHVlRGF0YTtcbiAgICB0aGlzLmlzRmlsbGVkID0gIXRoaXMuaXNFbXB0eSgpICYmIHRoaXMuc2VsZWN0ZWRPcHRpb25zLmxlbmd0aCA+IDA7XG4gICAgLy8gQ2FsbGluZyB0aGUgdmFsaWRhdGlvbiBtZXRob2QgZm9yIHRoZSBuZXcgdmFsdWUuXG4gICAgdGhpcy5vbkNoYW5nZSh0aGlzLnZhbHVlRGF0YSk7XG4gIH1cbiAgLyoqIE1vdmUgdGhlIG1hcmtlZCBvcHRpb24gdG8gdGhlIG5leHQgb3IgcHJldmlvdXMgb25lLiAqL1xuICBwcml2YXRlIG1vdmluZ01hcmtlZE9wdGlvbihpc05leHQ6IGJvb2xlYW4sIG1hcmtlZE9wdGlvbjogR2xuT3B0aW9uQ29tcG9uZW50IHwgbnVsbCk6IEdsbk9wdGlvbkNvbXBvbmVudCB8IG51bGwge1xuICAgIGxldCByZXN1bHQ6IEdsbk9wdGlvbkNvbXBvbmVudCB8IG51bGwgPSBudWxsO1xuICAgIGlmICh0aGlzLm9wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgbGV0IGluZGV4T2xkID0gLTE7XG4gICAgICBpZiAobWFya2VkT3B0aW9uICE9IG51bGwpIHtcbiAgICAgICAgaW5kZXhPbGQgPSB0aGlzLm9wdGlvbnMuaW5kZXhPZihtYXJrZWRPcHRpb24pO1xuICAgICAgICBtYXJrZWRPcHRpb24uc2V0TWFya2VkKGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1heEluZGV4ID0gdGhpcy5vcHRpb25zLmxlbmd0aCAtIDE7XG4gICAgICBjb25zdCBpbmRleCA9IGlzTmV4dCA/IChpbmRleE9sZCA8IG1heEluZGV4ID8gaW5kZXhPbGQgKyAxIDogMCkgOiBpbmRleE9sZCA+IDAgPyBpbmRleE9sZCAtIDEgOiBtYXhJbmRleDtcbiAgICAgIHJlc3VsdCA9IHRoaXMub3B0aW9uc1tpbmRleF07XG4gICAgICByZXN1bHQuc2V0TWFya2VkKHRydWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIC8qKiBHZXQgdGhlIGhlaWdodCBvZiB0aGUgb3B0aW9uLiAqL1xuICBwcml2YXRlIGdldE9wdGlvbkhlaWd0aChvcHRpb25zOiBHbG5PcHRpb25Db21wb25lbnRbXSk6IG51bWJlciB7XG4gICAgY29uc3QgdmFsdWU6IG51bWJlcltdID0gW107XG4gICAgY29uc3QgY291bnQ6IG51bWJlcltdID0gW107XG4gICAgbGV0IGNvdW50QnlJbmRleCA9IC0xO1xuICAgIGxldCByZXN1bHRJbmRleCA9IC0xO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGggJiYgY291bnRCeUluZGV4IDwgNDsgaSsrKSB7XG4gICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmdldEhlaWdodChvcHRpb25zW2ldLmhvc3RSZWYpO1xuICAgICAgbGV0IGluZGV4ID0gdmFsdWUuaW5kZXhPZihoZWlnaHQpO1xuICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICB2YWx1ZS5wdXNoKGhlaWdodCk7XG4gICAgICAgIGNvdW50LnB1c2goMSk7XG4gICAgICAgIGluZGV4ID0gdmFsdWUubGVuZ3RoIC0gMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvdW50W2luZGV4XSsrO1xuICAgICAgfVxuICAgICAgaWYgKGNvdW50W2luZGV4XSA+IGNvdW50QnlJbmRleCkge1xuICAgICAgICBjb3VudEJ5SW5kZXggPSBjb3VudFtpbmRleF07XG4gICAgICAgIHJlc3VsdEluZGV4ID0gaW5kZXg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRJbmRleCA+IC0xID8gdmFsdWVbcmVzdWx0SW5kZXhdIDogMDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0UG9zaXRpb24odmFsdWU6IHN0cmluZyB8IG51bGwpOiBIb3Jpem9udGFsQ29ubmVjdGlvblBvcyB7XG4gICAgcmV0dXJuICh2YWx1ZSAmJiBbJ3N0YXJ0JywgJ2NlbnRlcicsICdlbmQnXS5pbmRleE9mKHZhbHVlKSA+IC0xID8gdmFsdWUgOiAnc3RhcnQnKSBhcyBIb3Jpem9udGFsQ29ubmVjdGlvblBvcztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0UG9zaXRpb25MaXN0KHBvc2l0aW9uOiBzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsKTogQ29ubmVjdGVkUG9zaXRpb25bXSB7XG4gICAgY29uc3QgaG9yaXpvbnRhbEFsaWdubWVudDogSG9yaXpvbnRhbENvbm5lY3Rpb25Qb3MgPSB0aGlzLmdldFBvc2l0aW9uKHBvc2l0aW9uIHx8IG51bGwpO1xuICAgIHJldHVybiBbXG4gICAgICB7IG9yaWdpblg6IGhvcml6b250YWxBbGlnbm1lbnQsIG9yaWdpblk6ICdib3R0b20nLCBvdmVybGF5WDogaG9yaXpvbnRhbEFsaWdubWVudCwgb3ZlcmxheVk6ICd0b3AnIH0sXG4gICAgICB7IG9yaWdpblg6IGhvcml6b250YWxBbGlnbm1lbnQsIG9yaWdpblk6ICd0b3AnLCBvdmVybGF5WDogaG9yaXpvbnRhbEFsaWdubWVudCwgb3ZlcmxheVk6ICdib3R0b20nLCBvZmZzZXRZOiAtNSB9LFxuICAgIF07XG4gIH1cbn1cbiIsIjxuZy1jb250YWluZXIgW2Zvcm1Hcm91cF09XCJmb3JtR3JvdXBcIj5cbiAgPGRpdiBnbG5zbC13cmFwXG4gICAgY2xhc3M9XCJnbG5zbC13cmFwXCJcbiAgICBbZ2xuRnJhbWVFeHRlcmlvcklucHV0XT1cImV4dGVyaW9yIHx8IGN1cnJDb25maWc/LmV4dGVyaW9yXCJcbiAgICAjZ2xuRnJhbWVFeHRlcmlvcklucHV0PVwiZ2xuRnJhbWVFeHRlcmlvcklucHV0XCJcbiAgICBbZ2xuRnJhbWVFeHRlcmlvcklucHV0RWxlbWVudFJlZl09XCJob3N0UmVmXCJcbiAgICAoZ2xuRnJhbWVFeHRlcmlvcklucHV0Q2hhbmdlKT1cImdsbkZyYW1lU2l6ZS51cGRhdGVQYWRkaW5nVmVyQW5kSG9yKClcIlxuICAgIGNka092ZXJsYXlPcmlnaW5cbiAgICAjb3JpZ2luPVwiY2RrT3ZlcmxheU9yaWdpblwiXG4gICAgI3RyaWdnZXJSZWZcbiAgICAoY2xpY2spPVwiIWRpc2FibGVkID8gdG9nZ2xlKCkgOiBudWxsXCI+XG4gICAgPGdsbi1mcmFtZSAjZnJhbWVSZWZcbiAgICAgIFtuZ0NsYXNzXT1cIlsoaXNQYW5lbE9wZW4gPyAnaXMtb3BlbicgOiAnJyldXCJcbiAgICAgIFtjb25maWddPVwiY3VyckNvbmZpZ1wiXG4gICAgICBbZXh0ZXJpb3JdPVwiZ2xuRnJhbWVFeHRlcmlvcklucHV0LmV4dGVyaW9yXCJcbiAgICAgIFtpc0Rpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgIFtpc0Vycm9yXT1cIiEhZXJyb3JzIHx8IGVycm9yXCJcbiAgICAgIFtpc0ZpbGxlZF09XCJpc0ZpbGxlZFwiXG4gICAgICBbaXNMYWJlbFNocmlua109XCJsYWJlbFNocmluayB8fCBjdXJyQ29uZmlnPy5pc0xhYmVsU2hyaW5rXCJcbiAgICAgIFtpc05vQW5pbWF0aW9uXT1cIm5vQW5pbWF0aW9uIHx8IGN1cnJDb25maWc/LmlzTm9BbmltYXRpb24gfHwgaXNXcml0ZVZhbHVlSW5pdFwiXG4gICAgICBbaXNOb0xhYmVsXT1cIm5vTGFiZWwgfHwgY3VyckNvbmZpZz8uaXNOb0xhYmVsXCJcbiAgICAgIFtpc1JlcXVpcmVkXT1cInJlcXVpcmVkXCJcbiAgICAgIFtsYWJlbF09XCJsYWJlbFwiXG4gICAgICBbZ2xuRnJhbWVTaXplXT1cImZyYW1lU2l6ZSB8fCBjdXJyQ29uZmlnPy5mcmFtZVNpemVcIlxuICAgICAgI2dsbkZyYW1lU2l6ZT1cImdsbkZyYW1lU2l6ZVwiXG4gICAgICBbZ2xuRnJhbWVTaXplRWxlbWVudFJlZl09XCJob3N0UmVmXCJcbiAgICAgIFtnbG5GcmFtZVNpemVWYWx1ZV09XCJjdXJyQ29uZmlnPy5mcmFtZVNpemVWYWx1ZSB8fCBmcmFtZVNpemVEZWZhdWx0XCJcbiAgICAgIFtnbG5GcmFtZVNpemVMYWJlbFBkXT1cImN1cnJDb25maWc/LmxhYmVsUGRcIlxuICAgICAgW2dsbkZyYW1lU2l6ZVByZXBhcmVdPVwiZ2xuRnJhbWVFeHRlcmlvcklucHV0XCJcbiAgICAgIChnbG5GcmFtZVNpemVDaGFuZ2UpPVwiZnJhbWVTaXplQ2hhbmdlKCRldmVudClcIlxuICAgICAgZ2xuRnJhbWVPcm5hbWVudFxuICAgICAgW2dsbkZyYW1lT3JuYW1lbnRMZkFsaWduXT1cIm9ybmFtTGZBbGlnbiB8fCBjdXJyQ29uZmlnPy5vcm5hbUxmQWxpZ25cIlxuICAgICAgW2dsbkZyYW1lT3JuYW1lbnRSZ0FsaWduXT1cIm9ybmFtUmdBbGlnbiB8fCBjdXJyQ29uZmlnPy5vcm5hbVJnQWxpZ25cIlxuICAgICAgW2dsbkZyYW1lT3JuYW1lbnRQYXRoXT1cIicvZGl2ezB9J1wiXG4gICAgICBbYXR0ci5vcG5dPVwiaXNQYW5lbE9wZW4gPyAnJyA6IG51bGxcIlxuICAgICAgW2F0dHIudGFiaW5kZXhdPVwiIWRpc2FibGVkID8gdGFiSW5kZXggOiBudWxsXCJcbiAgICAgIChmb2N1cyk9XCJkb0ZvY3VzKClcIlxuICAgICAgKGJsdXIpPVwiZG9CbHVyKClcIlxuICAgICAgKGtleWRvd24pPVwiZnJhbWVLZXlkb3duKCRldmVudClcIj5cblxuICAgICAgPHNwYW4gZ2xuZnItb3JuLWxmXG4gICAgICAgIGNsYXNzPVwiZ2xuLW9ybmFtLWxmXCI+XG4gICAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIltnbG4tb3JuLWxmXVwiPjwvbmctY29udGVudD5cbiAgICAgIDwvc3Bhbj5cblxuICAgICAgPHNwYW4gZ2xuZnItb3JuLXJnXG4gICAgICAgIGNsYXNzPVwiZ2xuLW9ybmFtLXJnXCI+XG4gICAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIltnbG4tb3JuLXJnXVwiPjwvbmctY29udGVudD5cblxuICAgICAgICA8ZGl2ICpuZ0lmPVwiIWdldEJvb2xlYW4oaXNOb0ljb24pICYmICFjdXJyQ29uZmlnPy5pc05vSWNvblwiXG4gICAgICAgICAgZ2xuc2wtcmhvbWJcbiAgICAgICAgICBbYXR0ci5vcG5dPVwiaXNQYW5lbE9wZW4gPyAnJyA6IG51bGxcIlxuICAgICAgICAgIFthdHRyLm5vQW5tXT1cIm5vQW5pbWF0aW9uID8gJycgOiBudWxsXCJcbiAgICAgICAgICBbbmdDbGFzc109XCJbJ2dsbnNsLXJob21iJywgKGlzUGFuZWxPcGVuID8gJ2lzLW9wZW4nIDogJycpXVwiXG4gICAgICAgICAgZm9jdXNhYmxlPVwiZmFsc2VcIlxuICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvc3Bhbj5cblxuICAgICAgPGRpdiBbbmdDbGFzc109XCJbKHJlYWRPbmx5ID8gJ2dsbi1yZWFkb25seScgOiAnJyldXCJcbiAgICAgICAgZ2xuZnItcGQtdmVyXG4gICAgICAgIGdsbmZyLXBkLWhvclxuICAgICAgICBnbG5mci1lbGVtXG4gICAgICAgIFthdHRyLmlkXT1cImlkICsgJy1lbGVtJ1wiPlxuXG4gICAgICAgIDxuZy1jb250YWluZXIgW25nU3dpdGNoXT1cImlzRmlsbGVkXCI+XG4gICAgICAgICAgPGRpdiAqbmdTd2l0Y2hDYXNlPVwiZmFsc2VcIj4mWmVyb1dpZHRoU3BhY2U7PC9kaXY+XG5cbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1N3aXRjaENhc2U9XCJ0cnVlXCJcbiAgICAgICAgICAgIFtuZ1N3aXRjaF09XCIhIWN1c3RvbVRyaWdnZXJcIj5cblxuICAgICAgICAgICAgPG5nLWNvbnRlbnQgKm5nU3dpdGNoQ2FzZT1cInRydWVcIlxuICAgICAgICAgICAgICBzZWxlY3Q9XCJnbG4tc2VsZWN0LXRyaWdnZXJcIj5cbiAgICAgICAgICAgIDwvbmctY29udGVudD5cblxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiZmFsc2VcIj5cbiAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICAgICAgICpuZ0Zvcj1cImxldCBvcHRpb24gb2Ygc2VsZWN0ZWRPcHRpb25zOyBjb3VudCBhcyBjb3VudFZhbDsgbGFzdCBhcyBpc0xhc3Q7IHRyYWNrQnk6IHRyYWNrQnlPcHRpb247XCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gW2lubmVySFRNTF09XCJvcHRpb24uZ2V0VHJ1c3RIdG1sKClcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJjb3VudFZhbCA+IDEgJiYgIWlzTGFzdFwiPiwgPC9zcGFuPlxuICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgPC9kaXY+XG5cbiAgICA8L2dsbi1mcmFtZT5cbiAgPC9kaXY+XG48L25nLWNvbnRhaW5lcj5cblxuPGdsbi1oaW50LW9yLWVycm9yICpuZ0lmPVwiISFoZWxwZXJUZXh0XCJcbiAgW3RleHRdPVwiaGVscGVyVGV4dFwiXG4gIFtpc0Vycm9yXT1cIiEhZXJyb3JzIHx8IGVycm9yXCJcbiAgW2lzRm9jdXNlZF09XCJpc0ZvY3VzZWRcIlxuICBbaXNEaXNhYmxlZF09XCJkaXNhYmxlZFwiPlxuPC9nbG4taGludC1vci1lcnJvcj5cblxuPG5nLXRlbXBsYXRlIGNka0Nvbm5lY3RlZE92ZXJsYXlcbiAgW2Nka0Nvbm5lY3RlZE92ZXJsYXlCYWNrZHJvcENsYXNzXT1cImJhY2tkcm9wQ2xhc3NWYWwgfHwgJ2Nkay1vdmVybGF5LXRyYW5zcGFyZW50LWJhY2tkcm9wJ1wiXG4gIGNka0Nvbm5lY3RlZE92ZXJsYXlIYXNCYWNrZHJvcFxuICBbY2RrQ29ubmVjdGVkT3ZlcmxheURpc2FibGVDbG9zZV09XCJ0cnVlXCJcbiAgY2RrQ29ubmVjdGVkT3ZlcmxheUxvY2tQb3NpdGlvblxuICBbY2RrQ29ubmVjdGVkT3ZlcmxheU1pbldpZHRoXT1cInRyaWdnZXJSZWN0Py53aWR0aCFcIlxuICBbY2RrQ29ubmVjdGVkT3ZlcmxheU9wZW5dPVwiaXNQYW5lbE9wZW4gfHwgaGFzUGFuZWxBbmltYXRpb25cIlxuICBbY2RrQ29ubmVjdGVkT3ZlcmxheU9yaWdpbl09XCJvcmlnaW5cIlxuICBbY2RrQ29ubmVjdGVkT3ZlcmxheVBhbmVsQ2xhc3NdPVwib3ZlcmxheVBhbmVsQ2xhc3NcIlxuICBbY2RrQ29ubmVjdGVkT3ZlcmxheVBvc2l0aW9uc109XCJwb3NpdGlvbkxpc3RcIlxuICBbY2RrQ29ubmVjdGVkT3ZlcmxheVNjcm9sbFN0cmF0ZWd5XT1cInNjcm9sbFN0cmF0ZWd5XCJcbiAgKGJhY2tkcm9wQ2xpY2spPVwiYmFja2Ryb3BDbGljaygpXCJcbiAgKGF0dGFjaCk9XCJhdHRhY2goKVwiXG4gIChkZXRhY2gpPVwiaXNQYW5lbE9wZW4gPyBjbG9zZSgpIDogbnVsbFwiPlxuXG4gIDxkaXYgZ2xuc2xwLXdyYXBcbiAgICBjbGFzcz1cImdsbi1zZWxlY3QtcGFuZWwtd3JhcFwiXG4gICAgW25nQ2xhc3NdPVwiWyhub0FuaW1hdGlvbiA/ICdnbG4tbm8tYW5pbWF0aW9uJyA6ICcnKV1cIlxuICAgIFthdHRyLm5vQW5tXT1cIm5vQW5pbWF0aW9uID8gJycgOiBudWxsXCJcbiAgICAoYW5pbWF0aW9uZW5kKT1cImhhc1BhbmVsQW5pbWF0aW9uID0gaXNQYW5lbE9wZW5cIlxuICAgIChhbmltYXRpb25jYW5jZWwpPVwiaGFzUGFuZWxBbmltYXRpb24gPSBpc1BhbmVsT3BlblwiPlxuICAgIDxkaXYgZ2xuc2wtcGFuZWxcbiAgICAgIGNsYXNzPVwiZ2xuLXNlbGVjdC1wYW5lbFwiXG4gICAgICBbbmdDbGFzc109XCJnZXRQYW5lbENsYXNzKHBhbmVsQ2xhc3NMaXN0KVwiXG4gICAgICByb2xlPVwibGlzdGJveFwiXG4gICAgICBbYXR0ci5pZF09XCJpZCArICctcGFuZWwnXCJcbiAgICAgIFthdHRyLmFyaWEtbXVsdGlzZWxlY3RhYmxlXT1cIm11bHRpcGxlXCJcbiAgICAgIChmb2N1cyk9XCJkb0ZvY3VzT25QYW5lbCgpXCI+XG4gICAgICA8bmctY29udGVudCBzZWxlY3Q9XCI6bm90KGdsbi1zZWxlY3QtdHJpZ2dlcilcIj48L25nLWNvbnRlbnQ+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuXG48L25nLXRlbXBsYXRlPiJdfQ==
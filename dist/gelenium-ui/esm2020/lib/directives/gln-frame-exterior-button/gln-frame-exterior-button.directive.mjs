import { Directive, EventEmitter, Input, Output } from '@angular/core';
import { GlnButtonExterior, GlnButtonExteriorUtil } from '../../gln-button/gln-button-exterior.interface';
import { HtmlElemUtil } from '../../_utils/html-elem.util';
import { NumberUtil } from '../../_utils/number.util';
import * as i0 from "@angular/core";
export class GlnFrameExteriorButtonDirective {
    constructor(hostRef, renderer) {
        this.hostRef = hostRef;
        this.renderer = renderer;
        this.glnFrameExteriorButtonChange = new EventEmitter();
        this.exterior = null;
        this.elementRef = this.hostRef;
        // ** Implementation of the GlnSizePrepareData interface. (start) **
        this.getExterior = () => {
            return this.glnFrameExteriorButton || null;
        };
        // eslint-disable-next-line @typescript-eslint/no-unused-vars
        this.getBorderRadius = (frameSizeValue, lineHeight) => {
            const borderRadiusRatio = 0.1;
            return (frameSizeValue > 0 ? NumberUtil.roundTo100(borderRadiusRatio * frameSizeValue) : 0) + 'px';
        };
        // eslint-disable-next-line @typescript-eslint/no-unused-vars
        this.getPaddingHor = (frameSizeValue, lineHeight) => {
            const ratio = this.exterior === GlnButtonExterior.contained ? 0.3636 : this.exterior === GlnButtonExterior.outlined ? 0.3409 : 0.2045;
            const value = frameSizeValue > 0 ? NumberUtil.roundTo100(ratio * frameSizeValue) : null;
            return value !== null ? { left: value, right: value } : null;
        };
        this.getPaddingVer = (frameSizeValue, lineHeight) => {
            const param = frameSizeValue > 0 && lineHeight > 0 ? (frameSizeValue - lineHeight) / 2 : null;
            const value = param === null ? null : this.exterior === GlnButtonExterior.outlined ? param - 1 : param;
            return value !== null ? { top: value, bottom: value } : null;
        };
    }
    ngOnChanges(changes) {
        if (changes['glnFrameExteriorButtonElementRef']) {
            this.elementRef = this.glnFrameExteriorButtonElementRef || this.hostRef;
        }
        if (changes['glnFrameExteriorButton']) {
            const exteriorInp = GlnButtonExteriorUtil.convert(this.glnFrameExteriorButton || null);
            const exterior = GlnButtonExteriorUtil.create(exteriorInp);
            if (this.exterior !== exterior) {
                this.exterior = exterior;
                this.settingExterior(this.renderer, this.elementRef, exterior);
            }
            this.glnFrameExteriorButtonChange.emit();
        }
    }
    // ** Implementation of the GlnSizePrepareData interface. (finish) **
    // ** Private API **
    settingExterior(renderer, elem, exterior) {
        HtmlElemUtil.setClass(renderer, elem, 'glnbt-text', GlnButtonExteriorUtil.isText(exterior));
        HtmlElemUtil.setAttr(renderer, elem, 'ext-t', GlnButtonExteriorUtil.isText(exterior) ? '' : null);
        HtmlElemUtil.setClass(renderer, elem, 'glnbt-contained', GlnButtonExteriorUtil.isContained(exterior));
        HtmlElemUtil.setAttr(renderer, elem, 'ext-c', GlnButtonExteriorUtil.isContained(exterior) ? '' : null);
        HtmlElemUtil.setClass(renderer, elem, 'glnbt-outlined', GlnButtonExteriorUtil.isOutlined(exterior));
        HtmlElemUtil.setAttr(renderer, elem, 'ext-o', GlnButtonExteriorUtil.isOutlined(exterior) ? '' : null);
    }
}
GlnFrameExteriorButtonDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.1.2", ngImport: i0, type: GlnFrameExteriorButtonDirective, deps: [{ token: i0.ElementRef }, { token: i0.Renderer2 }], target: i0.ɵɵFactoryTarget.Directive });
GlnFrameExteriorButtonDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "14.0.0", version: "14.1.2", type: GlnFrameExteriorButtonDirective, selector: "[glnFrameExteriorButton]", inputs: { glnFrameExteriorButton: "glnFrameExteriorButton", glnFrameExteriorButtonElementRef: "glnFrameExteriorButtonElementRef" }, outputs: { glnFrameExteriorButtonChange: "glnFrameExteriorButtonChange" }, exportAs: ["glnFrameExteriorButton"], usesOnChanges: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.1.2", ngImport: i0, type: GlnFrameExteriorButtonDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[glnFrameExteriorButton]',
                    exportAs: 'glnFrameExteriorButton',
                }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.Renderer2 }]; }, propDecorators: { glnFrameExteriorButton: [{
                type: Input
            }], glnFrameExteriorButtonElementRef: [{
                type: Input
            }], glnFrameExteriorButtonChange: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2xuLWZyYW1lLWV4dGVyaW9yLWJ1dHRvbi5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9nZWxlbml1bS11aS9zcmMvbGliL2RpcmVjdGl2ZXMvZ2xuLWZyYW1lLWV4dGVyaW9yLWJ1dHRvbi9nbG4tZnJhbWUtZXh0ZXJpb3ItYnV0dG9uLmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFjLFlBQVksRUFBRSxLQUFLLEVBQWEsTUFBTSxFQUE0QixNQUFNLGVBQWUsQ0FBQztBQUV4SCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxnREFBZ0QsQ0FBQztBQU0xRyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDM0QsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLDBCQUEwQixDQUFDOztBQU10RCxNQUFNLE9BQU8sK0JBQStCO0lBWTFDLFlBQW9CLE9BQWdDLEVBQVUsUUFBbUI7UUFBN0QsWUFBTyxHQUFQLE9BQU8sQ0FBeUI7UUFBVSxhQUFRLEdBQVIsUUFBUSxDQUFXO1FBTHhFLGlDQUE0QixHQUF1QixJQUFJLFlBQVksRUFBRSxDQUFDO1FBRXhFLGFBQVEsR0FBNkIsSUFBSSxDQUFDO1FBQzFDLGVBQVUsR0FBNEIsSUFBSSxDQUFDLE9BQU8sQ0FBQztRQW1CMUQsb0VBQW9FO1FBRTdELGdCQUFXLEdBQUcsR0FBa0IsRUFBRTtZQUN2QyxPQUFPLElBQUksQ0FBQyxzQkFBc0IsSUFBSSxJQUFJLENBQUM7UUFDN0MsQ0FBQyxDQUFDO1FBQ0YsNkRBQTZEO1FBQ3RELG9CQUFlLEdBQUcsQ0FBQyxjQUFzQixFQUFFLFVBQWtCLEVBQWlCLEVBQUU7WUFDckYsTUFBTSxpQkFBaUIsR0FBRyxHQUFHLENBQUM7WUFDOUIsT0FBTyxDQUFDLGNBQWMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsaUJBQWlCLEdBQUcsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztRQUNyRyxDQUFDLENBQUM7UUFDRiw2REFBNkQ7UUFDdEQsa0JBQWEsR0FBRyxDQUFDLGNBQXNCLEVBQUUsVUFBa0IsRUFBb0MsRUFBRTtZQUN0RyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxLQUFLLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxLQUFLLGlCQUFpQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7WUFDdEksTUFBTSxLQUFLLEdBQUcsY0FBYyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEdBQUcsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztZQUN4RixPQUFPLEtBQUssS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztRQUMvRCxDQUFDLENBQUM7UUFFSyxrQkFBYSxHQUFHLENBQUMsY0FBc0IsRUFBRSxVQUFrQixFQUFvQyxFQUFFO1lBQ3RHLE1BQU0sS0FBSyxHQUFHLGNBQWMsR0FBRyxDQUFDLElBQUksVUFBVSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxjQUFjLEdBQUcsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7WUFDOUYsTUFBTSxLQUFLLEdBQUcsS0FBSyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxLQUFLLGlCQUFpQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1lBQ3ZHLE9BQU8sS0FBSyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO1FBQy9ELENBQUMsQ0FBQztJQXRDa0YsQ0FBQztJQUU5RSxXQUFXLENBQUMsT0FBc0I7UUFDdkMsSUFBSSxPQUFPLENBQUMsa0NBQWtDLENBQUMsRUFBRTtZQUMvQyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxnQ0FBZ0MsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDO1NBQ3pFO1FBQ0QsSUFBSSxPQUFPLENBQUMsd0JBQXdCLENBQUMsRUFBRTtZQUNyQyxNQUFNLFdBQVcsR0FBRyxxQkFBcUIsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLHNCQUFzQixJQUFJLElBQUksQ0FBQyxDQUFDO1lBQ3ZGLE1BQU0sUUFBUSxHQUFHLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUMzRCxJQUFJLElBQUksQ0FBQyxRQUFRLEtBQUssUUFBUSxFQUFFO2dCQUM5QixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztnQkFDekIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUUsUUFBUSxDQUFDLENBQUM7YUFDaEU7WUFDRCxJQUFJLENBQUMsNEJBQTRCLENBQUMsSUFBSSxFQUFFLENBQUM7U0FDMUM7SUFDSCxDQUFDO0lBeUJELHFFQUFxRTtJQUVyRSxvQkFBb0I7SUFFWixlQUFlLENBQUMsUUFBbUIsRUFBRSxJQUE2QixFQUFFLFFBQTJCO1FBQ3JHLFlBQVksQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUUscUJBQXFCLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFDNUYsWUFBWSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEcsWUFBWSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsSUFBSSxFQUFFLGlCQUFpQixFQUFFLHFCQUFxQixDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ3RHLFlBQVksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUscUJBQXFCLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3ZHLFlBQVksQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLElBQUksRUFBRSxnQkFBZ0IsRUFBRSxxQkFBcUIsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUNwRyxZQUFZLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLHFCQUFxQixDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN4RyxDQUFDOzs0SEEvRFUsK0JBQStCO2dIQUEvQiwrQkFBK0I7MkZBQS9CLCtCQUErQjtrQkFKM0MsU0FBUzttQkFBQztvQkFDVCxRQUFRLEVBQUUsMEJBQTBCO29CQUNwQyxRQUFRLEVBQUUsd0JBQXdCO2lCQUNuQzt5SEFHUSxzQkFBc0I7c0JBRDVCLEtBQUs7Z0JBR0MsZ0NBQWdDO3NCQUR0QyxLQUFLO2dCQUlHLDRCQUE0QjtzQkFEcEMsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpcmVjdGl2ZSwgRWxlbWVudFJlZiwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT25DaGFuZ2VzLCBPdXRwdXQsIFJlbmRlcmVyMiwgU2ltcGxlQ2hhbmdlcyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBHbG5CdXR0b25FeHRlcmlvciwgR2xuQnV0dG9uRXh0ZXJpb3JVdGlsIH0gZnJvbSAnLi4vLi4vZ2xuLWJ1dHRvbi9nbG4tYnV0dG9uLWV4dGVyaW9yLmludGVyZmFjZSc7XG5pbXBvcnQge1xuICBHbG5GcmFtZVNpemVQYWRkaW5nSG9yUmVzLFxuICBHbG5GcmFtZVNpemVQYWRkaW5nVmVyUmVzLFxuICBHbG5GcmFtZVNpemVQcmVwYXJlLFxufSBmcm9tICcuLi9nbG4tZnJhbWUtc2l6ZS9nbG4tZnJhbWUtc2l6ZS1wcmVwYXJlLmludGVyZmFjZSc7XG5pbXBvcnQgeyBIdG1sRWxlbVV0aWwgfSBmcm9tICcuLi8uLi9fdXRpbHMvaHRtbC1lbGVtLnV0aWwnO1xuaW1wb3J0IHsgTnVtYmVyVXRpbCB9IGZyb20gJy4uLy4uL191dGlscy9udW1iZXIudXRpbCc7XG5cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ1tnbG5GcmFtZUV4dGVyaW9yQnV0dG9uXScsXG4gIGV4cG9ydEFzOiAnZ2xuRnJhbWVFeHRlcmlvckJ1dHRvbicsXG59KVxuZXhwb3J0IGNsYXNzIEdsbkZyYW1lRXh0ZXJpb3JCdXR0b25EaXJlY3RpdmUgaW1wbGVtZW50cyBPbkNoYW5nZXMsIEdsbkZyYW1lU2l6ZVByZXBhcmUge1xuICBASW5wdXQoKVxuICBwdWJsaWMgZ2xuRnJhbWVFeHRlcmlvckJ1dHRvbjogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDsgLy8gR2xuQnV0dG9uRXh0ZXJpb3JUeXBlXG4gIEBJbnB1dCgpXG4gIHB1YmxpYyBnbG5GcmFtZUV4dGVyaW9yQnV0dG9uRWxlbWVudFJlZjogRWxlbWVudFJlZjxIVE1MRWxlbWVudD4gfCBudWxsIHwgdW5kZWZpbmVkO1xuXG4gIEBPdXRwdXQoKVxuICByZWFkb25seSBnbG5GcmFtZUV4dGVyaW9yQnV0dG9uQ2hhbmdlOiBFdmVudEVtaXR0ZXI8dm9pZD4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgcHVibGljIGV4dGVyaW9yOiBHbG5CdXR0b25FeHRlcmlvciB8IG51bGwgPSBudWxsO1xuICBwdWJsaWMgZWxlbWVudFJlZjogRWxlbWVudFJlZjxIVE1MRWxlbWVudD4gPSB0aGlzLmhvc3RSZWY7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBob3N0UmVmOiBFbGVtZW50UmVmPEhUTUxFbGVtZW50PiwgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyKSB7fVxuXG4gIHB1YmxpYyBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgaWYgKGNoYW5nZXNbJ2dsbkZyYW1lRXh0ZXJpb3JCdXR0b25FbGVtZW50UmVmJ10pIHtcbiAgICAgIHRoaXMuZWxlbWVudFJlZiA9IHRoaXMuZ2xuRnJhbWVFeHRlcmlvckJ1dHRvbkVsZW1lbnRSZWYgfHwgdGhpcy5ob3N0UmVmO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlc1snZ2xuRnJhbWVFeHRlcmlvckJ1dHRvbiddKSB7XG4gICAgICBjb25zdCBleHRlcmlvcklucCA9IEdsbkJ1dHRvbkV4dGVyaW9yVXRpbC5jb252ZXJ0KHRoaXMuZ2xuRnJhbWVFeHRlcmlvckJ1dHRvbiB8fCBudWxsKTtcbiAgICAgIGNvbnN0IGV4dGVyaW9yID0gR2xuQnV0dG9uRXh0ZXJpb3JVdGlsLmNyZWF0ZShleHRlcmlvcklucCk7XG4gICAgICBpZiAodGhpcy5leHRlcmlvciAhPT0gZXh0ZXJpb3IpIHtcbiAgICAgICAgdGhpcy5leHRlcmlvciA9IGV4dGVyaW9yO1xuICAgICAgICB0aGlzLnNldHRpbmdFeHRlcmlvcih0aGlzLnJlbmRlcmVyLCB0aGlzLmVsZW1lbnRSZWYsIGV4dGVyaW9yKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZ2xuRnJhbWVFeHRlcmlvckJ1dHRvbkNoYW5nZS5lbWl0KCk7XG4gICAgfVxuICB9XG5cbiAgLy8gKiogSW1wbGVtZW50YXRpb24gb2YgdGhlIEdsblNpemVQcmVwYXJlRGF0YSBpbnRlcmZhY2UuIChzdGFydCkgKipcblxuICBwdWJsaWMgZ2V0RXh0ZXJpb3IgPSAoKTogc3RyaW5nIHwgbnVsbCA9PiB7XG4gICAgcmV0dXJuIHRoaXMuZ2xuRnJhbWVFeHRlcmlvckJ1dHRvbiB8fCBudWxsO1xuICB9O1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gIHB1YmxpYyBnZXRCb3JkZXJSYWRpdXMgPSAoZnJhbWVTaXplVmFsdWU6IG51bWJlciwgbGluZUhlaWdodDogbnVtYmVyKTogc3RyaW5nIHwgbnVsbCA9PiB7XG4gICAgY29uc3QgYm9yZGVyUmFkaXVzUmF0aW8gPSAwLjE7XG4gICAgcmV0dXJuIChmcmFtZVNpemVWYWx1ZSA+IDAgPyBOdW1iZXJVdGlsLnJvdW5kVG8xMDAoYm9yZGVyUmFkaXVzUmF0aW8gKiBmcmFtZVNpemVWYWx1ZSkgOiAwKSArICdweCc7XG4gIH07XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgcHVibGljIGdldFBhZGRpbmdIb3IgPSAoZnJhbWVTaXplVmFsdWU6IG51bWJlciwgbGluZUhlaWdodDogbnVtYmVyKTogR2xuRnJhbWVTaXplUGFkZGluZ0hvclJlcyB8IG51bGwgPT4ge1xuICAgIGNvbnN0IHJhdGlvID0gdGhpcy5leHRlcmlvciA9PT0gR2xuQnV0dG9uRXh0ZXJpb3IuY29udGFpbmVkID8gMC4zNjM2IDogdGhpcy5leHRlcmlvciA9PT0gR2xuQnV0dG9uRXh0ZXJpb3Iub3V0bGluZWQgPyAwLjM0MDkgOiAwLjIwNDU7XG4gICAgY29uc3QgdmFsdWUgPSBmcmFtZVNpemVWYWx1ZSA+IDAgPyBOdW1iZXJVdGlsLnJvdW5kVG8xMDAocmF0aW8gKiBmcmFtZVNpemVWYWx1ZSkgOiBudWxsO1xuICAgIHJldHVybiB2YWx1ZSAhPT0gbnVsbCA/IHsgbGVmdDogdmFsdWUsIHJpZ2h0OiB2YWx1ZSB9IDogbnVsbDtcbiAgfTtcblxuICBwdWJsaWMgZ2V0UGFkZGluZ1ZlciA9IChmcmFtZVNpemVWYWx1ZTogbnVtYmVyLCBsaW5lSGVpZ2h0OiBudW1iZXIpOiBHbG5GcmFtZVNpemVQYWRkaW5nVmVyUmVzIHwgbnVsbCA9PiB7XG4gICAgY29uc3QgcGFyYW0gPSBmcmFtZVNpemVWYWx1ZSA+IDAgJiYgbGluZUhlaWdodCA+IDAgPyAoZnJhbWVTaXplVmFsdWUgLSBsaW5lSGVpZ2h0KSAvIDIgOiBudWxsO1xuICAgIGNvbnN0IHZhbHVlID0gcGFyYW0gPT09IG51bGwgPyBudWxsIDogdGhpcy5leHRlcmlvciA9PT0gR2xuQnV0dG9uRXh0ZXJpb3Iub3V0bGluZWQgPyBwYXJhbSAtIDEgOiBwYXJhbTtcbiAgICByZXR1cm4gdmFsdWUgIT09IG51bGwgPyB7IHRvcDogdmFsdWUsIGJvdHRvbTogdmFsdWUgfSA6IG51bGw7XG4gIH07XG5cbiAgLy8gKiogSW1wbGVtZW50YXRpb24gb2YgdGhlIEdsblNpemVQcmVwYXJlRGF0YSBpbnRlcmZhY2UuIChmaW5pc2gpICoqXG5cbiAgLy8gKiogUHJpdmF0ZSBBUEkgKipcblxuICBwcml2YXRlIHNldHRpbmdFeHRlcmlvcihyZW5kZXJlcjogUmVuZGVyZXIyLCBlbGVtOiBFbGVtZW50UmVmPEhUTUxFbGVtZW50PiwgZXh0ZXJpb3I6IEdsbkJ1dHRvbkV4dGVyaW9yKTogdm9pZCB7XG4gICAgSHRtbEVsZW1VdGlsLnNldENsYXNzKHJlbmRlcmVyLCBlbGVtLCAnZ2xuYnQtdGV4dCcsIEdsbkJ1dHRvbkV4dGVyaW9yVXRpbC5pc1RleHQoZXh0ZXJpb3IpKTtcbiAgICBIdG1sRWxlbVV0aWwuc2V0QXR0cihyZW5kZXJlciwgZWxlbSwgJ2V4dC10JywgR2xuQnV0dG9uRXh0ZXJpb3JVdGlsLmlzVGV4dChleHRlcmlvcikgPyAnJyA6IG51bGwpO1xuICAgIEh0bWxFbGVtVXRpbC5zZXRDbGFzcyhyZW5kZXJlciwgZWxlbSwgJ2dsbmJ0LWNvbnRhaW5lZCcsIEdsbkJ1dHRvbkV4dGVyaW9yVXRpbC5pc0NvbnRhaW5lZChleHRlcmlvcikpO1xuICAgIEh0bWxFbGVtVXRpbC5zZXRBdHRyKHJlbmRlcmVyLCBlbGVtLCAnZXh0LWMnLCBHbG5CdXR0b25FeHRlcmlvclV0aWwuaXNDb250YWluZWQoZXh0ZXJpb3IpID8gJycgOiBudWxsKTtcbiAgICBIdG1sRWxlbVV0aWwuc2V0Q2xhc3MocmVuZGVyZXIsIGVsZW0sICdnbG5idC1vdXRsaW5lZCcsIEdsbkJ1dHRvbkV4dGVyaW9yVXRpbC5pc091dGxpbmVkKGV4dGVyaW9yKSk7XG4gICAgSHRtbEVsZW1VdGlsLnNldEF0dHIocmVuZGVyZXIsIGVsZW0sICdleHQtbycsIEdsbkJ1dHRvbkV4dGVyaW9yVXRpbC5pc091dGxpbmVkKGV4dGVyaW9yKSA/ICcnIDogbnVsbCk7XG4gIH1cbn1cbiJdfQ==
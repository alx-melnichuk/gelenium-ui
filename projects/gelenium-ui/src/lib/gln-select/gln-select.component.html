<ng-container [formGroup]="formGroup">
  <div glns-wrap
    class="glns-wrap"
    [glnFrameExteriorInput]="exterior || (currConfig?.exterior || null)"
    #glnFrameExteriorInput="glnFrameExteriorInput"
    [glnFrameExteriorInputElementRef]="hostRef"
    cdkOverlayOrigin
    #origin="cdkOverlayOrigin"
    #trigger
    (click)="toggle()">
    <gln-frame [ngClass]="[(isPanelOpen ? 'is-open': '')]"
      [attr.opn]="isPanelOpen ? '': null"
      [config]="currConfig"
      [exterior]="glnFrameExteriorInput.exterior"
      [hoverColor]="getBoolean(hoverColor)"
      [isDisabled]="disabled"
      [isError]="!!errors || getBoolean(isError)"
      [isFilled]="isFilled"
      [isLabelShrink]="getBoolean(lbShrink)"
      [isRequired]="required"
      [label]="label"
      [noAnimation]="isNoAnimation || isWriteValueInit"
      [noLabel]="getBoolean(noLabel)"
      [glnFrameSize]="frameSize || (currConfig?.frameSize || null)"
      #glnFrameSize="glnFrameSize"
      [glnFrameSizeElementRef]="hostRef"
      [glnFrameSizeValue]="currConfig?.frameSizeValue || frameSizeDefault"
      [glnFrameSizeLabelPd]="currConfig?.labelPd || null"
      [glnFrameSizePrepare]="glnFrameExteriorInput"
      [glnFrameSizeModify]="glnFrameExteriorInput.exterior"
      (glnFrameSizeChange)="frameChange($event)"
      glnFrameOrnament
      [glnFrameOrnamentLfAlign]="ornamLfAlign || (currConfig?.ornamLfAlign || null)"
      [glnFrameOrnamentRgAlign]="ornamRgAlign || (currConfig?.ornamRgAlign || null)"
      mouseup9="togger()">

      <span glnf-orn-lf
        class="glns-ornam-lf">
        <ng-content select="[gln-orn-lf]"></ng-content>
      </span>

      <span glnf-orn-rg
        class="glns-ornam-rg">
        <ng-content select="[gln-orn-rg]"></ng-content>

        <div *ngIf="!getBoolean(noIcon)"
          glns-rhomb
          [attr.opn]="isPanelOpen ? '': null"
          [ngClass]="['glns-rhomb', (isPanelOpen ? 'is-open': '')]"
          focusable="false"
          aria-hidden="true">
        </div>
      </span>

      <div #mainElementRef
        glnf-pd-ver
        glnf-pd-hor
        glnf-elem
        [attr.id]="id + '-elem'"
        [attr.tabindex]="disabled ? '-1': tabIndex"
        focus9="getFocusMainElem($event)"
        blur9="lossFocusMainElem($event)">

        <ng-container *ngIf="isFilled; else elseBlockFilled">
          <ng-container
            *ngFor="let item of selectedItems.items; last as isLast trackBy: trackByMenuItem;">
            <span [innerHTML]="item.getTrustHtml()"></span>
            <ng-container *ngIf="selectedItems.items.length > 1 && !isLast">, </ng-container>
          </ng-container>
        </ng-container>
        <ng-template #elseBlockFilled>
          <div>&ZeroWidthSpace;</div>
        </ng-template>
        <!-- <ng-container *ngTemplateOutlet="templateRefExp; context: contextExp"></ng-container> -->
      </div>

    </gln-frame>

    <!-- <gln-menu-item-panel-show *ngIf="isOpenPanel || isBarShowAnimation"
      tabindex="-1"
      glnmibs-elem
      class="glnmibs-elem"
      [isFixRight]="getBoolean(isFixRight)"
      [isShow]="isOpenPanel"
      [isSkipFirstEvent]="true"
      [menuItemList]="menuItemList"
      [noAnimation]="isNoAnimation"
      [visibleSize]="visibleSize"
      (hasAnimation)="isBarShowAnimation=$event"
      (closing)="close()"
      (selected)="selectionMenuElement($event)">

      <ng-content select="gln-menu-item"></ng-content>

    </gln-menu-item-panel-show> -->

  </div>
</ng-container>
<!-- <pre>
value={{ value === null ? 'null' : value }}
errors0={{errors | json }}
</pre> -->

<gln-hint-or-error *ngIf="!!helperText"
  [text]="helperText"
  [isError]="!!errors || getBoolean(isError)"
  [isFocused]="isFocused"
  [isDisabled]="disabled">
</gln-hint-or-error>

<ng-template cdkConnectedOverlay
  cdkConnectedOverlayBackdropClass="cdk-overlay-transparent-backdrop"
  cdkConnectedOverlayHasBackdrop
  cdkConnectedOverlayLockPosition
  [cdkConnectedOverlayMinWidth]="triggerRect?.width!"
  cdkConnectedOverlayOffsetY9="offsetY"
  [cdkConnectedOverlayOpen]="isPanelOpen || hasPanelAnimation"
  [cdkConnectedOverlayOrigin]="origin"
  [cdkConnectedOverlayPanelClass]="overlayPanelClass"
  [cdkConnectedOverlayPositions]="positions"
  [cdkConnectedOverlayScrollStrategy]="scrollStrategy"
  cdkConnectedOverlayTransformOriginOn="transformOriginOn"
  (backdropClick)="close()"
  (attach)="attach()"
  (detach)="close()">
  <div glnsp-wrap
    [ngClass]="['gln-select-panel-wrap', (isNoAnimation ? 'gln-no-animation': ''), (isNoAnimation ? 'gln-no-elevation': '')]"
    [attr.noAnimation]="isNoAnimation ? '' : null"
    [attr.is-open]="!isNoAnimation && isPanelOpen ? '' : null"
    [attr.is-hide]="!isNoAnimation && !isPanelOpen ? '' : null"
    (animationend)="setHasPanelAnimation()"
    (animationcancel)="setHasPanelAnimation()">
    <div glns-panel
      [ngClass]="['gln-select-panel', panelClass]"
      role="listbox"
      tabindex="-1"
      [attr.id]="id + '-panel'"
      [attr.aria-multiselectable]="multiple"
      [attr.noElevation]="getBoolean(noElevation) ? '' : null"
      keydown9evn="_handleKeydown($event)">
      <ng-content></ng-content>
    </div>
  </div>
</ng-template>
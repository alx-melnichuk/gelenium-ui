<ng-container [formGroup]="formGroup">
  <div glns-wrap
    class="glns-wrap"
    [glnFrameExteriorInput]="exterior || currConfig?.exterior"
    #glnFrameExteriorInput="glnFrameExteriorInput"
    [glnFrameExteriorInputElementRef]="hostRef"
    (glnFrameExteriorInputChange)="glnFrameSize.updatePaddingVerAndHor()"
    cdkOverlayOrigin
    #origin="cdkOverlayOrigin"
    #triggerRef
    (click)="!disabled ? toggle() : null">
    <gln-frame #frameRef
      [ngClass]="[(isPanelOpen ? 'is-open' : '')]"
      [config]="currConfig"
      [exterior]="glnFrameExteriorInput.exterior"
      [isDisabled]="disabled"
      [isError]="!!errors || error"
      [isFilled]="isFilled"
      [isLabelShrink]="labelShrink || currConfig?.isLabelShrink"
      [isNoAnimation]="noAnimation || currConfig?.isNoAnimation || isWriteValueInit"
      [isNoLabel]="noLabel || currConfig?.isNoLabel"
      [isRequired]="required"
      [label]="label"
      [glnFrameSize]="frameSize || currConfig?.frameSize"
      #glnFrameSize="glnFrameSize"
      [glnFrameSizeElementRef]="hostRef"
      [glnFrameSizeValue]="currConfig?.frameSizeValue || frameSizeDefault"
      [glnFrameSizeLabelPd]="currConfig?.labelPd"
      [glnFrameSizePrepare]="glnFrameExteriorInput"
      (glnFrameSizeChange)="frameSizeChange($event)"
      glnFrameOrnament
      [glnFrameOrnamentLfAlign]="ornamLfAlign || currConfig?.ornamLfAlign"
      [glnFrameOrnamentRgAlign]="ornamRgAlign || currConfig?.ornamRgAlign"
      [glnFrameOrnamentPath]="'/div{0}'"
      [attr.opn]="isPanelOpen ? '' : null"
      [attr.tabindex]="!disabled ? tabIndex : null"
      (focus)="doFocus()"
      (blur)="doBlur()"
      (keydown)="frameKeydown($event)">

      <span glnfr-orn-lf
        class="gln-ornam-lf">
        <ng-content select="[gln-orn-lf]"></ng-content>
      </span>

      <span glnfr-orn-rg
        class="gln-ornam-rg">
        <ng-content select="[gln-orn-rg]"></ng-content>

        <div *ngIf="!getBoolean(isNoIcon) && !currConfig?.isNoIcon"
          glns-rhomb
          [attr.opn]="isPanelOpen ? '' : null"
          [attr.noAnm]="noAnimation ? '' : null"
          [ngClass]="['glns-rhomb', (isPanelOpen ? 'is-open' : '')]"
          focusable="false"
          aria-hidden="true">
        </div>
      </span>

      <div [ngClass]="[(readOnly ? 'gln-readonly' : '')]"
        glnfr-pd-ver
        glnfr-pd-hor
        glnfr-elem
        [attr.id]="id + '-elem'">

        <ng-container [ngSwitch]="isFilled">
          <div *ngSwitchCase="false">&ZeroWidthSpace;</div>

          <ng-container *ngSwitchCase="true"
            [ngSwitch]="!!customTrigger">

            <ng-content *ngSwitchCase="true"
              select="gln-select-trigger">
            </ng-content>

            <ng-container *ngSwitchCase="false">
              <ng-container
                *ngFor="let option of selectedOptions; count as countVal; last as isLast; trackBy: trackByOption;">
                <span [innerHTML]="option.getTrustHtml()"></span>
                <span *ngIf="countVal > 1 && !isLast">, </span>
              </ng-container>
            </ng-container>

          </ng-container>
        </ng-container>
      </div>

    </gln-frame>
  </div>
</ng-container>

<gln-hint-or-error *ngIf="!!helperText"
  [text]="helperText"
  [isError]="!!errors || error"
  [isFocused]="isFocused"
  [isDisabled]="disabled">
</gln-hint-or-error>

<ng-template cdkConnectedOverlay
  [cdkConnectedOverlayBackdropClass]="backdropClassVal || 'cdk-overlay-transparent-backdrop'"
  cdkConnectedOverlayHasBackdrop
  [cdkConnectedOverlayDisableClose]="true"
  cdkConnectedOverlayLockPosition
  [cdkConnectedOverlayMinWidth]="triggerRect?.width!"
  [cdkConnectedOverlayOpen]="isPanelOpen || hasPanelAnimation"
  [cdkConnectedOverlayOrigin]="origin"
  [cdkConnectedOverlayPanelClass]="overlayPanelClass"
  [cdkConnectedOverlayPositions]="positionList"
  [cdkConnectedOverlayScrollStrategy]="scrollStrategy"
  (backdropClick)="backdropClick()"
  (attach)="attach()"
  (detach)="isPanelOpen ? close() : null">

  <div glnsp-wrap
    class="gln-select-panel-wrap"
    [ngClass]="[(noAnimation ? 'gln-no-animation' : ''), (getBoolean(noElevationVal) ? 'gln-no-elevation' : '')]"
    [attr.noAnm]="noAnimation ? '' : null"
    (animationend)="hasPanelAnimation = isPanelOpen"
    (animationcancel)="hasPanelAnimation = isPanelOpen">
    <div glns-panel
      class="gln-select-panel"
      [ngClass]="getPanelClass(panelClassList)"
      role="listbox"
      [attr.id]="id + '-panel'"
      [attr.aria-multiselectable]="multiple"
      [attr.noElevation]="getBoolean(noElevationVal) ? '' : null"
      (focus)="doFocusOnPanel()">
      <ng-content select=":not(gln-select-trigger)"></ng-content>
    </div>
  </div>

</ng-template>
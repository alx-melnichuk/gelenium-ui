<ng-container [formGroup]="formGroup">
  <div class="glns-wrap"
    [glnFrameExteriorInput]="exterior || (currConfig?.exterior || null)"
    #glnFrameExteriorInput="glnFrameExteriorInput"
    [glnFrameExteriorInputElementRef]="hostRef">

    <gln-frame [label]="label"
      [exterior]="glnFrameExteriorInput.exterior"
      [config]="currConfig"
      [isLabelShrink]="getBoolean(lbShrink)"
      [noLabel]="getBoolean(noLabel)"
      [isDisabled]="disabled"
      [isFilled]="isFilled"
      [isError]="!!formControl.errors || getBoolean(isError)"
      [isRequired]="required"
      [glnFrameSize]="frameSize || (currConfig?.frameSize || null)"
      #glnFrameSize="glnFrameSize"
      [glnFrameSizeElementRef]="hostRef"
      [glnFrameSizeValue]="currConfig?.frameSizeValue || defaultFrameSize"
      [glnFrameSizeLabelPd]="currConfig?.labelPd || null"
      [glnFrameSizePrepare]="glnFrameExteriorInput"
      [glnFrameSizeModify]="glnFrameExteriorInput.exterior"
      (glnFrameSizeChange)="frameChange($event)"
      glnFrameOrnament
      [glnFrameOrnamentLfAlign]="ornamLfAlign || (currConfig?.ornamLfAlign || null)"
      [glnFrameOrnamentRgAlign]="ornamRgAlign || (currConfig?.ornamRgAlign || null)">

      <span glnf-orn-lf
        class="glns-ornam-lf">
        <ng-content select="[gln-orn-lf]"></ng-content>
      </span>
      <span glnf-orn-rg
        class="glns-ornam-rg">
        <ng-content select="[gln-orn-rg]"></ng-content>
        <button glns-btn
          class="glns-btn">
          <svg *ngIf="!getBoolean(noIcon)"
            ico
            [attr.opn]="isOpen && !isHide ? 'is-open': null"
            [ngClass]="['glns-icon', (isOpen ? 'is-open' : '')]"
            focusable="false"
            aria-hidden="true"
            viewBox="0 0 24 24">
            <path d="M7 10l5 5 5-5z"></path>
          </svg>
        </button>
      </span>

      <div [attr.tabindex]="disabled ? null : 0"
        #mainElementRef
        [attr.id]="id + '_wrap'"
        glnf-pd-ver
        glnf-pd-hor
        glns-elem
        (focus)="doFocus()"
        (blur)="doBlur()"
        (mousedown)="trigger()"
        (mouseup)="$event.stopPropagation()">
        <!-- <div *ngIf="isFilled; else elseBlockFilled"
          [innerHTML]="selectedMenuItem?.getTrustHtml()">
        </div> -->
        <ng-container *ngIf="isFilled; else elseBlockFilled">
          <ng-container *ngFor="let item of selectedMenuItems; trackBy: trackByMenuItem;">
            <span [innerHTML]="item.getTrustHtml()"></span>
          </ng-container>
        </ng-container>
        <ng-template #elseBlockFilled>
          <div>&ZeroWidthSpace;</div>
        </ng-template>

        <!-- <ng-container *ngTemplateOutlet="templateRefExp; context: contextExp"></ng-container> -->
      </div>

    </gln-frame>
  </div>
</ng-container>

<div [ngClass]="['glns-wrap-items', (isHide ? 'is-hide': (isOpen ? 'is-open': ''))]"
  tabindex="-1"
  (animationstart)="doAnimationStart()"
  (animationend)="doAnimationEnd()">
  <gln-menu-item-panel *ngIf="isOpen"
    tabindex="-1"
    [attr.no-mouse]="isAnimation ? '': null"
    [ngClass]="['glns-panel', (isFixRight ? 'is-fix-right' : '')]"
    [isFixRight]="getBoolean(isFixRight)"
    [isMultiple]="multiple"
    [menuItemList]="menuItemList"
    [visibleSize]="sizeVisible"
    (selected)="selectedMenuElement($event, !!multiple)"
    (closing)="close()">
    <ng-content select="gln-menu-item"></ng-content>
  </gln-menu-item-panel>
</div>
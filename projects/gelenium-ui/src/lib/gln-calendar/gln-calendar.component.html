<div glncn-wrapper
  class="gln-calendar-wrapper">
  <div glncn-head
    class="gln-calendar-head">

    <div glncn-header
      [attr.glncn-header-day]="isViewModeDay() ? '' : undefined"
      [attr.glncn-header-month]="isViewModeMonth() ? '' : undefined"
      [attr.glncn-header-year]="isViewModeYear() ? '' : undefined"
      [ngClass]="['gln-calendar-header'
        , (isViewModeDay() ? 'gln-day' : '')
        , (isViewModeMonth() ? 'gln-month' : '')
        , (isViewModeYear() ? 'gln-year' : '')]">

      <button type="button"
        glncn-header-caption
        glncn-crs-pnt
        class="gln-calendar-header-caption"
        [attr.tabindex]="!isDisabledVal ? 0 : -1"
        [attr.disabled]="isDisabledVal || isReadOnlyVal ? '' : undefined"
        (click)="switchViewMode()">

        <ng-container
          [ngTemplateOutlet]="isViewModeDay() ? templateTitleCaptionViewModeDay 
          : (isViewModeMonth() ? templateTitleCaptionViewModeMonth : (isViewModeYear() ? templateTitleCaptionViewModeYear : null))">
        </ng-container>

        <ng-template #templateTitleCaptionViewModeDay>
          <span class="gln-calendar-caption-month">{{ currentMonthStr }}</span>
          <span class="gln-calendar-caption-year">{{ '&ensp;' + currentYearStr
            }}</span>
        </ng-template>

        <ng-template #templateTitleCaptionViewModeMonth>
          <span class="gln-calendar-caption-label-month">
            {{ '&emsp;' + currentYearStr }}
          </span>
        </ng-template>

        <ng-template #templateTitleCaptionViewModeYear>
          <span class="gln-calendar-caption-label-years">
            {{ frameYearCells[0].label + ' - ' + frameYearCells[frameYearCells.length - 1].label }}
          </span>
        </ng-template>

      </button>

      <button type="button"
        *ngIf="!isDisabledVal && !isHorizontVal"
        glncn-switch
        glncn-crs-pnt
        glncn-nav
        class="gln-calendar-switch"
        [attr.tabindex]="!isDisabledVal ? 0 : -1"
        [attr.disabled]="isDisabledVal || isReadOnlyVal ? '' : undefined"
        (click)="switchViewMode()">
        <svg glncn-icon
          class="gln-calendar-switch"
          focusable="false"
          aria-hidden="true"
          viewBox="0 0 24 24">
          <path d="M7 10l5 5 5-5z"></path>
        </svg>
        <!-- <span class="MuiTouchRipple-root css-w0pj6f"></span> -->
      </button>
    </div>

    <button type="button"
      glncn-prev
      glncn-crs-pnt
      glncn-nav
      class="gln-calendar-nav gln-calendar-prev"
      [attr.tabindex]="!isDisabledVal ? 0 : -1"
      [attr.disabled]="isDisabledVal || isReadOnlyVal
        || (isViewModeDay() ? !isPrevMonthAvailable : (isViewModeMonth() ? !isPrevYearAvailable : !isPrevYearsAvailable) )
        ? '' : undefined"
      (click)="prevPeriod(getPeriodByViewMode())">
      <svg glncn-icon
        class="gln-calendar-t-icon icon-prev"
        focusable="false"
        aria-hidden="true"
        viewBox="0 0 24 24">
        <path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"></path>
      </svg>
    </button>

    <button type="button"
      glncn-next
      glncn-crs-pnt
      glncn-nav
      class="gln-calendar-nav gln-calendar-next"
      [attr.tabindex]="!isDisabledVal ? 0 : -1"
      [attr.disabled]="isDisabledVal || isReadOnlyVal
        || (isViewModeDay() ? !isNextMonthAvailable : (isViewModeMonth() ? !isNextYearAvailable : !isNextYearsAvailable) )
        ? '' : undefined"
      (click)="nextPeriod(getPeriodByViewMode())">
      <svg glncn-icon
        class="gln-calendar-t-icon icon-next"
        focusable="false"
        aria-hidden="true"
        viewBox="0 0 24 24">
        <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"></path>
      </svg>
    </button>

  </div>

  <div glncn-view-day
    class="gln-calendar-view-day">

    <div glncn-day-header
      class="gln-calendar-day-header"
      [attr.glncn-hide]="!isViewModeDay() ? '' : undefined">

      <ng-container [ngTemplateOutlet]="isWeekNumberVal ? templateWeekNumberDayHeader : null">
      </ng-container>

      <ng-template #templateWeekNumberDayHeader>
        <div glncn-center
          glncn-week
          glncn-tint
          glncn-psv
          class="gln-calendar-day-header-week">
        </div>
      </ng-template>

      <div *ngFor="let cage of frameDayNames; trackBy: trackByIndex;"
        glncn-center
        glncn-cage
        glncn-tint
        [attr.glncn-psv]="isHideDayoffVal || !isDayoff(cage.dayWeek) ? '' : undefined"
        [attr.glncn-psv-off]="!isHideDayoffVal && isDayoff(cage.dayWeek) ? '' : undefined"
        [ngClass]="['gln-calendar-cage'
          , ('dayWeek' + cage.dayWeek)
          , (!isHideDayoffVal && isDayoff(cage.dayWeek) ? 'gln-dayoff' : '')]">
        {{ cage.name }}
      </div>
    </div>

    <div glncn-rows
      class="gln-calendar-list-days"
      [attr.glncn-hide]="!isViewModeDay() ? '' : undefined"
      #dayRowCellListRef
      (keydown)="keydownCell($event, 7, 7, activeView)">

      <ng-container [ngTemplateOutlet]="templateDayInfoRow"
        [ngTemplateOutletContext]="frameDayCellRows[0]">
      </ng-container>

      <ng-container [ngTemplateOutlet]="templateDayInfoRow"
        [ngTemplateOutletContext]="frameDayCellRows[1]">
      </ng-container>

      <ng-container [ngTemplateOutlet]="templateDayInfoRow"
        [ngTemplateOutletContext]="frameDayCellRows[2]">
      </ng-container>

      <ng-container [ngTemplateOutlet]="templateDayInfoRow"
        [ngTemplateOutletContext]="frameDayCellRows[3]">
      </ng-container>

      <ng-container [ngTemplateOutlet]="templateDayInfoRow"
        [ngTemplateOutletContext]="frameDayCellRows[4]">
      </ng-container>

      <ng-container [ngTemplateOutlet]="templateDayInfoRow"
        [ngTemplateOutletContext]="frameDayCellRows[5]">
      </ng-container>

    </div>

    <div *ngIf="isViewModeMonth()"
      glncn-view-month
      class="gln-calendar-view-month"
      #monthCellListRef
      (keydown)="keydownCell($event, colsByMonthsVal || 0, rowsByMonthsVal || 0, activeView)">
      <div *ngFor="let monthCell of frameMonthCells; trackBy: trackByCell;"
        glncn-month-wrapper
        class="gln-calendar-month-cell-wrapper">
        <button type="button"
          tabindex="0"
          glncn-month-cell
          glncn-crs-pnt
          glncn-tint
          [attr.glncn-act]="isStateActive(monthCell) ? '' : undefined"
          [attr.glncn-slct]="isStateSelected(monthCell) ? '' : undefined"
          [attr.glncn-today]="monthCell.isToday ? '' : undefined"
          [attr.glncn-mar]="monthCell.isCurrent ? '' : undefined"
          [attr.disabled]="isDisabledVal || monthCell.isDisabled ? '' : undefined"
          [attr.read-only]="isReadOnlyVal ? '' : undefined"
          [attr.tabindex]="!isDisabledVal && !monthCell.isDisabled && monthCell.isCurrent ? 0 : -1"
          [attr.data-label]="monthCell.label"
          [ngClass]="['gln-calendar-month-cell'
            , (isStateSelected(monthCell) ? 'gln-selected' : '')
            , (monthCell.isToday ? 'gln-today' : '')
            , (monthCell.isCurrent ? 'gln-current' : '')
            ].concat(monthCell.classes)"
          (click)="clickMonthCell(monthCell.value)">
          {{ monthCell.label }}
        </button>
      </div>
    </div>

    <div *ngIf="isViewModeYear()"
      glncn-view-year
      class="gln-calendar-view-year"
      #yearCellListRef
      (keydown)="keydownCell($event, colsByYearsVal || 0, rowsByYearsVal || 0, activeView)">
      <div *ngFor="let yearCell of frameYearCells; trackBy: trackByCell"
        glncn-year-wrapper
        class="gln-calendar-year-cell-wrapper">
        <button type="button"
          glncn-year-cell
          glncn-crs-pnt
          glncn-tint
          [attr.glncn-act]="isStateActive(yearCell) ? '' : undefined"
          [attr.glncn-slct]="isStateSelected(yearCell) ? '' : undefined"
          [attr.glncn-today]="yearCell.isToday ? '' : undefined"
          [attr.glncn-mar]="yearCell.isCurrent ? '' : undefined"
          [attr.disabled]="isDisabledVal || yearCell.isDisabled ? '' : undefined"
          [attr.read-only]="isReadOnlyVal ? '' : undefined"
          [attr.tabindex]="!isDisabledVal && !yearCell.isDisabled && yearCell.isCurrent ? 0 : -1"
          [attr.data-label]="yearCell.label"
          [ngClass]="['gln-calendar-year-cell'
            , (isStateSelected(yearCell) ? 'gln-selected' : '')
            , (yearCell.isToday ? 'gln-today' : '')
            , (yearCell.isCurrent ? 'gln-current' : '')
            ].concat(yearCell.classes)"
          (click)="clickYearCell(yearCell.value)">
          {{ yearCell.value }}
        </button>
      </div>
    </div>

  </div>

</div>




<ng-template #templateWeekNumberRow
  let-dataWeekNumber="weekNumber">
  <div glncn-center
    glncn-week
    glncn-tint
    glncn-psv
    class="gln-calendar-row-week">
    {{ dataWeekNumber }}
  </div>
</ng-template>


<ng-template #templateDayInfoRow
  let-dataCells="cellList"
  let-dataWeekNumberObj="weekNumberObj">
  <div glncn-row
    class="gln-calendar-row">

    <ng-container [ngTemplateOutlet]="isWeekNumberVal ? templateWeekNumberRow : null"
      [ngTemplateOutletContext]="dataWeekNumberObj">
    </ng-container>

    <ng-container *ngFor="let dayCell of dataCells; trackBy: trackByCell;">
      <button type="button"
        glncn-center
        glncn-item
        glncn-tint
        glncn-crs-pnt
        [attr.glncn-psv]="isStatePassive(dayCell) && (isHideDayoffVal || !isDayoff(dayCell.dayWeek)) ? '' : undefined"
        [attr.glncn-psv-off]="isStatePassive(dayCell) && !isHideDayoffVal && isDayoff(dayCell.dayWeek) ? '' : undefined"
        [attr.glncn-act]="isStateActive(dayCell) && (isHideDayoffVal || !isDayoff(dayCell.dayWeek)) ? '' : undefined"
        [attr.glncn-act-off]="isStateActive(dayCell) && !isHideDayoffVal && isDayoff(dayCell.dayWeek) ? '' : undefined"
        [attr.glncn-slct]="isStateSelected(dayCell) ? '' : undefined"
        [attr.glncn-today]="dayCell.isToday ? '' : undefined"
        [attr.glncn-mar]="dayCell.isCurrent ? '' : undefined"
        [attr.disabled]="isDisabledVal || (isHideOldDaysVal && isStatePassive(dayCell)) || dayCell.isDisabled ? '' : undefined"
        [attr.read-only]="isReadOnlyVal ? '' : undefined"
        [attr.tabindex]="isViewModeDay() && !isDisabledVal && !dayCell.isDisabled && dayCell.isCurrent ? 0 : -1"
        [attr.data-label]="dayCell.label"
        [ngClass]="['gln-calendar-day-cell'
          , ('dayWeek' + dayCell.dayWeek)
          , (isStatePassive(dayCell) ? 'gln-passive' : '')
          , (isStateActive(dayCell) ? 'gln-active' : '')
          , (isStateSelected(dayCell) ? 'gln-selected' : '')
          , (dayCell.isCurrent ? 'gln-marked' : '')
          , (!isHideDayoffVal && isDayoff(dayCell.dayWeek) ? 'gln-dayoff' : '')
          , (dayCell.isToday ? 'gln-today' : '')
          ].concat(dayCell.classes)"
        (click)="clickSelectItem(dayCell)">
        {{ isHideOldDaysVal && isStatePassive(dayCell)
        ? '' : (isTwoDigitDayVal ? get2Digit(dayCell.value) : dayCell.value) }}
      </button>
    </ng-container>

  </div>
</ng-template>
<div glncn-wrapper
  class="gln-calendar-wrapper">
  <div glncn-title
    class="gln-calendar-title">

    <div glncn-title-block
      [attr.glncn-title-day]="viewMode === VIEW_DAY ? '' : undefined"
      [attr.glncn-title-month]="viewMode === VIEW_MONTH ? '' : undefined"
      [attr.glncn-title-year]="viewMode === VIEW_YEAR ? '' : undefined"
      [ngClass]="['gln-calendar-title-block'
        , (viewMode === VIEW_DAY ? 'gln-title-day' : '')
        , (viewMode === VIEW_MONTH ? 'gln-title-month' : '')
        , (viewMode === VIEW_YEAR ? 'gln-title-year' : '')]">

      <button type="button"
        glncn-title-caption
        glncn-crs-pnt
        class="gln-calendar-title-caption"
        [attr.tabindex]="!isDisabledVal ? 0 : -1"
        [attr.disabled]="isDisabledVal || isReadOnlyVal ? '' : undefined"
        (click)="clickSwitch()">
        {{ viewMode === VIEW_DAY ? currMonthStr + ' ' + currYear
        : (viewMode === VIEW_YEAR ? (frameYearCells.at(0) || -1) + ' - ' + (frameYearCells.at(-1) || -1)
        : currYearChoice || currYear )
        }}
      </button>

      <button type="button"
        *ngIf="!isDisabledVal && !isHorizontVal"
        glncn-switch
        glncn-crs-pnt
        glncn-nav
        class="gln-calendar-switch"
        [attr.tabindex]="!isDisabledVal ? 0 : -1"
        [attr.disabled]="isDisabledVal || isReadOnlyVal ? '' : undefined"
        (click)="clickSwitch()">
        <svg glncn-icon
          class="gln-calendar-switch"
          focusable="false"
          aria-hidden="true"
          viewBox="0 0 24 24">
          <path d="M7 10l5 5 5-5z"></path>
        </svg>
        <!-- <span class="MuiTouchRipple-root css-w0pj6f"></span> -->
      </button>
    </div>

    <ng-container *ngIf="viewMode !== VIEW_MONTH">
      <button type="button"
        glncn-prev
        glncn-crs-pnt
        glncn-nav
        class="gln-calendar-nav gln-calendar-prev"
        [attr.tabindex]="!isDisabledVal ? 0 : -1"
        [attr.disabled]="isDisabledVal || isReadOnlyVal
          || (viewMode === VIEW_YEAR && (frameYearCells.at(0) || -1) === frameYearStart) ? '' : undefined"
        (click)="clickPrev(viewMode === VIEW_DAY ? VIEW_MONTH : (viewMode === VIEW_YEAR ? VIEW_YEAR : ''))">
        <svg glncn-icon
          class="gln-calendar-t-icon icon-prev"
          focusable="false"
          aria-hidden="true"
          viewBox="0 0 24 24">
          <path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"></path>
        </svg>
      </button>

      <button type="button"
        glncn-next
        glncn-crs-pnt
        glncn-nav
        class="gln-calendar-nav gln-calendar-next"
        [attr.tabindex]="!isDisabledVal ? 0 : -1"
        [attr.disabled]="isDisabledVal || isReadOnlyVal
          || (viewMode === VIEW_YEAR && (frameYearCells.at(-1) || -1) === frameYearFinish) ? '' : undefined"
        (click)="clickNext(viewMode === VIEW_DAY ? VIEW_MONTH : (viewMode === VIEW_YEAR ? VIEW_YEAR : ''))">
        <svg glncn-icon
          class="gln-calendar-t-icon icon-next"
          focusable="false"
          aria-hidden="true"
          viewBox="0 0 24 24">
          <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"></path>
        </svg>
      </button>
    </ng-container>
  </div>

  <div glncn-view-day
    class="gln-calendar-view-day">

    <div glncn-header
      class="gln-calendar-header"
      [attr.glncn-hide]="viewMode !== VIEW_DAY ? '' : undefined">

      <ng-container [ngTemplateOutlet]="isWeekNumberVal ? templateWeekNumberHeader : null">
      </ng-container>

      <div *ngFor="let cage of frameDayNames; trackBy: trackByIndex;"
        glncn-center
        glncn-cage
        glncn-tint
        [attr.glncn-old]="isHideDayoffVal || !cage.isDayoff ? '' : undefined"
        [attr.glncn-old-off]="!isHideDayoffVal && cage.isDayoff ? '' : undefined"
        [ngClass]="['gln-calendar-cage'
          , ('dayWeek' + cage.dayWeek)
          , (!isHideDayoffVal && cage.isDayoff ? 'gln-dayoff' : '')]">
        {{ cage.name }}
      </div>
    </div>

    <div glncn-rows
      class="gln-calendar-list-days"
      [attr.glncn-hide]="viewMode !== VIEW_DAY ? '' : undefined"
      #dayInfoRowListRef
      (keydown)="keydownDayCellRowList($event, dayInfoRowListRef)">

      <ng-container [ngTemplateOutlet]="templateDayInfoRow"
        [ngTemplateOutletContext]="frameDayCellRows[0]">
      </ng-container>

      <ng-container [ngTemplateOutlet]="templateDayInfoRow"
        [ngTemplateOutletContext]="frameDayCellRows[1]">
      </ng-container>

      <ng-container [ngTemplateOutlet]="templateDayInfoRow"
        [ngTemplateOutletContext]="frameDayCellRows[2]">
      </ng-container>

      <ng-container [ngTemplateOutlet]="templateDayInfoRow"
        [ngTemplateOutletContext]="frameDayCellRows[3]">
      </ng-container>

      <ng-container [ngTemplateOutlet]="templateDayInfoRow"
        [ngTemplateOutletContext]="frameDayCellRows[4]">
      </ng-container>

      <ng-container [ngTemplateOutlet]="templateDayInfoRow"
        [ngTemplateOutletContext]="frameDayCellRows[5]">
      </ng-container>

    </div>

    <div *ngIf="viewMode == VIEW_MONTH"
      glncn-view-month
      class="gln-calendar-view-month">
      <div *ngFor="let monthCell of frameMonthCells; index as monthIdx; trackBy: trackByIndex;"
        glncn-month-wrapper
        class="gln-calendar-month-cell-wrapper">
        <button type="button"
          tabindex="0"
          glncn-month-cell
          glncn-crs-pnt
          glncn-tint
          [attr.glncn-slct]="monthIdx === frameMonthValue ? '' : undefined"
          [attr.glncn-curr]="monthIdx !== frameMonthValue ? '' : undefined"
          [attr.glncn-today]="monthIdx === frameMonthToday ? '' : undefined"
          [ngClass]="['gln-calendar-month-cell'
            , (monthIdx === frameMonthValue ? 'gln-selected' : '')
            , (monthIdx === frameMonthToday ? 'gln-today' : '')]"
          (click)="clickMonthCell(monthIdx)">
          {{ monthCell }}
        </button>
      </div>
    </div>

    <div *ngIf="viewMode == VIEW_YEAR"
      glncn-view-year
      class="gln-calendar-view-year"
      #yearCellListRef
      (keydown)="keydownYearCellList($event, yearCellListRef, (frameYearCells.at(0) || -1), yearsPerPage)">
      <div *ngFor="let yearCell of frameYearCells; trackBy: trackByNumber"
        glncn-year-wrapper
        class="gln-calendar-year-cell-wrapper">
        <button type="button"
          glncn-year-cell
          glncn-crs-pnt
          glncn-tint
          [attr.glncn-curr]="yearCell !== frameYearValue ? '' : undefined"
          [attr.glncn-slct]="yearCell === frameYearValue ? '' : undefined"
          [attr.glncn-today]="yearCell === frameYearToday ? '' : undefined"
          [attr.disabled]="isDisabledVal || isReadOnlyVal
            || (!!frameYearMinDate && yearCell &lt; frameYearMinDate)
            || (!!frameYearMaxDate && frameYearMaxDate &lt; yearCell)
            ? '' : undefined"
          [ngClass]="['gln-calendar-year-cell'
            , (yearCell === frameYearValue ? 'gln-selected' : '')
            , (yearCell === frameYearToday ? 'gln-today' : '')]"
          [attr.tabindex]="!isDisabledVal && (yearCell === frameYearValue || yearCell === markedYear)? 0 : -1"
          [attr.data-label]="yearCell"
          (click)="clickYearCell(yearCell)">
          {{ yearCell }}
        </button>
      </div>
    </div>

  </div>

</div>


<ng-template #templateWeekNumberHeader>
  <div glncn-center
    glncn-week
    glncn-tint
    glncn-old
    class="gln-calendar-header-week">
  </div>
</ng-template>


<ng-template #templateWeekNumberRow
  let-dataWeekNumber="weekNumber">
  <div glncn-center
    glncn-week
    glncn-tint
    glncn-old
    class="gln-calendar-row-week">
    {{ dataWeekNumber }}
  </div>
</ng-template>


<ng-template #templateDayInfoRow
  let-dataCells="cellList"
  let-dataWeekNumberObj="weekNumberObj">
  <div glncn-row
    class="gln-calendar-row">

    <ng-container [ngTemplateOutlet]="isWeekNumberVal ? templateWeekNumberRow : null"
      [ngTemplateOutletContext]="dataWeekNumberObj">
    </ng-container>

    <ng-container *ngFor="let cell of dataCells; trackBy: trackByDayCell;">
      <button type="button"
        glncn-center
        glncn-item
        glncn-tint
        glncn-crs-pnt
        [attr.glncn-old]="cell.state == STATE_OLD && (isHideDayoffVal || !cell.isDayoff) ? '' : undefined"
        [attr.glncn-old-off]="cell.state == STATE_OLD && !isHideDayoffVal && cell.isDayoff ? '' : undefined"
        [attr.glncn-curr]="cell.state == STATE_CURR && (isHideDayoffVal || !cell.isDayoff) ? '' : undefined"
        [attr.glncn-curr-off]="cell.state == STATE_CURR && !isHideDayoffVal && cell.isDayoff ? '' : undefined"
        [attr.glncn-slct]="cell.state == STATE_SLCT ? '' : undefined"
        [attr.glncn-today]="cell.isToday ? '' : undefined"
        [ngClass]="['gln-calendar-day-cell'
          , ('dayWeek' + cell.dayWeek)
          , (cell.state == STATE_OLD ? 'gln-old' : '')
          , (cell.state == STATE_CURR ? 'gln-current' : '')
          , (cell.state == STATE_SLCT ? 'gln-selected' : '')
          , (!isHideDayoffVal && cell.isDayoff ? 'gln-dayoff' : '')
          , (cell.isToday ? 'gln-today' : '')]"
        [attr.disabled]="isDisabledVal || isReadOnlyVal || (isHideOldDaysVal && cell.state == STATE_OLD) ? '' : undefined"
        [attr.tabindex]="!isDisabledVal && cell.state == STATE_SLCT ? 0 : -1"
        [attr.data-label]="cell.label"
        (click)="clickSelectItem(cell)">
        {{ isHideOldDaysVal && cell.state == STATE_OLD ? '' : (isTwoDigitDayVal ? cell.day2d : cell.day) }}
      </button>
    </ng-container>

  </div>
</ng-template>